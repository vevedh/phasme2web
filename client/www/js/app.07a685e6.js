(function(e){function t(t){for(var o,i,s=t[0],l=t[1],c=t[2],u=0,d=[];u<s.length;u++)i=s[u],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);f&&f(t);while(d.length)d.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,i=1;i<n.length;i++){var s=n[i];0!==a[s]&&(o=!1)}o&&(r.splice(t--,1),e=l(l.s=n[0]))}return e}var o={},i={4:0},a={4:0},r=[];function s(e){return l.p+"js/"+({1:"chunk-common"}[e]||e)+"."+{1:"52c337cf",2:"e696adde",3:"00ba4946",5:"0eb4c2dd",6:"5caaa124",7:"1ac6009d",8:"0b0e32b9",9:"2702ca1d",10:"021bc319",11:"6d347bc6",12:"8eb5c81d",13:"520ffbdb",14:"9c9b0362",15:"3f29880f",16:"0904306c",17:"6740ee7c",18:"9a0e3366",19:"04b5961a"}[e]+".js"}function l(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n={1:1,2:1,3:1,5:1,6:1,7:1,8:1,9:1,10:1,11:1};i[e]?t.push(i[e]):0!==i[e]&&n[e]&&t.push(i[e]=new Promise((function(t,n){for(var o="css/"+({1:"chunk-common"}[e]||e)+"."+{1:"3b4ed221",2:"873d57e3",3:"4ae0702c",5:"a357d9d3",6:"fbf773ba",7:"c2d31ed8",8:"0c1f6fde",9:"785ee199",10:"0c1f6fde",11:"cb0fb197",12:"31d6cfe0",13:"31d6cfe0",14:"31d6cfe0",15:"31d6cfe0",16:"31d6cfe0",17:"31d6cfe0",18:"31d6cfe0",19:"31d6cfe0"}[e]+".css",a=l.p+o,r=document.getElementsByTagName("link"),s=0;s<r.length;s++){var c=r[s],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===o||u===a))return t()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){c=d[s],u=c.getAttribute("data-href");if(u===o||u===a)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var o=t&&t.target&&t.target.src||a,r=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=o,delete i[e],f.parentNode.removeChild(f),n(r)},f.href=a;var b=document.getElementsByTagName("head")[0];b.appendChild(f)})).then((function(){i[e]=0})));var o=a[e];if(0!==o)if(o)t.push(o[2]);else{var r=new Promise((function(t,n){o=a[e]=[t,n]}));t.push(o[2]=r);var c,u=document.createElement("script");u.charset="utf-8",u.timeout=120,l.nc&&u.setAttribute("nonce",l.nc),u.src=s(e);var d=new Error;c=function(t){u.onerror=u.onload=null,clearTimeout(f);var n=a[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+o+": "+i+")",d.name="ChunkLoadError",d.type=o,d.request=i,n[1](d)}a[e]=void 0}};var f=setTimeout((function(){c({type:"timeout",target:u})}),12e4);u.onerror=u.onload=c,document.head.appendChild(u)}return Promise.all(t)},l.m=e,l.c=o,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)l.d(n,o,function(t){return e[t]}.bind(null,o));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/",l.oe=function(e){throw console.error(e),e};var c=this["webpackJsonp"]=this["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var f=u;r.push([2,0]),n()})({"034f":function(e,t,n){"use strict";n("ed82")},2:function(e,t,n){e.exports=n("2f39")},"2f39":function(e,t,n){"use strict";n.r(t);var o={};n.r(o),n.d(o,"getRole",(function(){return X})),n.d(o,"getSiteRole",(function(){return Z})),n.d(o,"getDatabases",(function(){return ee})),n.d(o,"getCurrentTables",(function(){return te}));var i={};n.r(i),n.d(i,"setRole",(function(){return oe})),n.d(i,"setSiteAdmin",(function(){return ie})),n.d(i,"setSiteRole",(function(){return ae})),n.d(i,"setAllUtilisateurs",(function(){return re})),n.d(i,"setAllDatabases",(function(){return se})),n.d(i,"setCurrentTables",(function(){return le})),n.d(i,"setCurrentDb",(function(){return ce}));var a={};n.r(a),n.d(a,"getRole",(function(){return be})),n.d(a,"getSiteRole",(function(){return me})),n.d(a,"getAllDatabases",(function(){return pe})),n.d(a,"getAllUsers",(function(){return he})),n.d(a,"getTables",(function(){return ge}));n("5319"),n("35fc"),n("9f29"),n("573e"),n("43b9"),n("7d6e"),n("e54f"),n("4439"),n("4605"),n("f580"),n("5b2b"),n("8753"),n("2967"),n("7e67"),n("d770"),n("dd82"),n("922c"),n("d7fb"),n("a533"),n("c32e"),n("a151"),n("8bc7"),n("e80f"),n("5fec"),n("e42f"),n("57fc"),n("d67f"),n("880e"),n("1c10"),n("9482"),n("e797"),n("4848"),n("53d0"),n("63b1"),n("e9fd"),n("195c"),n("64e9"),n("33c5"),n("4f62"),n("0dbc"),n("7c38"),n("0756"),n("4953"),n("81db"),n("2e52"),n("22485"),n("7797"),n("12a1"),n("ce96"),n("70ca"),n("2318"),n("24bd"),n("8f27"),n("3064"),n("c9a2"),n("8767"),n("4a8e"),n("b828"),n("3c1c"),n("21cb"),n("c00e"),n("e4a8"),n("e4d3"),n("f4d9"),n("fffd"),n("f645"),n("639e"),n("34ee"),n("b794"),n("af24"),n("7c9c"),n("7bb2"),n("64f7"),n("c382"),n("053c"),n("c48f8"),n("f5d1"),n("3cec"),n("c00ee"),n("d450"),n("ca07"),n("14e3"),n("9393"),n("9227"),n("1dba"),n("674a"),n("de26"),n("6721"),n("9cb5"),n("ed9b"),n("fc83"),n("98e5"),n("605a"),n("ba60"),n("df07"),n("7903"),n("e046"),n("58af"),n("7713"),n("0571"),n("3e27"),n("6837"),n("3fc9"),n("0693"),n("bf41"),n("985d"),n("31cd"),n("b6d8");var r=n("2b0e"),s=n("34fe"),l=n("42d2"),c=n("b05d"),u=n("7f67"),d=n("2a19"),f=n("18d6"),b=n("f508"),m=n("1b3f"),p=n("515f"),h=n("696d"),g=n("b12a"),v=n("436b"),y=n("ff52");r["default"].use(c["a"],{config:{},lang:s["a"],iconSet:l["a"],directives:{ClosePopup:u["a"]},plugins:{Notify:d["a"],LocalStorage:f["a"],Loading:b["a"],LoadingBar:m["a"],Cookies:p["a"],AddressbarColor:h["a"],AppFullscreen:g["a"],Dialog:v["a"],Dark:y["a"]}});var A=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"q-app"}},[n("router-view")],1)},w=[],q=n("ed09"),N=Object(q["d"])({name:"App"}),D=N,S=(n("034f"),n("2877")),P=Object(S["a"])(D,A,w,!1,null,null,null),O=P.exports,T=n("2f62"),k=n("4bde"),x=n("5494");class j extends x["a"]{constructor(e,t){super(e,t)}static instanceDefaults(){return{email:""}}}j.modelName="User";const L="users",C=Object(x["e"])({Model:j,service:x["c"].service(L),servicePath:L,whitelist:["$regex","$options"]}),_=e=>{const{params:t}=e;return console.log("Check Find User ",t),t.query.email&&(console.log("Email :",t.query.email),t.query.email.$regex=new RegExp(t.query.email.$regex,"igm")),e};x["c"].service(L).hooks({before:{all:[],find:[_],get:[],create:[],update:[],patch:[],remove:[]},after:{all:[],find:[],get:[],create:[],update:[],patch:[],remove:[]},error:{all:[],find:[],get:[],create:[],update:[],patch:[],remove:[]}});var E=C,M=function(e,t,n,o){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,a){function r(e){try{l(o.next(e))}catch(t){a(t)}}function s(e){try{l(o["throw"](e))}catch(t){a(t)}}function l(e){e.done?n(e.value):i(e.value).then(r,s)}l((o=o.apply(e,t||[])).next())}))};class R extends x["a"]{constructor(e,t){super(e,t)}static instanceDefaults(){return{}}}R.modelName="Table";const F="tables",U=Object(x["e"])({Model:R,service:x["c"].service(F),servicePath:F,whitelist:["$regex","$options"],extend({store:e,module:t}){return{state:{table:[],actualites:[{_id:"",description:"test",rubriques:[],titre:"NOS ACTUALITES",type:"actualite"}]},getters:{listActus(e){return e.actualites[0]},getTableQuery(e){return e.table}},mutations:{setAllActus(e,t){console.log("Test setAllActus :",t),e.actualites=t},setTableQuery(e,t){let n=t[0],o=t[1],i=t[2];if(console.log(`Set Params : ${n},${o}`),Array.isArray(e.table)){let t=e.table.filter((e=>e.type==n&&e.table==o));0==t.length?e.table.push({type:n,name:o,datas:i}):e.table.map((e=>(e.type==n&&e.table==o&&(e.datas=i),e)))}}},actions:{getTableQuery(e,t){let n=t[0],o=t[1],i=t[2];console.log(`Params : ${n},${o},${i}`),x["c"].service(F).find({query:{tableDb:n,tableName:o,query:JSON.stringify({query:i})}}).then((t=>{console.log("Datas :",t),console.log("Query :",i);let a=[];a.push(n),a.push(o),a.push(t),console.log("payload :",a),e.commit("setTableQuery",a)}))},getTableById(e,t){return M(this,void 0,void 0,(function*(){let n=t[0],o=t[1],i=t[2],a=yield x["c"].service(F).find({query:{tableDb:o,tableName:i,query:JSON.stringify({query:{_id:n}})}}),r=[];r.push(o),r.push(i),r.push(a),console.log("payload :",r),e.commit("setTableQuery",r)}))},updateTableById(e,t){return M(this,void 0,void 0,(function*(){let n=t[0],o=t[1],i=t[2],a=t[3],r=yield x["c"].service(F).find({query:{tableDb:o,tableName:i,query:JSON.stringify({query:{_id:n}})}}),s=yield x["c"].service(F).update(r._id,a,{query:{tableDb:o,tableName:i}}),l=[];l.push(o),l.push(i),l.push(s),console.log("payload :",l),e.commit("setTableQuery",l)}))},createDataTable(e,t){return M(this,void 0,void 0,(function*(){let n=t[0],o=t[1],i=t[2],a=yield x["c"].service(F).create(i,{query:{tableDb:n,tableName:o}}),r=[];r.push(n),r.push(o),r.push(a),console.log("payload :",r),e.commit("setTableQuery",r)}))},getAllActus(e,t){x["c"].service(F).find({query:{tableDb:"mongodb",tableName:"dbHomeSections",query:JSON.stringify({query:{type:"actualite"}})}}).then((t=>{e.commit("setAllActus",t)}))},updateRubriqueActusById(e,t){return M(this,void 0,void 0,(function*(){let n=t[0],o=t[1],i=yield x["c"].service(F).find({query:{tableDb:"mongodb",tableName:"dbHomeSections",query:JSON.stringify({query:{type:"actualite"}})}});i[0].rubriques[n]=o,yield x["c"].service(F).update(i[0]._id,i[0],{query:{tableDb:"mongodb",tableName:"dbHomeSections"}}),e.commit("setAllActus",i)}))},addRubriqueActus(e,t){return M(this,void 0,void 0,(function*(){let n=t[0],o=yield x["c"].service(F).find({query:{tableDb:"mongodb",tableName:"dbHomeSections",query:JSON.stringify({query:{type:"actualite"}})}});console.log("Actualites :",o),o[0].rubriques.push(n),yield x["c"].service(F).update(o[0]._id,o[0],{query:{tableDb:"mongodb",tableName:"dbHomeSections"}}),e.commit("setAllActus",o)}))},delRubriqueActus(e,t){return M(this,void 0,void 0,(function*(){let n=t[0],o=yield x["c"].service(F).find({query:{tableDb:"mongodb",tableName:"dbHomeSections",query:JSON.stringify({query:{type:"actualite"}})}});console.log("Actualites :",o),o[0].rubriques.splice(n,1),yield x["c"].service(F).update(o[0]._id,o[0],{query:{tableDb:"mongodb",tableName:"dbHomeSections"}}),e.commit("setAllActus",o)}))}}}}}),$=e=>M(void 0,void 0,void 0,(function*(){const{app:t,method:n,result:o,params:i}=e;return console.log("Query table ",e),e}));x["c"].service(F).hooks({before:{all:[],find:[$],get:[],create:[],update:[],patch:[],remove:[]},after:{all:[],find:[],get:[],create:[],update:[],patch:[],remove:[]},error:{all:[],find:[],get:[],create:[],update:[],patch:[],remove:[]}});var J=U;class V extends x["a"]{constructor(e,t){super(e,t)}static instanceDefaults(){return{}}}V.modelName="ConfInfos";const I="conf-infos",Q=Object(x["e"])({Model:V,service:x["c"].service(I),servicePath:I,whitelist:["$regex","$options"]});x["c"].service(I).hooks({before:{all:[],find:[],get:[],create:[],update:[],patch:[],remove:[]},after:{all:[],find:[],get:[],create:[],update:[],patch:[],remove:[]},error:{all:[],find:[],get:[],create:[],update:[],patch:[],remove:[]}});var B=Q;class H extends x["a"]{constructor(e,t){super(e,t)}static instanceDefaults(){return{}}}H.modelName="CheckDbs";const z="checkdbs",G=Object(x["e"])({Model:H,service:x["c"].service(z),servicePath:z,whitelist:["$regex","$options"]});x["c"].service(z).hooks({before:{all:[],find:[],get:[],create:[],update:[],patch:[],remove:[]},after:{all:[],find:[],get:[],create:[],update:[],patch:[],remove:[]},error:{all:[],find:[],get:[],create:[],update:[],patch:[],remove:[]}});var K=G;function W(){return{bases:[],isAdmin:!1,currentDb:"",isSiteAdmin:!1,siteRole:"invite",currentTables:[],users:[]}}var Y=W;function X(e){return e.isAdmin}function Z(e){return e.siteRole}function ee(e){return e.bases}function te(e){return e.currentTables}var ne=function(e,t,n,o){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,a){function r(e){try{l(o.next(e))}catch(t){a(t)}}function s(e){try{l(o["throw"](e))}catch(t){a(t)}}function l(e){e.done?n(e.value):i(e.value).then(r,s)}l((o=o.apply(e,t||[])).next())}))};function oe(e,t){console.log("Role :",t),e.isAdmin=t}function ie(e,t){return ne(this,void 0,void 0,(function*(){e.isSiteAdmin=t}))}function ae(e,t){return ne(this,void 0,void 0,(function*(){e.siteRole=t}))}function re(e,t){return ne(this,void 0,void 0,(function*(){e.users=t}))}function se(e,t){return ne(this,void 0,void 0,(function*(){e.bases=t}))}function le(e,t){return ne(this,void 0,void 0,(function*(){e.currentTables=t}))}function ce(e,t){return ne(this,void 0,void 0,(function*(){e.currentDb=t}))}var ue=n("bc3a"),de=n.n(ue),fe=function(e,t,n,o){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,a){function r(e){try{l(o.next(e))}catch(t){a(t)}}function s(e){try{l(o["throw"](e))}catch(t){a(t)}}function l(e){e.done?n(e.value):i(e.value).then(r,s)}l((o=o.apply(e,t||[])).next())}))};function be({commit:e},t){return fe(this,void 0,void 0,(function*(){let n=!1;console.log("User to get role",t);let o=(yield x["c"].service("conf-infos").find()).admGroups;if(console.log("Admins :",o),console.log("Est authentifié :",x["c"].authentication.authenticated),x["c"].authentication.authenticated){const e=yield x["c"].authentication.app.authenticate();console.log("Auth infos :",e);let i=t;console.log("Current user ",i),Object(i).hasOwnProperty("user")&&(i=i.user);let a=i.memberOf&&Array.isArray(i.memberOf)?i.memberOf.map((e=>e.match(new RegExp(/(?<=CN=)(.*?)(?=\,)/,"gm"))[0])):i.memberOf.match(new RegExp(/(?<=CN=)(.*?)(?=\,)/,"gm"));console.log("User groupe :",a),n=a.filter((e=>(Array.isArray(o)?o:["none"]).includes(e))).length>0}console.log("ROLES isAdmin :",n),e("setRole",n)}))}function me({commit:e}){return fe(this,void 0,void 0,(function*(){const t=(yield de.a.get(window.location.origin+"/admins.json")).data;if(console.log("Est authentifié :",x["c"].authentication.authenticated),x["c"].authentication.authenticated){const n=yield x["c"].authentication.app.authenticate();console.log("Auth infos :",n.user.sAMAccountName),console.log("Utilisateurs admins :",t.admrdc);let o=n.user.sAMAccountName;e("setSiteRole","invite"),t.admrdc.includes(o)&&(e("setSiteAdmin",!0),console.log("ADMIN DU SITE  RDC"),e("setSiteRole","admrdc")),t.admparking.includes(o)&&(e("setSiteAdmin",!0),console.log("ADMIN DU SITE PARKING"),e("setSiteRole","admparking"))}}))}function pe({commit:e}){return fe(this,void 0,void 0,(function*(){const t=yield x["c"].service("checkdbs").find({query:{database:"databases"}});console.log("Toutes les bases :",t),e("setAllDatabases",t)}))}function he({commit:e}){return fe(this,void 0,void 0,(function*(){const t=yield x["c"].service("tables").find({query:{tableDb:"cacemdb",tableName:"ad-users",query:JSON.stringify({})}});console.log("Liste des utilisateurs :",t),e("setAllUtilisateurs",t)}))}function ge({commit:e},t){return fe(this,void 0,void 0,(function*(){const n=yield x["c"].service("checkdbs").find({query:{todb:`${t}`}});console.log("Toutes les tables :",n),e("setCurrentTables",n)}))}var ve={namespaced:!0,state:Y,getters:o,mutations:i,actions:a};function ye(){return{title:"default title",config:{},leftMenu:!1,mailsend:!1,visiteurs:[],utilisateurs:[],status:[],motifs:[],etages:[],contacts:[],chgaccueils:[],savedform:{},getform:[],allForms:[],applinks:[]}}var Ae=ye,we=n("1732"),qe=function(e,t,n,o){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,a){function r(e){try{l(o.next(e))}catch(t){a(t)}}function s(e){try{l(o["throw"](e))}catch(t){a(t)}}function l(e){e.done?n(e.value):i(e.value).then(r,s)}l((o=o.apply(e,t||[])).next())}))};const Ne={setTitle(e,t){e.commit("changeTitle",t)},getConfig(e){return qe(this,void 0,void 0,(function*(){let t;console.log("Env :","production"),t=yield x["c"].service("json_www").get("config.json"),console.log("Config :",t),e.commit("setConfig",t)}))},writeConfig(e,t){return qe(this,void 0,void 0,(function*(){let n;yield x["c"].service("json_www").create({path:"config.json",data:t}),console.log("Env :","production"),n=yield x["c"].service("json_www").get("config.json"),console.log("Config :",n),e.commit("setConfig",n)}))},toggleLeftDrawer(e){e.commit("changeLeftDrawer")},sendMail(e,t){return qe(this,void 0,void 0,(function*(){console.log("FEATHERS :",x["c"]);let n=t.to,o=t.subject,i=t.message;const a={to:n,subject:o,html:`${i}`};let r=yield x["c"].service("mailer").create(a);r?e.commit("setMailSendEmail",!0):e.commit("setMailSendEmail",!1)}))},initDbFromArray(e,t){return qe(this,void 0,void 0,(function*(){let e=t.datas,n=t.dbName,o=t.dbTable;Array.isArray(e)&&e.forEach((e=>qe(this,void 0,void 0,(function*(){yield x["c"].service("tables").create(e,{query:{tableDb:n,tableName:o}})}))))}))},getAllUsers(e){return qe(this,void 0,void 0,(function*(){let t;t=yield x["c"].service("adUsers").find({}),console.log("Liste des utilisateurs :",t.length),e.commit("setAllUtilisateurs",t)}))},saveForm(e,t){return qe(this,void 0,void 0,(function*(){console.log("Sauvegarde nouveau formulaire :",t),t.uid=Object(we["a"])();let n=yield x["c"].service("tables").create(t,{query:{tableDb:"cacemdb",tableName:"formulaires"}});console.log("Formulaire memorisé :",n),e.commit("setSavedForm",n)}))},updateForm(e,t){return qe(this,void 0,void 0,(function*(){console.log("Update nouveau formulaire :",t);const n=yield x["c"].service("tables").find({query:{tableDb:"cacemdb",tableName:"formulaires",query:JSON.stringify({query:{uid:t.uid}})}});let o=yield x["c"].service("tables").update(n[0]._id,t,{query:{tableDb:"cacemdb",tableName:"formulaires"}});console.log("Formulaire maj :",o),e.commit("setSavedForm",o)}))},getForm(e,t){return qe(this,void 0,void 0,(function*(){const n=yield x["c"].service("tables").find({query:{tableDb:"cacemdb",tableName:"formulaires",query:JSON.stringify({query:{uid:t}})}});console.log("Formulaire recupéré :",n),e.commit("setGetForm",n)}))},getAllForms(e){return qe(this,void 0,void 0,(function*(){const t=yield x["c"].service("tables").find({query:{tableDb:"cacemdb",tableName:"formulaires",query:JSON.stringify({})}});console.log("Liste des formulaires :",t),e.commit("setAllForms",t)}))},getAllAppLinks(e){return qe(this,void 0,void 0,(function*(){yield x["c"].service("tables").find({query:{tableDb:"db_support",tableName:"applinks",query:JSON.stringify({})}});const t=yield x["c"].service("tables").find({query:{tableDb:"db_support",tableName:"applinks",query:JSON.stringify({})}});console.log("Liste des liens apps :",t),e.commit("setAllAppLinks",t)}))},addAppLink(e,t){return qe(this,void 0,void 0,(function*(){const n=yield x["c"].service("tables").create(t,{query:{tableDb:"db_support",tableName:"applinks"}});console.log("Add appLink  :",n);const o=yield x["c"].service("tables").find({query:{tableDb:"db_support",tableName:"applinks",query:JSON.stringify({})}});console.log("Liste des liens apps :",o),e.commit("setAllAppLinks",o)}))},updateAppLink(e,t){return qe(this,void 0,void 0,(function*(){const n=yield x["c"].service("tables").update(t._id,t,{query:{tableDb:"db_support",tableName:"applinks"}});console.log("Add appLink  :",n);const o=yield x["c"].service("tables").find({query:{tableDb:"db_support",tableName:"applinks",query:JSON.stringify({})}});console.log("Liste des liens apps :",o),e.commit("setAllAppLinks",o)}))}};var De=Ne;const Se={getTitle(e){return e.title},getFormData(e){return e.getform}};var Pe=Se;const Oe={changeTitle(e,t){e.title="Change title to "+t},setConfig(e,t){e.config=t},changeLeftDrawer(e,t){e.leftMenu=!e.leftMenu},setLeftDrawer(e,t){e.leftMenu=t},setMailSendEmail(e,t){e.mailsend=t},setAllVisiteurs(e,t){e.visiteurs=t},setAllUtilisateurs(e,t){e.utilisateurs=t},setSavedForm(e,t){e.savedform=Object.assign({},t)},setGetForm(e,t){e.getform=t},setAllForms(e,t){e.allForms=t},setAllAppLinks(e,t){e.applinks=t}};var Te=Oe;const ke={namespaced:!0,actions:De,getters:Pe,mutations:Te,state:Ae};var xe=ke;function je(){return{layoutNeeded:!0,isLoginPage:!1,mobileMode:!1,menuCollapse:!0,posts:[],database:"",query:"",queryresult:"",lastresult:"",tables:[{dbType:"",dbName:"",datas:""}]}}var Le=je,Ce=function(e,t,n,o){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,a){function r(e){try{l(o.next(e))}catch(t){a(t)}}function s(e){try{l(o["throw"](e))}catch(t){a(t)}}function l(e){e.done?n(e.value):i(e.value).then(r,s)}l((o=o.apply(e,t||[])).next())}))};const _e={createTable({commit:e},t){return Ce(this,void 0,void 0,(function*(){console.log("Feathers services",x["c"]),console.log("Feathers payload",t);let n=yield x["c"].service("tables").create(t.datas,{query:{tableDb:t.tableDb,tableName:t.tableName}});e("setLastResult",n);let o=yield x["c"].service("tables").find({query:{tableDb:t.tableDb,tableName:t.tableName,query:JSON.stringify({})}}),i={tableDb:t.tableDb,tableName:t.tableName,datas:o};e("setTable",i)}))},queryTable({commit:e},t){return Ce(this,void 0,void 0,(function*(){let n=yield x["c"].service("tables").find({query:{tableDb:t.tableDb,tableName:t.tableName,query:JSON.stringify({query:t.query})}});e("setQuery",t.query),e("setQueryResult",n)}))}};var Ee=_e;const Me={getTables(e){return e.tables},getLayoutNeeded(e){return e.layoutNeeded},getIsLoginPage(e){return e.isLoginPage},getMobileMode(e){return e.mobileMode},getMenuCollapse(e){return e.menuCollapse},getPosts(e){return e.posts}};var Re=Me,Fe=function(e,t,n,o){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,a){function r(e){try{l(o.next(e))}catch(t){a(t)}}function s(e){try{l(o["throw"](e))}catch(t){a(t)}}function l(e){e.done?n(e.value):i(e.value).then(r,s)}l((o=o.apply(e,t||[])).next())}))};const Ue={setTable(e,t){return Fe(this,void 0,void 0,(function*(){console.log("Table type:",t.tableDb),console.log("Table Name:",t.tableName),console.log("Table Datas :",t.datas);const n=e.tables.find((e=>e.dbName==t.tableName));console.log("Table existe :",n),n?n.datas=t.datas:(console.log("Ajout de la table"),e.tables.push({dbType:t.tableDb,dbName:t.tableName,datas:t.datas}))}))},initTable(e,t){e.tables=t},setDatabase(e,t){e.database=t},setLastResult(e,t){e.lastresult=t},setQueryResult(e,t){e.queryresult=t},setQuery(e,t){e.query=t},setLayoutNeeded(e,t){e.layoutNeeded=t},setIsLoginPage(e,t){e.isLoginPage=t},setMobileMode(e,t){e.mobileMode=t},setMenuCollapse(e,t){e.menuCollapse=t},setPosts(e,t){e.posts=t}};var $e=Ue;const Je={namespaced:!0,actions:Ee,getters:Re,mutations:$e,state:Le};var Ve=Je;function Ie(){return{users:[]}}var Qe=Ie,Be=function(e,t,n,o){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,a){function r(e){try{l(o.next(e))}catch(t){a(t)}}function s(e){try{l(o["throw"](e))}catch(t){a(t)}}function l(e){e.done?n(e.value):i(e.value).then(r,s)}l((o=o.apply(e,t||[])).next())}))};const He={getUsers(e){return Be(this,void 0,void 0,(function*(){let t={"Content-Type":"application/json",Authorization:"Bearer 9232663-JbLRxOYVLtgHUFnvribV"},n=yield de.a.get("https://webapi.teamviewer.com/api/v1/users?full_list=true",{headers:t});console.log("Utilisateurs teamviewer :",n.data.users),e.commit("changeUsers",n.data.users)}))}};var ze=He;const Ge={getUsers(e){return e.users}};var Ke=Ge;const We={changeUsers(e,t){e.users=t}};var Ye=We;const Xe={namespaced:!0,actions:ze,getters:Ke,mutations:Ye,state:Qe};var Ze=Xe,et=function(e,t,n,o){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,a){function r(e){try{l(o.next(e))}catch(t){a(t)}}function s(e){try{l(o["throw"](e))}catch(t){a(t)}}function l(e){e.done?n(e.value):i(e.value).then(r,s)}l((o=o.apply(e,t||[])).next())}))};r["default"].use(T["b"]),r["default"].use(x["b"]);var tt=Object(k["store"])((function({Vue:e}){return et(this,void 0,void 0,(function*(){e.use(T["b"]);const t=new T["a"]({modules:{vvstore:Ve,adinfos:ve,admin:xe,teamviewer:Ze},plugins:[B,K,E,J,Object(x["d"])({userService:"users"})],strict:!1/*!!process.env.DEBUGGING*/}),n=yield x["c"].service("checkdbs").find({});console.log("Tables :",n),t.state.currentTables=n;const o=yield x["c"].service("checkdbs").find({query:{database:"database"}});console.log("Base :",o),t.state.currentDB=o;const i=[].map((e=>({dbType:"mongodb",dbName:e.name,datas:""})));return t.commit("vvstore/initTable",i),t.commit("vvstore/setDatabase",o),console.log("Database :",o),console.log("Store  = ",t),t}))})),nt=n("8c4f");const ot=[{path:"/",component:()=>Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"98aa")),children:[{path:"",component:()=>Promise.all([n.e(0),n.e(6)]).then(n.bind(null,"89ca")),meta:{requiresAuth:!0,title:"Page d'accueil"}},{path:"profil",component:()=>Promise.all([n.e(0),n.e(10)]).then(n.bind(null,"21bf")),meta:{requiresAuth:!0,title:"Page du profil"}},{path:"parking",component:()=>Promise.all([n.e(0),n.e(1),n.e(15)]).then(n.bind(null,"0c3f")),meta:{requiresAuth:!0,title:"Page Demande parking"}},{path:"resparking",component:()=>Promise.all([n.e(0),n.e(11)]).then(n.bind(null,"b8fa")),meta:{requiresAuth:!0,title:"Page Réservations parking"}}]},{path:"/applications",component:()=>Promise.all([n.e(0),n.e(3)]).then(n.bind(null,"9616")),children:[{path:"",component:()=>Promise.all([n.e(0),n.e(1),n.e(13)]).then(n.bind(null,"d8de")),meta:{requiresAuth:!0,title:"Nouveau visiteur"}}]},{path:"/formulaires",component:()=>Promise.all([n.e(0),n.e(3)]).then(n.bind(null,"9616")),children:[{path:"",component:()=>Promise.all([n.e(0),n.e(1),n.e(18)]).then(n.bind(null,"4524")),meta:{requiresAuth:!0,title:"Liste des formulaires"}}]},{path:"/dbadmin",component:()=>Promise.all([n.e(0),n.e(3)]).then(n.bind(null,"9616")),children:[{path:"",component:()=>Promise.all([n.e(0),n.e(1),n.e(14)]).then(n.bind(null,"0224")),meta:{requiresAuth:!0,title:"Administration des tables"}}]},{path:"/nouveau",component:()=>Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"98aa")),children:[{path:"",component:()=>Promise.all([n.e(0),n.e(1),n.e(19)]).then(n.bind(null,"1ac4")),meta:{requiresAuth:!0,title:"Nouveau visiteur"}}]},{path:"/form/:id",component:()=>Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"98aa")),children:[{path:"",component:()=>Promise.all([n.e(0),n.e(1),n.e(8)]).then(n.bind(null,"211c")),meta:{requiresAuth:!0,title:"Nouveau visiteur"}}]},{path:"/login",component:()=>Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"98aa")),children:[{path:"",component:()=>Promise.all([n.e(0),n.e(9)]).then(n.bind(null,"013f"))}]},{path:"/formbuilder",component:()=>Promise.all([n.e(0),n.e(7)]).then(n.bind(null,"5e9b")),children:[{path:"",component:()=>Promise.all([n.e(0),n.e(1),n.e(17)]).then(n.bind(null,"1d0e")),meta:{requiresAuth:!0,title:"Createur de formulaires"}}]},{path:"/donnees",component:()=>Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"98aa")),children:[{path:"",component:()=>Promise.all([n.e(0),n.e(1),n.e(16)]).then(n.bind(null,"77bc")),meta:{requiresAuth:!0,title:"Données visiteur"}}]},{path:"/flipbook",component:()=>Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"98aa")),children:[{path:"",component:()=>Promise.all([n.e(0),n.e(5)]).then(n.bind(null,"1a60")),meta:{requiresAuth:!0,title:"Document à feuilleter"}}]},{path:"*",component:()=>Promise.all([n.e(0),n.e(12)]).then(n.bind(null,"e51e"))}];var it=ot,at=Object(k["route"])((function({Vue:e}){e.use(nt["a"]);const t=new nt["a"]({scrollBehavior:()=>({x:0,y:0}),routes:it,mode:"history",base:"/"});return t})),rt=async function(){const e="function"===typeof tt?await tt({Vue:r["default"]}):tt,t="function"===typeof at?await at({Vue:r["default"],store:e}):at;e.$router=t;const n={router:t,store:e,render:e=>e(O),el:"#q-app"};return{app:n,store:e,router:t}},st=Object(k["boot"])((({Vue:e})=>{e.use(q["c"])})),lt=function(e,t,n,o){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,a){function r(e){try{l(o.next(e))}catch(t){a(t)}}function s(e){try{l(o["throw"](e))}catch(t){a(t)}}function l(e){e.done?n(e.value):i(e.value).then(r,s)}l((o=o.apply(e,t||[])).next())}))},ct=Object(k["boot"])((({router:e,store:t})=>lt(void 0,void 0,void 0,(function*(){e.beforeEach(((e,n,o)=>lt(void 0,void 0,void 0,(function*(){let n;if(m["a"].start(),console.log("Mode :","production"),n=window.location.origin,console.log("Store :",t.state),console.log("STorage navigateur :",f["a"].getItem("feathers-jwt")),e.meta.requiresAuth){console.log("Demande une authentification :",e),console.log("Verification sso"),d["a"].create({message:"Vérification SSO.",color:"negative"});let a={data:""};try{if(!t.state.auth.user){console.log("Verification sso api :",n),a=yield de.a.get(`${n}/auth/sso`,{withCredentials:!0}),console.log("Presso infos :",a);let e=yield t.dispatch("auth/authenticate",{strategy:"sso2",data:a.data});console.log("Authenticated :",e)}}catch(i){d["a"].create({message:"Echec d'accès sso !",color:"negative"}),t.state.auth.user?o():o("/login")}null!=t.state.auth.user?(d["a"].create({message:"Vous avez été identifié avec succès.",color:"positive"}),console.log("Utilisateur authentifié"),yield t.dispatch("adinfos/getRole",t.state.auth.user),console.log("Vers :",e.path),o(),m["a"]&&m["a"].stop()):(d["a"].create({message:"Une identification manuelle est nécessaire !",color:"negative"}),"/login"!==e.path&&o("/login"),m["a"]&&m["a"].stop())}else d["a"].create({message:"Vérification SSo impossible",color:"negative"}),o(),m["a"]&&m["a"].stop()})))),e.afterEach((e=>{m["a"].stop()}))})))),ut=Object(k["boot"])((({Vue:e})=>{e.prototype.$axios=de.a})),dt=n("1321"),ft=n.n(dt);r["default"].component("apexchart",ft.a);var bt=n("349e"),mt=n.n(bt),pt=n("e0d6"),ht=n.n(pt);r["default"].use(mt.a),r["default"].use(ht.a);var gt=n("9ce1");const vt="/";async function yt(){const{app:e,store:t,router:n}=await rt();let o=!1;const i=e=>{o=!0;const t=Object(e)===e?n.resolve(e).route.fullPath:e;window.location.href=t},a=window.location.href.replace(window.location.origin,""),s=[st,x["c"],ct,ut,void 0,void 0,gt["default"]];for(let c=0;!1===o&&c<s.length;c++)if("function"===typeof s[c])try{await s[c]({app:e,router:n,store:t,Vue:r["default"],ssrContext:null,redirect:i,urlPath:a,publicPath:vt})}catch(l){return l&&l.url?void(window.location.href=l.url):void console.error("[Quasar] boot error:",l)}!0!==o&&new r["default"](e)}yt()},3:function(e,t){},"31cd":function(e,t,n){},5494:function(e,t,n){"use strict";n.d(t,"d",(function(){return g})),n.d(t,"e",(function(){return h})),n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return A}));var o=n("b462"),i=n.n(o),a=n("4059"),r=n.n(a),s=n("8af1"),l=n.n(s),c=n("8055"),u=n.n(c),d=n("6bd9"),f=n("9e62f"),b=n("2b0e");let m;const p=i()();if("undefined"!==typeof window){console.log("Web origin :",window.location.origin),console.log("DEV env :","production"),m="8080"==window.location.origin.split(":")[2]?"https://svrdevweb.agglo.local":window.location.origin,console.log("DEV env :",m);const e=u()(m,{transports:["websocket"],rejectUnauthorized:!1});p.configure(r()(e,{timeout:12e4})).configure(l()({storage:window.localStorage})).hooks({before:{all:[Object(d["iff"])((e=>["create","update","patch"].includes(e.method)),Object(d["discard"])("__id","__isTemp"))]}})}else{m="https://svrdevweb.agglo.local";const e=u()("https://svrdevweb.agglo.local",{transports:["websocket"]});p.configure(r()(e)),p.configure(l()({header:"Authorization",path:"/api/authentication",jwtStrategy:"jwt",storageKey:"feathers-jwt"}))}b["default"].prototype.$feathersClient=p,t["c"]=p;const{makeServicePlugin:h,makeAuthPlugin:g,BaseModel:v,models:y,FeathersVuex:A}=Object(f["a"])(p,{serverAlias:"api",idField:"_id",whitelist:["$regex","$options"]})},ed82:function(e,t,n){}});