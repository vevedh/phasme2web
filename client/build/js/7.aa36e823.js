(this["webpackJsonp"]=this["webpackJsonp"]||[]).push([[7],{"013f":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{staticClass:"fit row justify-center bg-white"},[s("div",{staticClass:"column justify-center self-center q-pb-xl q-px-md",staticStyle:{width:"400px"}},[s("div",{staticClass:"row justify-center self-center",staticStyle:{width:"200px"}},[s("q-img",{attrs:{src:t.url,"spinner-color":"white"}})],1),s("q-card",{staticClass:"my-card",attrs:{bordered:""}},[s("q-card-section",{staticClass:"text-center bg-primary text-white text-h5 q-py-xs",staticStyle:{width:"100%"}},[t._v("\n        Identification\n      ")]),s("q-separator"),s("q-card-section",{staticClass:"q-pb-none"},[s("q-form",{staticClass:"q-px-xl "},[s("q-input",{attrs:{filled:"","bottom-slots":"",label:"*Utilisateur :",dense:t.dense,"lazy-rules":"",rules:[function(t){return t&&t.length>0||"Utilisateur du domaine obligatoire!"}]},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),s("q-input",{attrs:{filled:"","bottom-slots":"",type:"password",label:"Mot de passe :",dense:t.dense},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),s("q-card-actions",{staticClass:"row items-center justify-center q-mt-md q-pt-none"},[s("div",{attrs:{hidden:!t.loading}},[s("div",{staticClass:"col items-center justify-center"},[s("div",[s("q-spinner",{attrs:{color:"primary",size:"3em",thickness:10}})],1),s("div",{staticClass:"text-h6"},[t._v("Vérifications en cours...")])])])]),s("q-card-actions",{staticClass:"row items-center justify-center q-mt-md q-pt-none"},[s("div",{staticClass:"q-gutter-xl"},[s("q-btn",{attrs:{color:"primary",icon:"lock","text-color":"white",label:"Connexion",disable:""==t.email||""==t.password},on:{click:function(e){return t.onSubmit(t.email,t.password)}}})],1)])],1)],1)])},i=[],n=(s("5319"),s("2f62")),r={name:"LoginPage",data(){return{email:"",password:"",url:"cacem.png",error:"",dense:!0,loading:!1}},computed:{...Object(n["d"])("auth",["isAuthenticated","user"]),async checkIsAuthenticated(){console.log("Init");let t=await this.$store.dispatch("auth/authenticate").catch((t=>{console.log("Non authentifié!")}));if(console.log("Auth :",t),t.user)try{this.$router.replace("/")}catch(e){}}},setup(t,e){console.log("Propriétées :",t),console.log("Context :",e)},methods:{onSubmit(t,e){console.log("Click"),this.loading=!0,this.$store.dispatch("auth/authenticate",{strategy:"ldap",username:t,password:e}).then((t=>{console.log("Result :",t),this.loading=!1,this.$router.replace("/")})).catch((t=>{this.loading=!1,console.log("Erreur fatale :",t),this.error=t,this.alert(this.error)}))},alert(t){this.$q.dialog({title:"Erreur d'authentification !!",message:"authentification impossible pour l'instant"}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},onRegister(t,e){this.$router.push("/login/register")}}},o=r,c=(s("50ba"),s("2877")),l=s("9989"),d=s("068f"),u=s("f09f"),p=s("a370"),h=s("eb85"),m=s("0378"),f=s("27f9"),g=s("4b7e"),b=s("0d59"),q=s("9c40"),w=s("eebe"),y=s.n(w),C=Object(c["a"])(o,a,i,!1,null,null,null);e["default"]=C.exports;y()(C,"components",{QPage:l["a"],QImg:d["a"],QCard:u["a"],QCardSection:p["a"],QSeparator:h["a"],QForm:m["a"],QInput:f["a"],QCardActions:g["a"],QSpinner:b["a"],QBtn:q["a"]})},"50ba":function(t,e,s){"use strict";s("fe3c")},fe3c:function(t,e,s){}}]);