(this["webpackJsonp"]=this["webpackJsonp"]||[]).push([[27],{"1d0e":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",[e.showBuilder?a("vv-form-builder",{attrs:{value:e.fields,nameForm:e.currentFormId,formName:e.formName,formType:e.vtype,formAcc:e.rformAcc,dbname:e.vdbname,tablename:e.vtablename},on:{save:e.onSave,goBack:function(t){return e.gotoAccueil()},onlist:e.showListForms}}):e._e(),a("q-dialog",{model:{value:e.Alert_NewForm,callback:function(t){e.Alert_NewForm=t},expression:"Alert_NewForm"}},[a("q-card",[a("q-toolbar",[a("img",{attrs:{src:r("056e")}}),a("q-toolbar-title",[a("span",{staticClass:"text-weight-bold"},[e._v("Sauvegarde Impossible")])]),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),a("q-card-section",[e._v('\n        Merci de remplir les champs dans "PROPRIETE" - "GENERAL".\n      ')])],1)],1),a("q-dialog",{attrs:{position:"left","full-height":""},model:{value:e.showAdminMenu,callback:function(t){e.showAdminMenu=t},expression:"showAdminMenu"}},[a("q-card",{staticStyle:{width:"280px"}},[a("q-linear-progress",{attrs:{value:1,color:"amber"}}),a("q-card-section",{staticClass:"row items-start no-wrap"},[a("q-list",[a("q-item-label",{staticClass:"text-h6 text-grey-8 q-pt-xs",attrs:{header:""}},[e._v("\n            Menu Administrateur\n          ")]),a("q-item",{attrs:{clickable:"",to:"/"}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"home"}})],1),a("q-item-section",[a("q-item-label",[e._v("Accueil")]),a("q-item-label",{attrs:{caption:""}},[e._v(" Retour à l'accueil ")])],1)],1)],1)],1)],1)],1),a("q-dialog",{attrs:{position:"left","full-height":""},model:{value:e.showUserMenu,callback:function(t){e.showUserMenu=t},expression:"showUserMenu"}},[a("q-card",{staticStyle:{width:"280px"}},[a("q-linear-progress",{attrs:{value:1,color:"amber"}}),a("q-card-section",{staticClass:"row items-start no-wrap"},[a("q-list",[a("q-item-label",{staticClass:"text-h6 text-grey-8 q-pt-xs",attrs:{header:""}},[e._v("\n            Menu Utilisateur\n          ")]),a("q-item",{attrs:{clickable:"",to:"/"}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"home"}})],1),a("q-item-section",[a("q-item-label",[e._v("Accueil")]),a("q-item-label",{attrs:{caption:""}},[e._v(" Retour à l'accueil ")])],1)],1),a("q-item",{attrs:{clickable:"",to:{path:"nouveau",query:{type:"parking"}}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"directions_car_filled"}})],1),a("q-item-section",[a("q-item-label",[e._v("Packing")]),a("q-item-label",{attrs:{caption:""}},[e._v(" Formulaire parking ")])],1)],1)],1)],1)],1)],1)],1)},n=[],o=r("c973"),i=r.n(o),s=r("ded3"),c=r.n(s),l=(r("96cf"),r("ac1f"),r("1276"),r("498a"),r("cca6"),r("b64b"),r("4fadc"),r("13d5"),r("d3b7"),r("e9c4"),r("fb6a"),r("a15b"),r("2f62")),m=r("ed09"),u=r("bc78"),d=r("cf57"),f=r("bd4c"),p=r("c18b"),b=r("bc6f"),g=r("f9ea"),h=(u["a"].lighten,u["a"].setBrand,Object(m["d"])({name:"FormBuilder",components:{VvFormBuilder:p["y"],RvFormBuilder:p["s"],QFormBuilder:p["q"],TextElement:p["w"],CacemusersElement:p["b"],CommunesElement:p["d"],ParagraphElement:p["m"],CheckboxesElement:p["c"],RadioElement:p["r"],DateElement:p["e"],TimeElement:p["x"],DropdownElement:p["f"],EmailElement:p["g"],NameElement:p["k"],SimpleNameElement:p["u"],AddressElement:p["a"],PhoneElement:p["p"],FileElement:p["h"],PaymentElement:p["o"],TermsElement:p["v"],PageBreakElement:p["l"],ImageElement:p["j"],SectionBreakElement:p["t"],PassagersElement:p["n"],HiddenElement:p["i"]},data:function(){"Dimanche_Lundi_Mardi_Mercredi_Jeudi_Vendredi_Samedi".split("_"),"Dim_Lun_Mar_Mer_Jeu_Ven_Sam".split("_"),"Janvier_Février_Mars_Avril_Mai_Juin_Juillet_Aôut_Septembre_Octobre_Novembre_Décembre".split("_"),"Jan_Fév_Mar_Avr_Mai_Jun_Jui_Aou_Sep_Oct_Nov_Déc".split("_");return{tab:"nouveau",Alert_NewForm:!1,showBuilder:!0,fields:[],fieldData:[],fieldsModel:{},currentFormName:"vide",vdbname:"mongodb",vtablename:"",formName:"",formAcc:[],vtype:"publique",currentFormId:"",showPopUp:!1,showTimePopUp:!1,FormValid:!0,showAdminMenu:!1,showUserMenu:!1,showParticules:!1,currentTitle:"",selectedDate:f["b"].formatDate(Date.now(),"DD/MM/YYYY"),selectedTime:f["b"].formatDate(Date.now(),"HH:mm"),sfVisiteurs:{arriveed:f["b"].formatDate(Date.now(),"DD/MM/YYYY"),arriveeh:f["b"].formatDate(Date.now(),"HH:mm"),sortieh:f["b"].formatDate(Date.now(),"HH:mm")}}},computed:c()(c()(c()(c()({},Object(l["d"])("adinfos",{isAdmin:function(e){return e.isAdmin},isSiteAdmin:function(e){return e.isSiteAdmin}})),Object(l["d"])("admin",{formData:function(e){return e.getform},fconfig:function(e){return e.config},savedForm:function(e){return e.savedform}})),Object(l["d"])("auth",{currentUserId:function(e){return e.user.sAMAccountName}})),{},{rformAcc:function(){return Object(this.formData[0]).hasOwnProperty("accusers")?this.formData[0].accusers:[]}}),methods:c()(c()({},Object(l["b"])("admin",["getForm","saveForm","updateForm","getAllForms","getConfig","writeConfig"])),{},{gotoAccueil:function(){var e=this;return i()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$router.push("/formulaires");case 1:case"end":return t.stop()}}),t)})))()},onSave:function(e,t,r,a,n,o){var s=this;return i()(regeneratorRuntime.mark((function i(){var c,l;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(console.log("onSave :",e,t),!Array.isArray(e)||0!==e.length){i.next=6;break}s.$q.notify({message:"Formulaire vide sauvegarde impossible",color:"negative"}),s.Alert_NewForm=!0,i.next=22;break;case 6:if(""!==t.trim()){i.next=10;break}s.$q.notify({message:"Formulaire vide sauvegarde impossible",color:"negative"}),i.next=22;break;case 10:if(!s.currentFormId||""==s.currentFormId.trim()){i.next=15;break}return i.next=13,s.updateForm({uid:s.currentFormId,nom:t,data:e,user:s.currentUserId,type:r,accusers:a,dbname:n,tablename:o});case 13:i.next=17;break;case 15:return i.next=17,s.saveForm({nom:t,data:e,user:s.currentUserId,type:r,accusers:a,dbname:n,tablename:o});case 17:return i.next=19,s.updateDisplayForm(s.savedForm.uid);case 19:s.formData.length>0&&s.formData[0].data.length>0&&(c=Object.assign([],s.formData),l=Object.assign([],c[0].data),s.setForm(l,{})),s.$q.notify({message:"Formulaire mémoriser avec succès",color:"positive"}),console.log("Donnees form :",s.fieldData);case 22:case"end":return i.stop()}}),i)})))()},showListForms:function(e){var t=this;this.$q.dialog({component:b["a"],dbname:"formulaires",dbtype:"cacemdb",twidth:"70%"}).onOk(function(){var e=i()(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("OK",r),t.currentFormId=r.uid,e.next=4,t.updateDisplayForm(t.currentFormId);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).onCancel((function(){console.log("Cancel")})).onDismiss((function(){console.log("Called on OK or Cancel")}))},showSettings:function(e){var t=this;this.$q.dialog({component:g["a"],config:this.fconfig,twidth:"70%"}).onOk(function(){var e=i()(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("OK settings",r),e.next=3,t.writeConfig(r);case 3:Object(r).hasOwnProperty("bgright")&&u["a"].setBrand("bgright",r.bgright);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).onCancel((function(){console.log("Cancel")})).onDismiss((function(){console.log("Called on OK or Cancel")}))},setForm:function(e,t){var r=this;return i()(regeneratorRuntime.mark((function a(){var n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=Object.keys(t),Object.entries(t),r.fieldData=n.reduce((function(e,r){return e[r]=t[r],e}),{}),o=Object.assign([],e),r.fields=Object.assign([],o),r.fieldsModel=Object.assign({},t);case 6:case"end":return a.stop()}}),a)})))()},onInput:function(e,t){console.log("".concat(t,": ")+JSON.stringify(e)),console.log("Field Datas :",this.fieldData)},getElement:function(e){for(var t=e.field_type.split("_"),r=0;r<t.length;r++)t[r]=t[r].charAt(0).toUpperCase()+t[r].slice(1);return t.join("")+"Element"},updateDisplayForm:function(e){var t=this;return i()(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.getForm(e);case 2:console.log("Donnée du formulaire chargée :",t.formData),Object(t.formData[0]).hasOwnProperty("titre")&&(t.currentTitle=t.formData[0].titre),t.formName=t.formData[0].nom,t.vtype=t.formData[0].type,t.vdbname=t.formData[0].dbname,t.vtablename=t.formData[0].tablename,t.currentFormId=t.formData[0].uid,t.formData[0].accusers,Object.assign(t.formAcc,t.formData[0].accusers),console.log("Données accès :",t.formAcc),t.formData&&t.formData.length>0&&t.formData[0].data&&t.formData[0].data.length>0&&(a=Object.assign([],t.formData),n=Object.assign([],a[0].data),t.setForm(n,{datearr:f["b"].formatDate(Date.now(),"DD/MM/YYYY")}));case 13:case"end":return r.stop()}}),r)})))()}}),beforeMount:function(){var e=this;return i()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("Parms ID :",e.$route.params.id),e.currentFormId=e.$route.params.id,""==e.currentFormId){t.next=7;break}return e.$q.loading.show({spinner:d["a"],spinnerColor:"red",message:"Chargement en cours..."}),t.next=6,e.updateDisplayForm(e.currentFormId);case 6:e.$q.loading.hide();case 7:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;return i()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.showParticules&&particlesJS("particles-js",{particles:{number:{value:80,density:{enable:!0,value_area:800}},color:{value:"#ffffff"},shape:{type:"circle",stroke:{width:0,color:"#000000"},polygon:{nb_sides:5},image:{src:"img/github.svg",width:100,height:100}},opacity:{value:.5,random:!1,anim:{enable:!1,speed:1,opacity_min:.1,sync:!1}},size:{value:3,random:!0,anim:{enable:!1,speed:20,size_min:.1,sync:!1}},line_linked:{enable:!0,distance:150,color:"#ffffff",opacity:.4,width:1},move:{enable:!0,speed:6,direction:"none",random:!1,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:600,rotateY:1200}}},interactivity:{detect_on:"canvas",events:{onhover:{enable:!1,mode:"grab"},onclick:{enable:!1,mode:"push"},resize:!0},modes:{grab:{distance:140,line_linked:{opacity:1}},bubble:{distance:400,size:40,duration:2,opacity:8,speed:3},repulse:{distance:200,duration:.4},push:{particles_nb:4},remove:{particles_nb:2}}},retina_detect:!1});case 1:case"end":return t.stop()}}),t)})))()},watch:{fields:{handler:function(e){console.log("FormData :",e)},deep:!0}}})),v=h,w=r("2877"),_=r("9989"),D=r("24e8"),F=r("f09f"),q=r("65c6"),y=r("6ac5"),k=r("9c40"),x=r("a370"),A=r("6b1d"),O=r("1c1c"),E=r("0170"),M=r("66e5"),C=r("4074"),I=r("0016"),R=r("7f67"),j=r("eebe"),P=r.n(j),S=Object(w["a"])(v,a,n,!1,null,null,null);t["default"]=S.exports;P()(S,"components",{QPage:_["a"],QDialog:D["a"],QCard:F["a"],QToolbar:q["a"],QToolbarTitle:y["a"],QBtn:k["a"],QCardSection:x["a"],QLinearProgress:A["a"],QList:O["a"],QItemLabel:E["a"],QItem:M["a"],QItemSection:C["a"],QIcon:I["a"]}),P()(S,"directives",{ClosePopup:R["a"]})}}]);