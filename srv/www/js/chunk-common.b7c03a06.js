(this["webpackJsonp"]=this["webpackJsonp"]||[]).push([[1],{0:function(e,t){},"033d":function(e,t,i){"use strict";i("1b32")},"0432":function(e,t,i){},"056e":function(e,t,i){e.exports=i.p+"img/cacemx200.62bd9991.png"},1471:function(e,t,i){},"1b32":function(e,t,i){},"21e8":function(e,t,i){},"3fd1":function(e,t,i){},4:function(e,t){},"439a":function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTkuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiCgkgdmlld0JveD0iMCAwIDM2NS40NjcgMzY1LjQ2NyIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMzY1LjQ2NyAzNjUuNDY3OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxwYXRoIHN0eWxlPSJmaWxsOiM1QzY2NzA7IiBkPSJNMzE0Ljg1LDEyMy42ODFMMTk4LjMxLDMyNS41MzRjLTIyLjAyNywzOC4xNTMtNzAuOTg4LDUxLjI3Mi0xMDkuMTQxLDI5LjI0NAoJYy0zOC4xNTItMjIuMDI3LTUxLjI3MS03MC45ODctMjkuMjQ0LTEwOS4xNEwxODIuOTM1LDMyLjU4YzE3Ljk3Mi0zMS4xMjgsNTcuOTE3LTQxLjgzMiw4OS4wNDYtMjMuODYKCWMzMS4xMjgsMTcuOTcyLDQxLjgzMiw1Ny45MTgsMjMuODYsODkuMDQ2TDE5Mi4xNDcsMjc3LjM3Yy0xNC4wMiwyNC4yODMtNDUuMTgxLDMyLjYzNC02OS40NjQsMTguNjE0cy0zMi42MzItNDUuMTgyLTE4LjYxMi02OS40NjUKCWw5Ny4yMjUtMTY4LjM5OGMyLjg0MS00LjkyMiw5LjEzNS02LjYwOCwxNC4wNTYtMy43NjdjNC45MjIsMi44NDEsNi42MDgsOS4xMzUsMy43NjcsMTQuMDU3bC05Ny4yMjUsMTY4LjM5OAoJYy04LjM0NiwxNC40NTYtMy4zNzYsMzMuMDA2LDExLjA3OSw0MS4zNTJjMTQuNDU2LDguMzQ2LDMzLjAwNiwzLjM3NSw0MS4zNTItMTEuMDgxTDI3OC4wMTksODcuNDc2CgljMTIuMjk4LTIxLjMwMSw0Ljk3NC00OC42MzUtMTYuMzI3LTYwLjkzNGMtMjEuMzAxLTEyLjI5OC00OC42MzYtNC45NzQtNjAuOTM0LDE2LjMyN0w3Ny43NDgsMjU1LjkyOAoJYy0xNi4zNTQsMjguMzI1LTYuNjE0LDY0LjY3MywyMS43MTEsODEuMDI3czY0LjY3NCw2LjYxNCw4MS4wMjctMjEuNzExbDExNi41NC0yMDEuODUyYzIuODQxLTQuOTIyLDkuMTM1LTYuNjA4LDE0LjA1Ni0zLjc2NwoJQzMxNi4wMDUsMTEyLjQ2NiwzMTcuNjkxLDExOC43NTksMzE0Ljg1LDEyMy42ODF6Ii8+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+Cjwvc3ZnPgo="},5:function(e,t){},"5f7b":function(e,t,i){"use strict";i("8748")},6879:function(e,t,i){"use strict";i("0432")},"6edf":function(e){e.exports=JSON.parse('["United States","Afghanistan","Albania","Algeria","Andorra","Angola","Anguilla","Antigua &amp; Barbuda","Argentina","Armenia","Aruba","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bermuda","Bhutan","Bolivia","Bosnia &amp; Herzegovina","Botswana","Brazil","British Virgin Islands","Brunei","Bulgaria","Burkina Faso","Burundi","Cambodia","Cameroon","Canada","Cape Verde","Cayman Islands","Chad","Chile","China","Colombia","Congo","Cook Islands","Costa Rica","Cote D Ivoire","Croatia","Cruise Ship","Cuba","Cyprus","Czech Republic","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Estonia","Ethiopia","Falkland Islands","Faroe Islands","Fiji","Finland","France","French Polynesia","French West Indies","Gabon","Gambia","Georgia","Germany","Ghana","Gibraltar","Greece","Greenland","Grenada","Guam","Guatemala","Guernsey","Guinea","Guinea Bissau","Guyana","Haiti","Honduras","Hong Kong","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Isle of Man","Israel","Italy","Jamaica","Japan","Jersey","Jordan","Kazakhstan","Kenya","Kuwait","Kyrgyz Republic","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Macau","Macedonia","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Mauritania","Mauritius","Mexico","Moldova","Monaco","Mongolia","Montenegro","Montserrat","Morocco","Mozambique","Namibia","Nepal","Netherlands","Netherlands Antilles","New Caledonia","New Zealand","Nicaragua","Niger","Nigeria","Norway","Oman","Pakistan","Palestine","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Puerto Rico","Qatar","Reunion","Romania","Russia","Rwanda","Saint Pierre &amp; Miquelon","Samoa","San Marino","Satellite","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","South Africa","South Korea","Spain","Sri Lanka","St Kitts &amp; Nevis","St Lucia","St Vincent","St. Lucia","Sudan","Suriname","Swaziland","Sweden","Switzerland","Syria","Taiwan","Tajikistan","Tanzania","Thailand","Timor L\'Este","Togo","Tonga","Trinidad &amp; Tobago","Tunisia","Turkey","Turkmenistan","Turks &amp; Caicos","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","United States Minor Outlying Islands","Uruguay","Uzbekistan","Venezuela","Vietnam","Virgin Islands (US)","Yemen","Zambia","Zimbabwe"]')},"70e7":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-dialog",{ref:"timedialog",staticClass:"q-pa-none",on:{hide:e.onDialogHide}},[i("q-card",{staticClass:"q-dialog-plugin q-pa-none",style:"width:"+e.twidth+"; max-width:90%"},[i("q-card-section",{staticClass:"q-pa-none"},[i("q-bar",{staticClass:"bg-primary text-white"},[i("q-space"),i("q-btn",{attrs:{dense:"",flat:"",icon:"close"},on:{click:function(t){return e.hide()}}})],1)],1),i("q-card-section",{staticClass:"q-pa-none"},[i("div",{staticClass:"q-px-lg q-pb-md"},[i("q-timeline",{attrs:{layout:e.layout,color:"secondary"}},[i("q-timeline-entry",{attrs:{heading:""}},[e._v("\n          Visiteurs du jour\n          ")]),e._l(e.visiteursJour,(function(t,n){return i("q-timeline-entry",{key:"visiteur_jour_"+n,attrs:{title:t.prenom+" "+t.nom+" "+("PARKING"==t.typeacces?"- entrée Parking":""),subtitle:""+t.heurevisite,side:"left"}},[i("div",[i("span",{staticClass:"text-caption text-bold"},[e._v("Agent :")]),e._v(e._s(t.contactinterne)+"\n          ")]),i("div",[i("span",{staticClass:"text-caption text-bold"},[e._v("Motif :")]),e._v(e._s(t.motif)+"\n          ")])])}))],2)],1)])],1)],1)},o=[],a=i("c973"),r=i.n(a),l=(i("96cf"),i("4e82"),i("a9e3"),i("ac1f"),i("1276"),i("9e62f"),i("bc78"),i("cf57"),i("163c"),i("bd4c")),s=(i("b06b"),i("ed09")),c=Object(s["d"])({name:"DiagTimeLineJour",components:{},data:function(){"Dimanche_Lundi_Mardi_Mercredi_Jeudi_Vendredi_Samedi".split("_"),"Dim_Lun_Mar_Mer_Jeu_Ven_Sam".split("_"),"Janvier_Février_Mars_Avril_Mai_Juin_Juillet_Aôut_Septembre_Octobre_Novembre_Décembre".split("_"),"Jan_Fév_Mar_Avr_Mai_Jun_Jui_Aou_Sep_Oct_Nov_Déc".split("_");return{data:[],columns:[],selected:[],filter:"",datedujour:l["b"].formatDate(Date.now(),"DD/MM/YYYY")}},props:{visiteursJour:{type:Array,required:!1},twidth:{type:String,default:"90%",required:!1}},computed:{layout:function(){return this.$q.screen.lt.sm?"dense":this.$q.screen.lt.md?"comfortable":"loose"}},methods:{onRowClick:function(e,t){console.log("Row :",t),this.$emit("ok",t),this.hide()},show:function(){console.log("Les visiteurs du jour :",this.visiteursJour),this.$refs.timedialog.show()},hide:function(){this.$refs.timedialog.hide()},onDialogHide:function(){this.$emit("hide")},onOKClick:function(){this.$emit("ok"),this.hide()},onCancelClick:function(){this.hide()}},mounted:function(){return r()(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("TIMELINE");case 1:case"end":return e.stop()}}),e)})))()}}),d=c,u=i("2877"),m=i("24e8"),p=i("f09f"),f=i("a370"),_=i("d8472"),b=i("2c91"),h=i("9c40"),g=i("05eb"),v=i("74af"),q=i("eebe"),y=i.n(q),w=Object(u["a"])(d,n,o,!1,null,null,null);t["a"]=w.exports;y()(w,"components",{QDialog:m["a"],QCard:p["a"],QCardSection:f["a"],QBar:_["a"],QSpace:b["a"],QBtn:h["a"],QTimeline:g["a"],QTimelineEntry:v["a"]})},7416:function(e,t,i){"use strict";i("3fd1")},7596:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"q-gutter-md row"},[i("q-form",{ref:"myForm",style:e.$q.platform.is.mobile?{width:"95%"}:{width:"100%"},on:{submit:e.onSubmit}},[i("div",{staticClass:"q-gutter-none row"},e._l(e.visibleFields,(function(t,n){return i("div",{key:n,class:e.$q.platform.is.mobile?"col-md-12 ":t.span?"col-"+t.span:"col-auto"},[e.setShow[t.id]&&e.visibleFields.length>0?i(e.getElement(t),{ref:t.cid,refInFor:!0,tag:"component",attrs:{label:t.label,labelToolTip:t.labelToolTip,required:t.required,field_options:t.field_options,id:t.id,cid:t.cid,mask:t.mask,debounce:"500"},on:{input:e.onInput},model:{value:e.fieldData[t.id],callback:function(i){e.$set(e.fieldData,t.id,i)},expression:"fieldData[field.id]"}}):e._e()],1)})),0),i("div",{staticClass:"row q-gutter-xl item-center justify-center q-pt-md"},[e.showSave?i("q-btn",{staticClass:"q-pa-sm",attrs:{icon:"save",color:"primary","no-caps":"",label:"Enregistrer",type:"submit"}},[i("q-tooltip",{attrs:{"content-class":"bg-amber text-center text-h6 text-dark"}},[e._v("\n          Enregistrer\n        ")])],1):e._e(),e.showBuild?i("q-btn",{attrs:{color:"primary",icon:"edit"},on:{click:e.editForm}}):e._e()],1)])],1)},o=[],a=i("c973"),r=i.n(a),l=i("ded3"),s=i.n(l),c=(i("96cf"),i("ac1f"),i("1276"),i("4de4"),i("d3b7"),i("cca6"),i("b64b"),i("4fadc"),i("13d5"),i("4160"),i("159b"),i("d81d"),i("e9c4"),i("fb6a"),i("a15b"),i("2f62")),d=i("ed09"),u=i("bd4c"),m=i("cf57"),p=i("9c40"),f=i("05c0"),_=(i("d882"),i("c18b")),b=Object(d["d"])({name:"FVvForm",components:{QBtn:p["a"],QTooltip:f["a"],VvFormBuilder:_["y"],RvFormBuilder:_["s"],QFormBuilder:_["q"],TextElement:_["w"],CacemusersElement:_["b"],CommunesElement:_["d"],ParagraphElement:_["m"],CheckboxesElement:_["c"],RadioElement:_["r"],DateElement:_["e"],TimeElement:_["x"],DropdownElement:_["f"],EmailElement:_["g"],NameElement:_["k"],SimpleNameElement:_["u"],AddressElement:_["a"],PhoneElement:_["p"],FileElement:_["h"],PaymentElement:_["o"],TermsElement:_["v"],PageBreakElement:_["l"],ImageElement:_["j"],SectionBreakElement:_["t"],PassagersElement:_["n"],HiddenElement:_["i"]},props:{idForm:{type:String,required:!1},fieldsData:{type:Array,required:!1},title:{type:String,required:!1},dbname:{type:String,required:!1},tablename:{type:String,required:!1},fieldsmodel:{type:Object,required:!1},showSave:{required:!1,default:!1,type:Boolean},showBuild:{required:!1,default:!1,type:Boolean}},data:function(){"Dimanche_Lundi_Mardi_Mercredi_Jeudi_Vendredi_Samedi".split("_"),"Dim_Lun_Mar_Mer_Jeu_Ven_Sam".split("_"),"Janvier_Février_Mars_Avril_Mai_Juin_Juillet_Aôut_Septembre_Octobre_Novembre_Décembre".split("_"),"Jan_Fév_Mar_Avr_Mai_Jun_Jui_Aou_Sep_Oct_Nov_Déc".split("_");return{fields:[],setShow:[],fieldData:[],FormValid:!0,selectedDate:u["b"].formatDate(Date.now(),"DD/MM/YYYY"),selectedTime:u["b"].formatDate(Date.now(),"HH:mm")}},computed:s()(s()(s()({},Object(c["d"])("adinfos",{isAdmin:function(e){return e.isAdmin},isSiteAdmin:function(e){return e.isSiteAdmin}})),Object(c["d"])("admin",{formData:function(e){return e.getform},fconfig:function(e){return e.config}})),{},{visibleFields:function(){return this.fields.filter((function(e){return"hidden"!=e.field_type}))}}),methods:s()(s()({},Object(c["b"])("admin",["getAllVisiteurs","addVisiteur","getForm","saveForm","getConfig","writeConfig"])),{},{onSubmit:function(e){var t=this;console.log("Form submit :",this.$refs.myForm),this.$refs.myForm.validate().then((function(e){console.log("Valid :",e),console.log("Form :",t.fieldData);var i=Object.assign({},t.fieldsmodel,t.fieldData);console.log("Form result :",i),t.$emit("onFormAdded",i)}))["catch"]((function(e){t.$q.notify({message:"Formulaire incomplet !!!",color:"negative"})}))},editForm:function(e,t){this.$router.push("/formbuilder/".concat(this.idForm))},setForm:function(e,t){var i=this;return r()(regeneratorRuntime.mark((function n(){var o,a,r,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:o=Object.keys(t),Object.entries(t),i.fieldData=o.reduce((function(e,i){return e[i]=t[i],e}),{}),console.log("Field Datas :",i.fieldData),a=Object.assign([],e),i.fields=Object.assign([],a),console.log("Field form :",i.fields),r=i.fields.filter((function(e){return e.innerValue&&""!=e.innerValue})),console.log("Field form default values :",r),r&&Array.isArray(r)&&r.length>0&&(i.fieldsmodel={},r.forEach((function(e,t){i.fieldsmodel["".concat(e.id)]=e.innerValue}))),console.log("Field model :",i.fieldsmodel),l=i.fields.map((function(e){return"".concat(e.id)})),i.setShow=l.reduce((function(e,t){return e[t]=!0,e}),{}),console.log("Show fields :",i.setShow),console.log("Show fields model  :",i.fieldsmodel),i.initConds(),i.fields.forEach((function(e,t){Object(e).hasOwnProperty("show_options")&&Array.isArray(e.show_options)&&e.show_options.length>0&&e.show_options.forEach((function(t){console.log("Champ cible:",e.id);var n=t.id_field;console.log("Champ source :",n);var o=t.valcalc;console.log("Champ source valeur de comparaison :",o),Object(i.fieldsmodel).hasOwnProperty("".concat(n))&&(console.log(" Champ source réel :",i.fieldsmodel["".concat(n)]),i.setShow["".concat(e.id)]=i.fieldsmodel["".concat(n)]==o)}))})),console.log("SET SHOW :",i.setShow);case 18:case"end":return n.stop()}}),n)})))()},initConds:function(){var e=this;this.fields.forEach((function(t,i){Object(t).hasOwnProperty("show_options")&&Array.isArray(t.show_options)&&t.show_options.length>0&&(e.setShow["".concat(t.id)]=!1)}))},onInput:function(e,t){var i=this;console.log("".concat(t,": ")+JSON.stringify(e)),console.log("I SHOW FIELDS :",this.setShow),console.log("I SHOW FIELDS DATA :",this.fieldData),console.log("I SHOW FIELDS :",this.fields);var n=Object.assign([],this.fields),o=Object.assign([],this.fieldData);n.filter((function(e){return"passagers"===e.field_type})).forEach((function(e){o["".concat(e.id)]=Object.assign([],[{nom:null,prenom:null,societe:null}])})),n.forEach((function(e,n){Object(e).hasOwnProperty("id")&&Object(e).hasOwnProperty("show_options")&&Array.isArray(e.show_options)&&e.show_options.length>0&&e.id!=t&&e.show_options.forEach((function(t){console.log("Champ cible:",e.id);var n=t.id_field;console.log("Champ source :",n);var a=t.valcalc;console.log("Champ source valeur de comparaison :",a),Object(o).hasOwnProperty("".concat(n))&&(console.log(" Champ source réel :",o["".concat(n)]),i.setShow["".concat(e.id)]=o["".concat(n)]==a)}))})),console.log("SET SHOW :",this.setShow)},getElement:function(e){if("hidden"!=e.field_type){for(var t=e.field_type.split("_"),i=0;i<t.length;i++)t[i]=t[i].charAt(0).toUpperCase()+t[i].slice(1);return t.join("")+"Element"}return null},updateDisplayForm:function(e){var t=this;return r()(regeneratorRuntime.mark((function i(){var n,o,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!e){i.next=9;break}return i.next=3,t.getForm(e);case 3:console.log("Donnée du formulaire chargée :",t.formData),t.$emit("formLoaded",t.formData),Object(t.formData[0]).hasOwnProperty("titre")&&(t.currentTitle=t.formData[0].titre),t.formData.length>0&&Object(t.formData[0]).hasOwnProperty("data")&&t.formData[0].data.length>0&&(t.fields=Object.assign([],t.formData[0].data),n=Object.assign([],t.formData),o=Object.assign([],n[0].data),t.fieldsmodel?t.setForm(o,t.fieldsmodel):t.setForm(o,t.fieldsmodel?t.fieldsmodel:{})),i.next=12;break;case 9:t.fields=Object.assign([],t.fieldsData),a=Object.assign([],t.fieldsData),t.fieldsmodel?t.setForm(a,t.fieldsmodel):t.setForm(a,t.fieldsmodel?t.fieldsmodel:{});case 12:case"end":return i.stop()}}),i)})))()}}),beforeMount:function(){var e=this;return r()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$q.loading.show({spinner:m["a"],spinnerColor:"red",message:"Chargement en cours..."}),console.log("Form id :",e.idForm),t.next=4,e.updateDisplayForm(e.idForm);case 4:e.$q.loading.hide();case 5:case"end":return t.stop()}}),t)})))()},watch:{fields:{handler:function(e){console.log("FormData :",e)}}}}),h=b,g=i("2877"),v=i("0378"),q=i("eebe"),y=i.n(q),w=Object(g["a"])(h,n,o,!1,null,null,null);t["a"]=w.exports;y()(w,"components",{QForm:v["a"],QBtn:p["a"],QTooltip:f["a"]})},"7ae3":function(e){e.exports=JSON.parse('[{"datasetid":"fr-esr-referentiel-geographique","recordid":"e501c459d5c3d51d4c138eb38eba3c4aacc187de","fields":{"com_code2":"97214","reg_id_old":"R02","com_code1":"97214","au_code":"9B5","uucr_id":"UU9B203","aca_nom":"Martinique","com_nom_maj_court":"LE LORRAIN","uu_id_99":"UU9B205","regrgp_nom":"DROM-COM","dep_code":"972","uu_code":"9B203","au_id":"AU9B5","uu_id_10":"UU9B204","com_code":"97214","aca_code":"31","reg_code_old":"02","dep_nom":"Martinique","aca_id":"A31","com_nom_maj":"LE LORRAIN","com_nom":"Le Lorrain","fr_id":"FR11","reg_nom_old":"Martinique","auc_nom":"Le Lorrain","com_id":"C97214","fe_id":"FE1","ze_id":"ZE0206","uucr_nom":"Le Lorrain","fd_id":"FD112","reg_code":"02","dep_nom_num":"Martinique (972)","dep_num_nom":"972 - Martinique","reg_nom":"Martinique","reg_id":"R02","auc_id":"AU9B5","geolocalisation":[14.801120487,-61.0765081422],"dep_id":"D972","uu_id":"UU9B203"},"geometry":{"type":"Point","coordinates":[-61.0765081422,14.801120487]},"record_timestamp":"2020-11-23T09:58:15.677-04:00"},{"datasetid":"fr-esr-referentiel-geographique","recordid":"c6177c8fb16351e3213cbcc1bf04d7ac68148591","fields":{"com_code2":"97215","reg_id_old":"R02","com_code1":"97215","uucr_id":"CR97215","aca_nom":"Martinique","com_nom_maj_court":"MACOUBA","uu_id_99":"SO","regrgp_nom":"DROM-COM","dep_code":"972","au_id":"AU000","uu_id_10":"SO","com_code":"97215","aca_code":"31","reg_code_old":"02","dep_nom":"Martinique","aca_id":"A31","com_nom_maj":"MACOUBA","com_nom":"Macouba","fr_id":"FR11","reg_nom_old":"Martinique","auc_nom":"Macouba","com_id":"C97215","fe_id":"FE1","ze_id":"ZE0206","uucr_nom":"Macouba","fd_id":"FD112","reg_code":"02","dep_nom_num":"Martinique (972)","dep_num_nom":"972 - Martinique","reg_nom":"Martinique","reg_id":"R02","auc_id":"C97215","geolocalisation":[14.8550940199,-61.151590278],"dep_id":"D972","uu_id":"SO"},"geometry":{"type":"Point","coordinates":[-61.151590278,14.8550940199]},"record_timestamp":"2020-11-23T09:58:15.677-04:00"},{"datasetid":"fr-esr-referentiel-geographique","recordid":"6df1c631d779f8d24814a10b202fe77f49f9a953","fields":{"com_code2":"97218","reg_id_old":"R02","com_code1":"97218","uucr_id":"UU9B201","aca_nom":"Martinique","com_nom_maj_court":"LE MORNE ROUGE","uu_id_99":"UU9B201","regrgp_nom":"DROM-COM","dep_code":"972","uu_code":"9B201","au_id":"AU998","uu_id_10":"UU9B201","com_code":"97218","aca_code":"31","reg_code_old":"02","dep_nom":"Martinique","aca_id":"A31","com_nom_maj":"LE MORNE-ROUGE","com_nom":"Le Morne-Rouge","fr_id":"FR11","reg_nom_old":"Martinique","auc_nom":"Le Morne-Rouge","com_id":"C97218","fe_id":"FE1","ze_id":"ZE0205","uucr_nom":"Le Morne-Rouge","fd_id":"FD112","reg_code":"02","dep_nom_num":"Martinique (972)","dep_num_nom":"972 - Martinique","reg_nom":"Martinique","reg_id":"R02","auc_id":"C97218","geolocalisation":[14.7694146135,-61.1206407775],"dep_id":"D972","uu_id":"UU9B201"},"geometry":{"type":"Point","coordinates":[-61.1206407775,14.7694146135]},"record_timestamp":"2020-11-23T09:58:15.677-04:00"},{"datasetid":"fr-esr-referentiel-geographique","recordid":"5a08c016d0411799e95c529cc4354065fd01e1cf","fields":{"com_code2":"97219","reg_id_old":"R02","com_code1":"97219","uucr_id":"CR97219","aca_nom":"Martinique","com_nom_maj_court":"LE PRECHEUR","uu_id_99":"SO","regrgp_nom":"DROM-COM","dep_code":"972","au_id":"AU000","uu_id_10":"SO","com_code":"97219","aca_code":"31","reg_code_old":"02","dep_nom":"Martinique","aca_id":"A31","com_nom_maj":"LE PRECHEUR","com_nom":"Le Prêcheur","fr_id":"FR11","reg_nom_old":"Martinique","auc_nom":"Le Prêcheur","com_id":"C97219","fe_id":"FE1","ze_id":"ZE0205","uucr_nom":"Le Prêcheur","fd_id":"FD112","reg_code":"02","dep_nom_num":"Martinique (972)","dep_num_nom":"972 - Martinique","reg_nom":"Martinique","reg_id":"R02","auc_id":"C97219","geolocalisation":[14.8208189879,-61.2034771768],"dep_id":"D972","uu_id":"SO"},"geometry":{"type":"Point","coordinates":[-61.2034771768,14.8208189879]},"record_timestamp":"2020-11-23T09:58:15.677-04:00"},{"datasetid":"fr-esr-referentiel-geographique","recordid":"c8429d60f5256dd14cca761a5142e80f77228242","fields":{"com_code2":"97220","reg_id_old":"R02","com_code1":"97220","au_code":"9B1","uucr_id":"UU9B602","aca_nom":"Martinique","com_nom_maj_court":"RIVIERE PILOTE","uu_id_99":"UU9B302","regrgp_nom":"DROM-COM","dep_code":"972","uu_code":"9B602","au_id":"AU9B1","uu_id_10":"UU9B602","com_code":"97220","aca_code":"31","reg_code_old":"02","dep_nom":"Martinique","aca_id":"A31","com_nom_maj":"RIVIERE-PILOTE","com_nom":"Rivière-Pilote","fr_id":"FR11","reg_nom_old":"Martinique","auc_nom":"Le Robert","com_id":"C97220","fe_id":"FE1","ze_id":"ZE0203","uucr_nom":"Le Robert","fd_id":"FD112","reg_code":"02","dep_nom_num":"Martinique (972)","dep_num_nom":"972 - Martinique","reg_nom":"Martinique","reg_id":"R02","auc_id":"AU9B1","geolocalisation":[14.5088319879,-60.8978478666],"dep_id":"D972","uu_id":"UU9B602"},"geometry":{"type":"Point","coordinates":[-60.8978478666,14.5088319879]},"record_timestamp":"2020-11-23T09:58:15.677-04:00"},{"datasetid":"fr-esr-referentiel-geographique","recordid":"b4764a1c1beab1b957b32c4615170e4f5229ba38","fields":{"com_code2":"97233","reg_id_old":"R02","com_code1":"97233","uucr_id":"CR97233","aca_nom":"Martinique","com_nom_maj_court":"LE MORNE VERT","uu_id_99":"SO","regrgp_nom":"DROM-COM","dep_code":"972","au_id":"AU998","uu_id_10":"SO","com_code":"97233","aca_code":"31","reg_code_old":"02","dep_nom":"Martinique","aca_id":"A31","com_nom_maj":"LE MORNE-VERT","com_nom":"Le Morne-Vert","fr_id":"FR11","reg_nom_old":"Martinique","auc_nom":"Le Morne-Vert","com_id":"C97233","fe_id":"FE1","ze_id":"ZE0205","uucr_nom":"Le Morne-Vert","fd_id":"FD112","reg_code":"02","dep_nom_num":"Martinique (972)","dep_num_nom":"972 - Martinique","reg_nom":"Martinique","reg_id":"R02","auc_id":"C97233","geolocalisation":[14.7038196531,-61.1353176501],"dep_id":"D972","uu_id":"SO"},"geometry":{"type":"Point","coordinates":[-61.1353176501,14.7038196531]},"record_timestamp":"2020-11-23T09:58:15.677-04:00"},{"datasetid":"fr-esr-referentiel-geographique","recordid":"3530e3a7727811a43fc6ee5cbfe63ffabd1bc6a1","fields":{"com_code2":"97234","reg_id_old":"R02","com_code1":"97234","uucr_id":"CR97234","aca_nom":"Martinique","com_nom_maj_court":"BELLEFONTAINE","uu_id_99":"SO","regrgp_nom":"DROM-COM","dep_code":"972","au_id":"AU997","uu_id_10":"SO","com_code":"97234","aca_code":"31","reg_code_old":"02","dep_nom":"Martinique","aca_id":"A31","com_nom_maj":"BELLEFONTAINE","com_nom":"Bellefontaine","fr_id":"FR11","reg_nom_old":"Martinique","auc_nom":"Bellefontaine","com_id":"C97234","fe_id":"FE1","ze_id":"ZE0205","uucr_nom":"Bellefontaine","fd_id":"FD112","reg_code":"02","dep_nom_num":"Martinique (972)","dep_num_nom":"972 - Martinique","reg_nom":"Martinique","reg_id":"R02","auc_id":"C97234","geolocalisation":[14.6763386824,-61.1469824012],"dep_id":"D972","uu_id":"SO"},"geometry":{"type":"Point","coordinates":[-61.1469824012,14.6763386824]},"record_timestamp":"2020-11-23T09:58:15.677-04:00"},{"datasetid":"fr-esr-referentiel-geographique","recordid":"d7c06689bc880d94d2a5214b55ceebf0edfed269","fields":{"com_code2":"97202","reg_id_old":"R02","com_code1":"97202","uucr_id":"CR97202","aca_nom":"Martinique","com_nom_maj_court":"LES ANSES D ARLET","uu_id_99":"SO","regrgp_nom":"DROM-COM","dep_code":"972","au_id":"AU997","uu_id_10":"SO","com_code":"97202","aca_code":"31","reg_code_old":"02","dep_nom":"Martinique","aca_id":"A31","com_nom_maj":"LES ANSES-D\'ARLET","com_nom":"Les Anses-d\'Arlet","fr_id":"FR11","reg_nom_old":"Martinique","auc_nom":"Les Anses-d\'Arlet","com_id":"C97202","fe_id":"FE1","ze_id":"ZE0202","uucr_nom":"Les Anses-d\'Arlet","fd_id":"FD112","reg_code":"02","dep_nom_num":"Martinique (972)","dep_num_nom":"972 - Martinique","reg_nom":"Martinique","reg_id":"R02","auc_id":"C97202","geolocalisation":[14.4993591112,-61.0720993976],"dep_id":"D972","uu_id":"SO"},"geometry":{"type":"Point","coordinates":[-61.0720993976,14.4993591112]},"record_timestamp":"2020-11-23T09:58:15.677-04:00"},{"datasetid":"fr-esr-referentiel-geographique","recordid":"852bd70d92522535ae9108dc04f09871b493ceb1","fields":{"com_code2":"97203","reg_id_old":"R02","com_code1":"97203","uucr_id":"UU9B101","aca_nom":"Martinique","com_nom_maj_court":"BASSE POINTE","uu_id_99":"UU9B102","regrgp_nom":"DROM-COM","dep_code":"972","uu_code":"9B101","au_id":"AU000","uu_id_10":"UU9B102","com_code":"97203","aca_code":"31","reg_code_old":"02","dep_nom":"Martinique","aca_id":"A31","com_nom_maj":"BASSE-POINTE","com_nom":"Basse-Pointe","fr_id":"FR11","reg_nom_old":"Martinique","auc_nom":"Basse-Pointe","com_id":"C97203","fe_id":"FE1","ze_id":"ZE0206","uucr_nom":"Basse-Pointe","fd_id":"FD112","reg_code":"02","dep_nom_num":"Martinique (972)","dep_num_nom":"972 - Martinique","reg_nom":"Martinique","reg_id":"R02","auc_id":"C97203","geolocalisation":[14.8414694685,-61.1232211344],"dep_id":"D972","uu_id":"UU9B101"},"geometry":{"type":"Point","coordinates":[-61.1232211344,14.8414694685]},"record_timestamp":"2020-11-23T09:58:15.677-04:00"},{"datasetid":"fr-esr-referentiel-geographique","recordid":"6e49bc061429901c111a510c513c36f605c4a065","fields":{"com_code2":"97208","reg_id_old":"R02","com_code1":"97208","uucr_id":"CR97208","aca_nom":"Martinique","com_nom_maj_court":"FONDS ST DENIS","uu_id_99":"SO","regrgp_nom":"DROM-COM","dep_code":"972","au_id":"AU998","uu_id_10":"SO","com_code":"97208","aca_code":"31","reg_code_old":"02","dep_nom":"Martinique","aca_id":"A31","com_nom_maj":"FONDS-SAINT-DENIS","com_nom":"Fonds-Saint-Denis","fr_id":"FR11","reg_nom_old":"Martinique","auc_nom":"Fonds-Saint-Denis","com_id":"C97208","fe_id":"FE1","ze_id":"ZE0205","uucr_nom":"Fonds-Saint-Denis","fd_id":"FD112","reg_code":"02","dep_nom_num":"Martinique (972)","dep_num_nom":"972 - Martinique","reg_nom":"Martinique","reg_id":"R02","auc_id":"C97208","geolocalisation":[14.7260291636,-61.1150746091],"dep_id":"D972","uu_id":"SO"},"geometry":{"type":"Point","coordinates":[-61.1150746091,14.7260291636]},"record_timestamp":"2020-11-23T09:58:15.677-04:00"},{"datasetid":"fr-esr-referentiel-geographique","recordid":"65e1174bfbd7f8b389d124cf4276ebbba1cc4e6a","fields":{"com_code2":"97209","reg_id_old":"R02","com_code1":"97209","au_code":"9B2","uucr_id":"UU9B601","aca_nom":"Martinique","com_nom_maj_court":"FORT DE FRANCE","uu_id_99":"UU9B601","regrgp_nom":"DROM-COM","dep_code":"972","uu_code":"9B601","au_id":"AU9B2","uu_id_10":"UU9B601","com_code":"97209","aca_code":"31","reg_code_old":"02","dep_nom":"Martinique","aca_id":"A31","com_nom_maj":"FORT-DE-FRANCE","com_nom":"Fort-de-France","fr_id":"FR11","reg_nom_old":"Martinique","auc_nom":"Fort-de-France","com_id":"C97209","fe_id":"FE1","ze_id":"ZE0201","uucr_nom":"Fort-de-France","fd_id":"FD112","reg_code":"02","dep_nom_num":"Martinique (972)","dep_num_nom":"972 - Martinique","reg_nom":"Martinique","reg_id":"R02","auc_id":"AU9B2","geolocalisation":[14.6411114389,-61.0691889244],"dep_id":"D972","uu_id":"UU9B601"},"geometry":{"type":"Point","coordinates":[-61.0691889244,14.6411114389]},"record_timestamp":"2020-11-23T09:58:15.677-04:00"},{"datasetid":"fr-esr-referentiel-geographique","recordid":"a45be68968bf6b26b69b33fda61e0ca098800d9e","fields":{"com_code2":"97211","reg_id_old":"R02","com_code1":"97211","uucr_id":"CR97211","aca_nom":"Martinique","com_nom_maj_court":"GRAND RIVIERE","uu_id_99":"SO","regrgp_nom":"DROM-COM","dep_code":"972","au_id":"AU000","uu_id_10":"SO","com_code":"97211","aca_code":"31","reg_code_old":"02","dep_nom":"Martinique","aca_id":"A31","com_nom_maj":"GRAND\'RIVIERE","com_nom":"Grand\'Rivière","fr_id":"FR11","reg_nom_old":"Martinique","auc_nom":"Grand\'Rivière","com_id":"C97211","fe_id":"FE1","ze_id":"ZE0206","uucr_nom":"Grand\'Rivière","fd_id":"FD112","reg_code":"02","dep_nom_num":"Martinique (972)","dep_num_nom":"972 - Martinique","reg_nom":"Martinique","reg_id":"R02","auc_id":"C97211","geolocalisation":[14.8500162757,-61.1794005082],"dep_id":"D972","uu_id":"SO"},"geometry":{"type":"Point","coordinates":[-61.1794005082,14.8500162757]},"record_timestamp":"2020-11-23T09:58:15.677-04:00"},{"datasetid":"fr-esr-referentiel-geographique","recordid":"a33455d7007205e20361505b8f17298932273ca9","fields":{"com_code2":"97225","reg_id_old":"R02","com_code1":"97225","au_code":"9B6","uucr_id":"UU9B103","aca_nom":"Martinique","com_nom_maj_court":"ST PIERRE","uu_id_99":"UU9B103","regrgp_nom":"DROM-COM","dep_code":"972","uu_code":"9B103","au_id":"AU9B6","uu_id_10":"UU9B103","com_code":"97225","aca_code":"31","reg_code_old":"02","dep_nom":"Martinique","aca_id":"A31","com_nom_maj":"SAINT-PIERRE","com_nom":"Saint-Pierre","fr_id":"FR11","reg_nom_old":"Martinique","auc_nom":"Saint-Pierre","com_id":"C97225","fe_id":"FE1","ze_id":"ZE0205","uucr_nom":"Saint-Pierre","fd_id":"FD112","reg_code":"02","dep_nom_num":"Martinique (972)","dep_num_nom":"972 - Martinique","reg_nom":"Martinique","reg_id":"R02","auc_id":"AU9B6","geolocalisation":[14.7748596787,-61.1724905513],"dep_id":"D972","uu_id":"UU9B103"},"geometry":{"type":"Point","coordinates":[-61.1724905513,14.7748596787]},"record_timestamp":"2020-11-23T09:58:15.677-04:00"},{"datasetid":"fr-esr-referentiel-geographique","recordid":"0878e2de30b38041c845e619866c9c52ee61f5de","fields":{"com_code2":"97226","reg_id_old":"R02","com_code1":"97226","au_code":"9B1","uucr_id":"UU9B602","aca_nom":"Martinique","com_nom_maj_court":"STE ANNE","uu_id_99":"SO","regrgp_nom":"DROM-COM","dep_code":"972","uu_code":"9B602","au_id":"AU9B1","uu_id_10":"UU9B602","com_code":"97226","aca_code":"31","reg_code_old":"02","dep_nom":"Martinique","aca_id":"A31","com_nom_maj":"SAINTE-ANNE","com_nom":"Sainte-Anne","fr_id":"FR11","reg_nom_old":"Martinique","auc_nom":"Le Robert","com_id":"C97226","fe_id":"FE1","ze_id":"ZE0203","uucr_nom":"Le Robert","fd_id":"FD112","reg_code":"02","dep_nom_num":"Martinique (972)","dep_num_nom":"972 - Martinique","reg_nom":"Martinique","reg_id":"R02","auc_id":"AU9B1","geolocalisation":[14.4366363772,-60.8550865047],"dep_id":"D972","uu_id":"UU9B602"},"geometry":{"type":"Point","coordinates":[-60.8550865047,14.4366363772]},"record_timestamp":"2020-11-23T09:58:15.677-04:00"},{"datasetid":"fr-esr-referentiel-geographique","recordid":"8268efcfc11cb6ba4cef5948c7e75a4666cb5811","fields":{"com_code2":"97201","reg_id_old":"R02","com_code1":"97201","uucr_id":"CR97201","aca_nom":"Martinique","com_nom_maj_court":"L AJOUPA BOUILLON","uu_id_99":"SO","regrgp_nom":"DROM-COM","dep_code":"972","au_id":"AU000","uu_id_10":"SO","com_code":"97201","aca_code":"31","reg_code_old":"02","dep_nom":"Martinique","aca_id":"A31","com_nom_maj":"L\'AJOUPA-BOUILLON","com_nom":"L\'Ajoupa-Bouillon","fr_id":"FR11","reg_nom_old":"Martinique","auc_nom":"L\'Ajoupa-Bouillon","com_id":"C97201","fe_id":"FE1","ze_id":"ZE0206","uucr_nom":"L\'Ajoupa-Bouillon","fd_id":"FD112","reg_code":"02","dep_nom_num":"Martinique (972)","dep_num_nom":"972 - Martinique","reg_nom":"Martinique","reg_id":"R02","auc_id":"C97201","geolocalisation":[14.8142832959,-61.1230843265],"dep_id":"D972","uu_id":"SO"},"geometry":{"type":"Point","coordinates":[-61.1230843265,14.8142832959]},"record_timestamp":"2020-11-23T09:58:15.677-04:00"},{"datasetid":"fr-esr-referentiel-geographique","recordid":"30f30f39f4371d0939a5a422648d86625c35e10a","fields":{"com_code2":"97204","reg_id_old":"R02","com_code1":"97204","uucr_id":"UU9B102","aca_nom":"Martinique","com_nom_maj_court":"LE CARBET","uu_id_99":"UU9B101","regrgp_nom":"DROM-COM","dep_code":"972","uu_code":"9B102","au_id":"AU998","uu_id_10":"UU9B101","com_code":"97204","aca_code":"31","reg_code_old":"02","dep_nom":"Martinique","aca_id":"A31","com_nom_maj":"LE CARBET","com_nom":"Le Carbet","fr_id":"FR11","reg_nom_old":"Martinique","auc_nom":"Le Carbet","com_id":"C97204","fe_id":"FE1","ze_id":"ZE0205","uucr_nom":"Le Carbet","fd_id":"FD112","reg_code":"02","dep_nom_num":"Martinique (972)","dep_num_nom":"972 - Martinique","reg_nom":"Martinique","reg_id":"R02","auc_id":"C97204","geolocalisation":[14.7110039815,-61.1647565483],"dep_id":"D972","uu_id":"UU9B102"},"geometry":{"type":"Point","coordinates":[-61.1647565483,14.7110039815]},"record_timestamp":"2020-11-23T09:58:15.677-04:00"},{"datasetid":"fr-esr-referentiel-geographique","recordid":"a0da44290c440b62153eab67bab68b344297d2d2","fields":{"com_code2":"97216","reg_id_old":"R02","com_code1":"97216","au_code":"9B4","uucr_id":"UU9B401","aca_nom":"Martinique","com_nom_maj_court":"LE MARIGOT","uu_id_99":"SO","regrgp_nom":"DROM-COM","dep_code":"972","uu_code":"9B401","au_id":"AU9B4","uu_id_10":"UU9B401","com_code":"97216","aca_code":"31","reg_code_old":"02","dep_nom":"Martinique","aca_id":"A31","com_nom_maj":"LE MARIGOT","com_nom":"Le Marigot","fr_id":"FR11","reg_nom_old":"Martinique","auc_nom":"Sainte-Marie","com_id":"C97216","fe_id":"FE1","ze_id":"ZE0206","uucr_nom":"Sainte-Marie","fd_id":"FD112","reg_code":"02","dep_nom_num":"Martinique (972)","dep_num_nom":"972 - Martinique","reg_nom":"Martinique","reg_id":"R02","auc_id":"AU9B4","geolocalisation":[14.7808848923,-61.0507940924],"dep_id":"D972","uu_id":"UU9B401"},"geometry":{"type":"Point","coordinates":[-61.0507940924,14.7808848923]},"record_timestamp":"2020-11-23T09:58:15.677-04:00"},{"datasetid":"fr-esr-referentiel-geographique","recordid":"6eb14bd50d96b8f9e065bdb2c31c0fb328241222","fields":{"com_code2":"97217","reg_id_old":"R02","com_code1":"97217","au_code":"9B1","uucr_id":"UU9B602","aca_nom":"Martinique","com_nom_maj_court":"LE MARIN","uu_id_99":"UU9B202","regrgp_nom":"DROM-COM","dep_code":"972","uu_code":"9B602","au_id":"AU9B1","uu_id_10":"UU9B602","com_code":"97217","aca_code":"31","reg_code_old":"02","dep_nom":"Martinique","aca_id":"A31","com_nom_maj":"LE MARIN","com_nom":"Le Marin","fr_id":"FR11","reg_nom_old":"Martinique","auc_nom":"Le Robert","com_id":"C97217","fe_id":"FE1","ze_id":"ZE0203","uucr_nom":"Le Robert","fd_id":"FD112","reg_code":"02","dep_nom_num":"Martinique (972)","dep_num_nom":"972 - Martinique","reg_nom":"Martinique","reg_id":"R02","auc_id":"AU9B1","geolocalisation":[14.4840254458,-60.8579380107],"dep_id":"D972","uu_id":"UU9B602"},"geometry":{"type":"Point","coordinates":[-60.8579380107,14.4840254458]},"record_timestamp":"2020-11-23T09:58:15.677-04:00"},{"datasetid":"fr-esr-referentiel-geographique","recordid":"399ad0febcbd1918def7b31014fd79607f363d31","fields":{"com_code2":"97205","reg_id_old":"R02","com_code1":"97205","au_code":"9B2","uucr_id":"UU9B601","aca_nom":"Martinique","com_nom_maj_court":"CASE PILOTE","uu_id_99":"UU9B601","regrgp_nom":"DROM-COM","dep_code":"972","uu_code":"9B601","au_id":"AU9B2","uu_id_10":"UU9B601","com_code":"97205","aca_code":"31","reg_code_old":"02","dep_nom":"Martinique","aca_id":"A31","com_nom_maj":"CASE-PILOTE","com_nom":"Case-Pilote","fr_id":"FR11","reg_nom_old":"Martinique","auc_nom":"Fort-de-France","com_id":"C97205","fe_id":"FE1","ze_id":"ZE0205","uucr_nom":"Fort-de-France","fd_id":"FD112","reg_code":"02","dep_nom_num":"Martinique (972)","dep_num_nom":"972 - Martinique","reg_nom":"Martinique","reg_id":"R02","auc_id":"AU9B2","geolocalisation":[14.6586961722,-61.1253927105],"dep_id":"D972","uu_id":"UU9B601"},"geometry":{"type":"Point","coordinates":[-61.1253927105,14.6586961722]},"record_timestamp":"2020-11-23T09:58:15.677-04:00"},{"datasetid":"fr-esr-referentiel-geographique","recordid":"abecf8651d32ac075548bfc5099b51d3d8838cc1","fields":{"com_code2":"97207","reg_id_old":"R02","com_code1":"97207","au_code":"9B1","uucr_id":"UU9B602","aca_nom":"Martinique","com_nom_maj_court":"DUCOS","uu_id_99":"UU9B401","regrgp_nom":"DROM-COM","dep_code":"972","uu_code":"9B602","au_id":"AU9B1","uu_id_10":"UU9B602","com_code":"97207","aca_code":"31","reg_code_old":"02","dep_nom":"Martinique","aca_id":"A31","com_nom_maj":"DUCOS","com_nom":"Ducos","fr_id":"FR11","reg_nom_old":"Martinique","auc_nom":"Le Robert","com_id":"C97207","fe_id":"FE1","ze_id":"ZE0202","uucr_nom":"Le Robert","fd_id":"FD112","reg_code":"02","dep_nom_num":"Martinique (972)","dep_num_nom":"972 - Martinique","reg_nom":"Martinique","reg_id":"R02","auc_id":"AU9B1","geolocalisation":[14.5777851381,-60.9676704441],"dep_id":"D972","uu_id":"UU9B602"},"geometry":{"type":"Point","coordinates":[-60.9676704441,14.5777851381]},"record_timestamp":"2020-11-23T09:58:15.677-04:00"},{"datasetid":"fr-esr-referentiel-geographique","recordid":"c978cd546223d98e0a535194b4f20ecedb9d042c","fields":{"com_code2":"97210","reg_id_old":"R02","com_code1":"97210","au_code":"9B1","uucr_id":"UU9B602","aca_nom":"Martinique","com_nom_maj_court":"LE FRANCOIS","uu_id_99":"UU9B303","regrgp_nom":"DROM-COM","dep_code":"972","uu_code":"9B602","au_id":"AU9B1","uu_id_10":"UU9B602","com_code":"97210","aca_code":"31","reg_code_old":"02","dep_nom":"Martinique","aca_id":"A31","com_nom_maj":"LE FRANCOIS","com_nom":"Le François","fr_id":"FR11","reg_nom_old":"Martinique","auc_nom":"Le Robert","com_id":"C97210","fe_id":"FE1","ze_id":"ZE0203","uucr_nom":"Le Robert","fd_id":"FD112","reg_code":"02","dep_nom_num":"Martinique (972)","dep_num_nom":"972 - Martinique","reg_nom":"Martinique","reg_id":"R02","auc_id":"AU9B1","geolocalisation":[14.6060564718,-60.9057158214],"dep_id":"D972","uu_id":"UU9B602"},"geometry":{"type":"Point","coordinates":[-60.9057158214,14.6060564718]},"record_timestamp":"2020-11-23T09:58:15.677-04:00"},{"datasetid":"fr-esr-referentiel-geographique","recordid":"b4d6e9242e31815df5afa5cc51dac7acc04fbfe5","fields":{"com_code2":"97212","reg_id_old":"R02","com_code1":"97212","au_code":"9B1","uucr_id":"UU9B602","aca_nom":"Martinique","com_nom_maj_court":"GROS MORNE","uu_id_99":"UU9B402","regrgp_nom":"DROM-COM","dep_code":"972","uu_code":"9B602","au_id":"AU9B1","uu_id_10":"UU9B602","com_code":"97212","aca_code":"31","reg_code_old":"02","dep_nom":"Martinique","aca_id":"A31","com_nom_maj":"GROS-MORNE","com_nom":"Gros-Morne","fr_id":"FR11","reg_nom_old":"Martinique","auc_nom":"Le Robert","com_id":"C97212","fe_id":"FE1","ze_id":"ZE0204","uucr_nom":"Le Robert","fd_id":"FD112","reg_code":"02","dep_nom_num":"Martinique (972)","dep_num_nom":"972 - Martinique","reg_nom":"Martinique","reg_id":"R02","auc_id":"AU9B1","geolocalisation":[14.7121020202,-61.0260573879],"dep_id":"D972","uu_id":"UU9B602"},"geometry":{"type":"Point","coordinates":[-61.0260573879,14.7121020202]},"record_timestamp":"2020-11-23T09:58:15.677-04:00"},{"datasetid":"fr-esr-referentiel-geographique","recordid":"f184a8ba50766591d76741dd7d4e79f0728f62df","fields":{"com_code2":"97222","reg_id_old":"R02","com_code1":"97222","au_code":"9B1","uucr_id":"UU9B602","aca_nom":"Martinique","com_nom_maj_court":"LE ROBERT","uu_id_99":"UU9B402","regrgp_nom":"DROM-COM","dep_code":"972","uu_code":"9B602","au_id":"AU9B1","uu_id_10":"UU9B602","com_code":"97222","aca_code":"31","reg_code_old":"02","dep_nom":"Martinique","aca_id":"A31","com_nom_maj":"LE ROBERT","com_nom":"Le Robert","fr_id":"FR11","reg_nom_old":"Martinique","auc_nom":"Le Robert","com_id":"C97222","fe_id":"FE1","ze_id":"ZE0204","uucr_nom":"Le Robert","fd_id":"FD112","reg_code":"02","dep_nom_num":"Martinique (972)","dep_num_nom":"972 - Martinique","reg_nom":"Martinique","reg_id":"R02","auc_id":"AU9B1","geolocalisation":[14.6752109401,-60.9429518756],"dep_id":"D972","uu_id":"UU9B602"},"geometry":{"type":"Point","coordinates":[-60.9429518756,14.6752109401]},"record_timestamp":"2020-11-23T09:58:15.677-04:00"},{"datasetid":"fr-esr-referentiel-geographique","recordid":"e78eb55201f3bf023b4262510136357d56f2c27e","fields":{"com_code2":"97223","reg_id_old":"R02","com_code1":"97223","au_code":"9B1","uucr_id":"UU9B602","aca_nom":"Martinique","com_nom_maj_court":"ST ESPRIT","uu_id_99":"UU9B401","regrgp_nom":"DROM-COM","dep_code":"972","uu_code":"9B602","au_id":"AU9B1","uu_id_10":"UU9B602","com_code":"97223","aca_code":"31","reg_code_old":"02","dep_nom":"Martinique","aca_id":"A31","com_nom_maj":"SAINT-ESPRIT","com_nom":"Saint-Esprit","fr_id":"FR11","reg_nom_old":"Martinique","auc_nom":"Le Robert","com_id":"C97223","fe_id":"FE1","ze_id":"ZE0202","uucr_nom":"Le Robert","fd_id":"FD112","reg_code":"02","dep_nom_num":"Martinique (972)","dep_num_nom":"972 - Martinique","reg_nom":"Martinique","reg_id":"R02","auc_id":"AU9B1","geolocalisation":[14.5588947803,-60.9216071826],"dep_id":"D972","uu_id":"UU9B602"},"geometry":{"type":"Point","coordinates":[-60.9216071826,14.5588947803]},"record_timestamp":"2020-11-23T09:58:15.677-04:00"},{"datasetid":"fr-esr-referentiel-geographique","recordid":"5fe78cab8314a1576d66f6b04751bd08a03e4763","fields":{"com_code2":"97224","reg_id_old":"R02","com_code1":"97224","au_code":"9B2","uucr_id":"UU9B601","aca_nom":"Martinique","com_nom_maj_court":"ST JOSEPH","uu_id_99":"UU9B601","regrgp_nom":"DROM-COM","dep_code":"972","uu_code":"9B601","au_id":"AU9B2","uu_id_10":"UU9B601","com_code":"97224","aca_code":"31","reg_code_old":"02","dep_nom":"Martinique","aca_id":"A31","com_nom_maj":"SAINT-JOSEPH","com_nom":"Saint-Joseph","fr_id":"FR11","reg_nom_old":"Martinique","auc_nom":"Fort-de-France","com_id":"C97224","fe_id":"FE1","ze_id":"ZE0201","uucr_nom":"Fort-de-France","fd_id":"FD112","reg_code":"02","dep_nom_num":"Martinique (972)","dep_num_nom":"972 - Martinique","reg_nom":"Martinique","reg_id":"R02","auc_id":"AU9B2","geolocalisation":[14.6764143687,-61.0439024925],"dep_id":"D972","uu_id":"UU9B601"},"geometry":{"type":"Point","coordinates":[-61.0439024925,14.6764143687]},"record_timestamp":"2020-11-23T09:58:15.677-04:00"},{"datasetid":"fr-esr-referentiel-geographique","recordid":"d0c3aa2d180b1d006f800e77b8efb91563fe410b","fields":{"com_code2":"97228","reg_id_old":"R02","com_code1":"97228","au_code":"9B4","uucr_id":"UU9B401","aca_nom":"Martinique","com_nom_maj_court":"STE MARIE","uu_id_99":"UU9B403","regrgp_nom":"DROM-COM","dep_code":"972","uu_code":"9B401","au_id":"AU9B4","uu_id_10":"UU9B401","com_code":"97228","aca_code":"31","reg_code_old":"02","dep_nom":"Martinique","aca_id":"A31","com_nom_maj":"SAINTE-MARIE","com_nom":"Sainte-Marie","fr_id":"FR11","reg_nom_old":"Martinique","auc_nom":"Sainte-Marie","com_id":"C97228","fe_id":"FE1","ze_id":"ZE0204","uucr_nom":"Sainte-Marie","fd_id":"FD112","reg_code":"02","dep_nom_num":"Martinique (972)","dep_num_nom":"972 - Martinique","reg_nom":"Martinique","reg_id":"R02","auc_id":"AU9B4","geolocalisation":[14.7689902687,-61.0169082223],"dep_id":"D972","uu_id":"UU9B401"},"geometry":{"type":"Point","coordinates":[-61.0169082223,14.7689902687]},"record_timestamp":"2020-11-23T09:58:15.677-04:00"},{"datasetid":"fr-esr-referentiel-geographique","recordid":"ff16a77c6c43e75b5461828cc4bfecb57cef6003","fields":{"com_code2":"97229","reg_id_old":"R02","com_code1":"97229","au_code":"9B2","uucr_id":"UU9B601","aca_nom":"Martinique","com_nom_maj_court":"SCHOELCHER","uu_id_99":"UU9B601","regrgp_nom":"DROM-COM","dep_code":"972","uu_code":"9B601","au_id":"AU9B2","uu_id_10":"UU9B601","com_code":"97229","aca_code":"31","reg_code_old":"02","dep_nom":"Martinique","aca_id":"A31","com_nom_maj":"SCHOELCHER","com_nom":"Schœlcher","fr_id":"FR11","reg_nom_old":"Martinique","auc_nom":"Fort-de-France","com_id":"C97229","fe_id":"FE1","ze_id":"ZE0201","uucr_nom":"Fort-de-France","fd_id":"FD112","reg_code":"02","dep_nom_num":"Martinique (972)","dep_num_nom":"972 - Martinique","reg_nom":"Martinique","reg_id":"R02","auc_id":"AU9B2","geolocalisation":[14.6449217661,-61.100038609],"dep_id":"D972","uu_id":"UU9B601"},"geometry":{"type":"Point","coordinates":[-61.100038609,14.6449217661]},"record_timestamp":"2020-11-23T09:58:15.677-04:00"},{"datasetid":"fr-esr-referentiel-geographique","recordid":"d69328d62cb74d1ca49d47f4fe3e152176e8d5a9","fields":{"com_code2":"97230","reg_id_old":"R02","com_code1":"97230","au_code":"9B4","uucr_id":"UU9B401","aca_nom":"Martinique","com_nom_maj_court":"LA TRINITE","uu_id_99":"UU9B403","regrgp_nom":"DROM-COM","dep_code":"972","uu_code":"9B401","au_id":"AU9B4","uu_id_10":"UU9B401","com_code":"97230","aca_code":"31","reg_code_old":"02","dep_nom":"Martinique","aca_id":"A31","com_nom_maj":"LA TRINITE","com_nom":"La Trinité","fr_id":"FR11","reg_nom_old":"Martinique","auc_nom":"Sainte-Marie","com_id":"C97230","fe_id":"FE1","ze_id":"ZE0204","uucr_nom":"Sainte-Marie","fd_id":"FD112","reg_code":"02","dep_nom_num":"Martinique (972)","dep_num_nom":"972 - Martinique","reg_nom":"Martinique","reg_id":"R02","auc_id":"AU9B4","geolocalisation":[14.7386362443,-60.9496306893],"dep_id":"D972","uu_id":"UU9B401"},"geometry":{"type":"Point","coordinates":[-60.9496306893,14.7386362443]},"record_timestamp":"2020-11-23T09:58:15.677-04:00"},{"datasetid":"fr-esr-referentiel-geographique","recordid":"338249c39b511993c727662fd1d61946f5e4c287","fields":{"com_code2":"97232","reg_id_old":"R02","com_code1":"97232","au_code":"9B1","uucr_id":"UU9B602","aca_nom":"Martinique","com_nom_maj_court":"LE VAUCLIN","uu_id_99":"UU9B204","regrgp_nom":"DROM-COM","dep_code":"972","uu_code":"9B602","au_id":"AU9B1","uu_id_10":"UU9B602","com_code":"97232","aca_code":"31","reg_code_old":"02","dep_nom":"Martinique","aca_id":"A31","com_nom_maj":"LE VAUCLIN","com_nom":"Le Vauclin","fr_id":"FR11","reg_nom_old":"Martinique","auc_nom":"Le Robert","com_id":"C97232","fe_id":"FE1","ze_id":"ZE0203","uucr_nom":"Le Robert","fd_id":"FD112","reg_code":"02","dep_nom_num":"Martinique (972)","dep_num_nom":"972 - Martinique","reg_nom":"Martinique","reg_id":"R02","auc_id":"AU9B1","geolocalisation":[14.5436764866,-60.8571906355],"dep_id":"D972","uu_id":"UU9B602"},"geometry":{"type":"Point","coordinates":[-60.8571906355,14.5436764866]},"record_timestamp":"2020-11-23T09:58:15.677-04:00"},{"datasetid":"fr-esr-referentiel-geographique","recordid":"846c5fc572abd1ed3be93fcdfd8d7bea84334d52","fields":{"com_code2":"97206","reg_id_old":"R02","com_code1":"97206","uucr_id":"UU9B202","aca_nom":"Martinique","com_nom_maj_court":"LE DIAMANT","uu_id_99":"SO","regrgp_nom":"DROM-COM","dep_code":"972","uu_code":"9B202","au_id":"AU997","uu_id_10":"UU9B202","com_code":"97206","aca_code":"31","reg_code_old":"02","dep_nom":"Martinique","aca_id":"A31","com_nom_maj":"LE DIAMANT","com_nom":"Le Diamant","fr_id":"FR11","reg_nom_old":"Martinique","auc_nom":"Le Diamant","com_id":"C97206","fe_id":"FE1","ze_id":"ZE0202","uucr_nom":"Le Diamant","fd_id":"FD112","reg_code":"02","dep_nom_num":"Martinique (972)","dep_num_nom":"972 - Martinique","reg_nom":"Martinique","reg_id":"R02","auc_id":"C97206","geolocalisation":[14.4890909775,-61.0210620105],"dep_id":"D972","uu_id":"UU9B202"},"geometry":{"type":"Point","coordinates":[-61.0210620105,14.4890909775]},"record_timestamp":"2020-11-23T09:58:15.677-04:00"},{"datasetid":"fr-esr-referentiel-geographique","recordid":"194fb51469bf73591046340555b231674aa0b06b","fields":{"com_code2":"97213","reg_id_old":"R02","com_code1":"97213","au_code":"9B3","uucr_id":"UU9B402","aca_nom":"Martinique","com_nom_maj_court":"LE LAMENTIN","uu_id_99":"UU9B404","regrgp_nom":"DROM-COM","dep_code":"972","uu_code":"9B402","au_id":"AU9B3","uu_id_10":"UU9B402","com_code":"97213","aca_code":"31","reg_code_old":"02","dep_nom":"Martinique","aca_id":"A31","com_nom_maj":"LE LAMENTIN","com_nom":"Le Lamentin","fr_id":"FR11","reg_nom_old":"Martinique","auc_nom":"Le Lamentin","com_id":"C97213","fe_id":"FE1","ze_id":"ZE0201","uucr_nom":"Le Lamentin","fd_id":"FD112","reg_code":"02","dep_nom_num":"Martinique (972)","dep_num_nom":"972 - Martinique","reg_nom":"Martinique","reg_id":"R02","auc_id":"AU9B3","geolocalisation":[14.6247600105,-60.9933549815],"dep_id":"D972","uu_id":"UU9B402"},"geometry":{"type":"Point","coordinates":[-60.9933549815,14.6247600105]},"record_timestamp":"2020-11-23T09:58:15.677-04:00"},{"datasetid":"fr-esr-referentiel-geographique","recordid":"2bbe7e16bea0e12972636fa1df5e62823e62831c","fields":{"com_code2":"97221","reg_id_old":"R02","com_code1":"97221","au_code":"9B1","uucr_id":"UU9B602","aca_nom":"Martinique","com_nom_maj_court":"RIVIERE SALEE","uu_id_99":"UU9B301","regrgp_nom":"DROM-COM","dep_code":"972","uu_code":"9B602","au_id":"AU9B1","uu_id_10":"UU9B602","com_code":"97221","aca_code":"31","reg_code_old":"02","dep_nom":"Martinique","aca_id":"A31","com_nom_maj":"RIVIERE-SALEE","com_nom":"Rivière-Salée","fr_id":"FR11","reg_nom_old":"Martinique","auc_nom":"Le Robert","com_id":"C97221","fe_id":"FE1","ze_id":"ZE0202","uucr_nom":"Le Robert","fd_id":"FD112","reg_code":"02","dep_nom_num":"Martinique (972)","dep_num_nom":"972 - Martinique","reg_nom":"Martinique","reg_id":"R02","auc_id":"AU9B1","geolocalisation":[14.5261192696,-60.9652129464],"dep_id":"D972","uu_id":"UU9B602"},"geometry":{"type":"Point","coordinates":[-60.9652129464,14.5261192696]},"record_timestamp":"2020-11-23T09:58:15.677-04:00"},{"datasetid":"fr-esr-referentiel-geographique","recordid":"d44efe52a565df715098733b7143b8f5dc501ed0","fields":{"com_code2":"97227","reg_id_old":"R02","com_code1":"97227","au_code":"9B1","uucr_id":"UU9B602","aca_nom":"Martinique","com_nom_maj_court":"STE LUCE","uu_id_99":"UU9B203","regrgp_nom":"DROM-COM","dep_code":"972","uu_code":"9B602","au_id":"AU9B1","uu_id_10":"UU9B602","com_code":"97227","aca_code":"31","reg_code_old":"02","dep_nom":"Martinique","aca_id":"A31","com_nom_maj":"SAINTE-LUCE","com_nom":"Sainte-Luce","fr_id":"FR11","reg_nom_old":"Martinique","auc_nom":"Le Robert","com_id":"C97227","fe_id":"FE1","ze_id":"ZE0202","uucr_nom":"Le Robert","fd_id":"FD112","reg_code":"02","dep_nom_num":"Martinique (972)","dep_num_nom":"972 - Martinique","reg_nom":"Martinique","reg_id":"R02","auc_id":"AU9B1","geolocalisation":[14.4855423973,-60.9451190973],"dep_id":"D972","uu_id":"UU9B602"},"geometry":{"type":"Point","coordinates":[-60.9451190973,14.4855423973]},"record_timestamp":"2020-11-23T09:58:15.677-04:00"},{"datasetid":"fr-esr-referentiel-geographique","recordid":"996f846292bf1b72bc3ab664b07aaca05c710361","fields":{"com_code2":"97231","reg_id_old":"R02","com_code1":"97231","uucr_id":"UU9B204","aca_nom":"Martinique","com_nom_maj_court":"LES TROIS ILETS","uu_id_99":"SO","regrgp_nom":"DROM-COM","dep_code":"972","uu_code":"9B204","au_id":"AU997","uu_id_10":"UU9B203","com_code":"97231","aca_code":"31","reg_code_old":"02","dep_nom":"Martinique","aca_id":"A31","com_nom_maj":"LES TROIS-ILETS","com_nom":"Les Trois-Îlets","fr_id":"FR11","reg_nom_old":"Martinique","auc_nom":"Les Trois-Îlets","com_id":"C97231","fe_id":"FE1","ze_id":"ZE0202","uucr_nom":"Les Trois-Îlets","fd_id":"FD112","reg_code":"02","dep_nom_num":"Martinique (972)","dep_num_nom":"972 - Martinique","reg_nom":"Martinique","reg_id":"R02","auc_id":"C97231","geolocalisation":[14.5272688928,-61.0370896934],"dep_id":"D972","uu_id":"UU9B204"},"geometry":{"type":"Point","coordinates":[-61.0370896934,14.5272688928]},"record_timestamp":"2020-11-23T09:58:15.677-04:00"}]')},8748:function(e,t,i){},"96f6":function(e,t,i){},"985a":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row full-width"},[i("div",{staticClass:"column full-width"},[e.show_ExcelImport?i("div",{staticClass:"row q-pb-md items-right justify-right"},[i("q-uploader",{ref:"uploader",staticClass:"full-width q-px-none",attrs:{multiple:!1,square:"",outlined:"",label:"Sélectionner un fichier excel",type:"file"},on:{added:e.onChange}}),e.currentFile.name?i("q-btn",{attrs:{"no-caps":"",color:"primary","text-color":"white",label:"Utiliser comme base de donnée"},on:{click:function(t){return e.saveToDatabase()}}}):e._e()],1):e._e(),i("div",{staticClass:"full-width"},[i("q-table",{ref:"myTable",attrs:{id:e.uuid,title:e.setTitle,data:e.liveDatas,"row-key":function(e){return e._id?e._id:e[Object.keys(e)[0]]},selection:e.useSelection,columns:e.newColumns,visibleColumns:e.visibleColumns,filter:e.filter,"no-data-label":"pas de données pour l'instant...","no-results-label":"Aucun résultat trouvé",selected:e.useSelected,pagination:e.initialPagination,separator:"cell"},on:{"update:selected":function(t){e.useSelected=t}},nativeOn:{"row-click":function(t){return e.rowSelect.apply(null,arguments)},"row-dblclick":function(t){return e.rowDblSelect.apply(null,arguments)}},scopedSlots:e._u([{key:"header",fn:function(t){return[i("q-tr",{attrs:{props:t}},[e.selectable?i("q-th",{staticClass:"text-bold text-primary bg-blue-1",attrs:{"auto-width":""}}):e._e(),e._l(t.cols,(function(n){return i("q-th",{key:n.name,staticClass:"text-bold text-primary bg-blue-1",attrs:{props:t}},[e.headers_filter?i("q-btn",{attrs:{flat:"",dense:"",round:"","aria-label":"Filtre",icon:"filter_alt"}},[i("q-popup-edit",{ref:"filter_"+n.name,refInFor:!0,attrs:{cover:!1,offset:[0,2]},scopedSlots:e._u([{key:"default",fn:function(t){return[e.datesFields.includes(n.name)?i("div",{staticClass:"q-pa-none",staticStyle:{width:"180px"}},[i("div",{staticClass:"text-body2 text-grey q-mb-md"},[e._v("\n                        Critère de filtre ["+e._s(n.name)+"]\n                      ")]),i("div",{staticClass:"row items-center"},[i("div",{staticClass:"q-pa-none text-caption text-dark full-width"},[i("q-select",{attrs:{dense:"",filled:"",options:["annee","mois","jour"],label:"Date par"},model:{value:e.filtersParams[n.name].option,callback:function(t){e.$set(e.filtersParams[n.name],"option",t)},expression:"filtersParams[col.name].option"}})],1),i("div",{staticClass:"col-12 q-pa-none"},[i("q-input",{attrs:{dense:""},model:{value:e.filtersParams[n.name].value,callback:function(t){e.$set(e.filtersParams[n.name],"value",t)},expression:"filtersParams[col.name].value"}})],1),i("div",{staticClass:"q-pa-sm q-gutter-md"},[i("q-btn",{staticStyle:{"min-width":"68px"},attrs:{dense:"","no-caps":"",color:"primary",size:"sm",label:"Filtrer"},on:{click:function(i){return e.updateFilters(t,n.name)}}}),i("q-btn",{staticStyle:{"min-width":"68px"},attrs:{dense:"","no-caps":"",color:"grey-7",size:"sm",label:"Effacer"},on:{click:function(i){return e.deleteFilters(t,n.name)}}})],1)])]):e._e()]}}],null,!0),model:{value:e.filtersParams[n.name],callback:function(t){e.$set(e.filtersParams,n.name,t)},expression:"filtersParams[col.name]"}})],1):e._e(),e._v("\n                "+e._s(String(n.label).toUpperCase())+"\n              ")],1)}))],2),e.columns_filter?i("q-tr",{staticClass:"ignore-elements",attrs:{props:t}},[e.selectable?i("q-th",{staticClass:"text-bold text-primary bg-blue-1",attrs:{"auto-width":""}},[i("q-icon",{attrs:{name:"filter_alt",size:"20px"}})],1):e._e(),e._l(t.cols,(function(t){return i("q-th",{key:t.name,staticStyle:{padding:"0px 0px 0px 0px"}},[t.hasOwnProperty("filter_type")&&"text"!=t.filter_type?e._e():i("q-input",{staticClass:"q-pl-xs q-pr-xs",attrs:{dense:"",color:"teal",filled:""},on:{input:e.filterColumn},scopedSlots:e._u([e.filter_data[t.field]?{key:"append",fn:function(){return[i("q-icon",{staticClass:"cursor-pointer",attrs:{name:"cancel"},on:{click:function(i){i.stopPropagation(),e.filter_data[t.field]="",e.filterColumn(t.field)}}})]},proxy:!0}:null],null,!0),model:{value:e.filter_data[t.field],callback:function(i){e.$set(e.filter_data,t.field,i)},expression:"filter_data[col.field]"}}),t.hasOwnProperty("filter_type")&&"select"==t.filter_type?i("q-select",{attrs:{"map-options":"",multiple:"","emit-value":"",filled:"",options:e.getColumnOptions(t.field),dense:""},scopedSlots:e._u([{key:"append",fn:function(){return[e.column_options_selected[t.field].length>0?i("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(i){i.stopPropagation(),e.column_options_selected[t.field]=[]}}}):e._e()]},proxy:!0}],null,!0),model:{value:e.column_options_selected[t.field],callback:function(i){e.$set(e.column_options_selected,t.field,i)},expression:"column_options_selected[col.field]"}}):e._e()],1)}))],2):e._e()]}},{key:"body",fn:function(t){return[i("q-tr",{class:t.rowIndex%2===0?"bg-teal-1  q-pa-none":"bg-white  q-pa-none",attrs:{props:t},on:{click:function(i){return e.rowSelect(t,t.row,t.rowIndex)},dblclick:function(i){return e.rowASelect(t,t.row,t.rowIndex)}}},[e.selectable?i("q-td",{staticClass:"q-pa-none"},[i("div",{staticClass:"\n                    q-pa-none\n                    fit\n                    flex flex-center\n                    text-center\n                    non-selectable\n                  "},[i("div",{staticClass:"q-gutter-sm",attrs:{"auto-width":!0}},[i("q-checkbox",{attrs:{color:"teal"},model:{value:t.selected,callback:function(i){e.$set(t,"selected",i)},expression:"props.selected"}})],1)])]):e._e(),e._l(t.cols,(function(n){return i("q-td",{key:n.name,staticClass:"q-pa-none",attrs:{props:t}},[e.ifJSON(n.value)?i("q-btn",{attrs:{color:"white","text-color":"black",label:"JSON"},on:{click:function(t){return e.showJSonDiag(n.value)}}}):i("div",{staticClass:"q-pa-none inline cursor-pointer"},[i("div",{staticClass:"\n                      q-pa-none\n                      fit\n                      flex flex-center\n                      text-center\n                      non-selectable\n                    "},[e._v("\n                    "+e._s(n.value)+"\n                  ")])])],1)}))],2)]}},{key:"top-left",fn:function(){return[i("div",{staticClass:"text-h6"},[e._v(e._s(e.setTitle))]),i("div",{staticClass:"row q-gutter-sm q-pb-md"},[e.useAdmin&&!e.hideexcel?i("q-btn",{staticClass:"q-px-sm",attrs:{color:"primary",dense:"","no-caps":""},on:{click:function(t){e.show_ExcelImport=!0}}},[e._v("Excel Init")]):e._e(),0!=e.newColumns.length&&e.showAdd?i("q-btn",{staticClass:"q-px-sm",attrs:{color:"primary",dense:"","no-caps":""},on:{click:function(t){e.show_AddDialog=!0}}},[e._v("Ajouter")]):e._e(),i("q-dialog",{model:{value:e.show_AddDialog,callback:function(t){e.show_AddDialog=t},expression:"show_AddDialog"}},[i("q-card",[i("q-card-section",[i("div",{staticClass:"text-h6"},[e._v("Ajouter un element!")])]),i("q-card-section",[i("div",{staticClass:"row"},e._l(e.newColumns,(function(t,n){return i("div",{key:"key-"+n,staticClass:"col-12"},[i("q-input",{attrs:{label:t.name},model:{value:e.editRow[""+t.name],callback:function(i){e.$set(e.editRow,""+t.name,i)},expression:"editRow[`${item.name}`]"}})],1)})),0)]),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Annuler",color:"primary"},on:{click:function(t){e.show_AddDialog=!1}}}),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Valider",color:"primary"},on:{click:e.addRow}})],1)],1)],1)],1),i("div",{staticClass:"row q-gutter-md q-pb-md"},[i("q-btn",{staticClass:"bg-primary",attrs:{dense:"",flat:"","no-caps":"","text-color":"white",icon:"far fa-file-excel",label:".xlsx"},on:{click:function(t){return e.exportDatasExcel()}}}),i("q-btn",{staticClass:"bg-primary",attrs:{dense:"","no-caps":"",flat:"","text-color":"white",icon:"fas fa-file-csv",label:".csv"},on:{click:function(t){return e.exportCsvTable()}}}),i("q-btn",{staticClass:"bg-primary",attrs:{dense:"","no-caps":"",flat:"",filled:"","text-color":"white",icon:"far fa-file-pdf",label:".pdf"},on:{click:function(t){return e.exportDatasPdf()}}})],1)]},proxy:!0},{key:"top-right",fn:function(){return[i("q-input",{attrs:{dense:"",debounce:"300",placeholder:"Recherche","label-color":"text-dark"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}},[i("q-icon",{attrs:{slot:"append",name:"search"},slot:"append"})],1)]},proxy:!0},e.selected&&e.selected.length>0&&e.editable?{key:"bottom-row",fn:function(){return[i("q-tr",[i("q-td",{staticClass:"q-pa-md",attrs:{colspan:"100%"}},[e.selected&&e.selected.length>0&&e.editable&&!e.readonly?i("q-btn",{staticClass:"q-px-md q-mx-sm",attrs:{color:"red",dense:"","no-caps":""},on:{click:e.supPrevBtn}},[e._v("Supprimer")]):e._e(),e.selected&&e.selected.length>0&&e.editable?i("q-btn",{staticClass:"q-px-md q-mx-sm",attrs:{color:"grey-8",dense:"","no-caps":""},on:{click:e.editAction}},[e._v("Modifier")]):e._e(),i("q-dialog",{model:{value:e.show_EditDialog,callback:function(t){e.show_EditDialog=t},expression:"show_EditDialog"}},[e.uidForm?i("q-card",{staticStyle:{width:"80%","max-width":"100%"}},[i("q-toolbar",{staticClass:"text-white full-width bg-blue"},[i("q-toolbar-title",{staticClass:"text-h5"},[e._v("\n                        Modification !\n                      ")]),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),i("q-card-section",{staticClass:"q-pa-md",staticStyle:{width:"100%","max-width":"100%"}},[i("f-vv-form",{ref:"editForm",staticClass:"q-pa-sm",attrs:{title:""+e.dbname.split("dbf_")[1],tablename:"accueil",fieldsmodel:e.selectedRow,hiddenFields:[{chargeaccueil:e.currentUsername}]}})],1),i("q-card-actions",{staticClass:"q-pa-md",attrs:{align:"center"}},[i("div",{staticClass:"\n                          row\n                          full-width\n                          q-gutter-xl\n                          items-center\n                          justify-center\n                        "},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Annuler",color:"primary"},on:{click:function(t){e.show_EditDialog=!1}}}),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Modifier",color:"primary"},on:{click:e.updateRow}})],1)])],1):i("q-card",[i("q-card-section",[i("div",{staticClass:"text-h6"},[e._v("Modification !")])]),i("q-card-section",[i("div",{staticClass:"row"},e._l(e.newColumns,(function(t,n){return i("div",{key:"key-"+n,staticClass:"col-12"},[i("q-input",{attrs:{label:t.name},model:{value:e.selectedRow[""+t.name],callback:function(i){e.$set(e.selectedRow,""+t.name,i)},expression:"selectedRow[`${item.name}`]"}})],1)})),0)]),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Annuler",color:"primary"},on:{click:function(t){e.show_EditDialog=!1}}}),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Valider",color:"primary"},on:{click:e.updateRow}})],1)],1)],1)],1)],1)]},proxy:!0}:null],null,!0)})],1)]),i("q-dialog",{model:{value:e.show_JSONDialog,callback:function(t){e.show_JSONDialog=t},expression:"show_JSONDialog"}},[i("q-card",[i("q-toolbar",{staticClass:"text-white full-width bg-blue"},[i("q-toolbar-title",{staticClass:"text-h5"},[e._v(" JSON DATA ! ")]),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),i("q-card-section",{staticClass:"row items-center"},[e.json_data?i("json-viewer",{attrs:{value:e.getJsonData}}):e._e()],1)],1)],1)],1)},o=[],a=i("278c"),r=i.n(a),l=i("c973"),s=i.n(l),c=i("ded3"),d=i.n(c),u=i("448a"),m=i.n(u),p=(i("96cf"),i("d401"),i("81b2"),i("0eb6"),i("b7ef"),i("8bd4"),i("e260"),i("ace4"),i("d3b7"),i("5cc6"),i("907a"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),i("3ca3"),i("ddb0"),i("2b3d"),i("9861"),i("ac1f"),i("1276"),i("4160"),i("159b"),i("b64b"),i("caad"),i("2532"),i("a434"),i("c975"),i("4de4"),i("a623"),i("e9c4"),i("d81d"),i("498a"),i("cca6"),i("13d5"),i("e6cf"),i("4fadc"),i("6062"),i("25f0"),i("5319"),i("7db0"),i("c740"),i("a9e3"),i("1146")),f=i("8baf"),_=(i("0da4"),i("2f62")),b=i("cf57"),h=i("9c40"),g=i("05c0"),v=i("1732"),q=i("a357"),y=i("bd4c"),w=(i("b06b"),i("5494")),C={name:"FVvTable",data:function(){var e={days:"Dimanche_Lundi_Mardi_Mercredi_Jeudi_Vendredi_Samedi".split("_"),daysShort:"Dim_Lun_Mar_Mer_Jeu_Ven_Sam".split("_"),months:"Janvier_Février_Mars_Avril_Mai_Juin_Juillet_Aôut_Septembre_Octobre_Novembre_Décembre".split("_"),monthsShort:"Jan_Fév_Mar_Avr_Mai_Jun_Jui_Aou_Sep_Oct_Nov_Déc".split("_"),firstDayOfWeek:0};return{myLocale:e,currentDateSel:null,dateSelected:"",currentAcces:"",ldata:[],currentFile:{},show_ExcelImport:!1,show_JSONDialog:!1,json_data:null,initialPagination:{sortBy:"desc",descending:!1,page:1,rowsPerPage:5},visibleColumns:[],show_AddDialog:!1,show_EditDialog:!1,newColumns:[],editRow:{},selected:[],selectedRow:{},filter:"",filters:{},filtersParams:{},filtersOperator:{},filter_data:{},column_options:{},column_options_selected:{},datesFields:[],customFilter:null,datedujour:y["b"].formatDate(Date.now(),"DD/MM/YYYY")}},props:{dbname:{type:String,required:!1},dbtype:{type:String,default:"mongodb",required:!1},uidForm:{type:String,required:!1},datas:{type:Array,default:function(){return[]}},columns:{type:Array,required:!1},headers_filter:{type:Boolean,default:!1,required:!1},columns_filter:{type:Boolean,default:!1,required:!1},labelsColumns:{type:Array,default:null,required:!1},editable:{type:Boolean,default:!1,required:!1},hideid:{type:Boolean,default:!0,required:!1},excelimport:{type:Boolean,default:!1,required:!1},hideexcel:{type:Boolean,default:!0,required:!1},titre:{type:String,default:"",required:!1},useAdmin:{type:Boolean,default:!1,required:!1},selectable:{type:Boolean,default:!1,required:!1},readonly:{type:Boolean,default:!0,required:!1},showAdd:{type:Boolean,default:!1,required:!1},editEvent:{type:Boolean,default:!1,required:!1},vuexActions:{type:Array,default:function(){return[]}}},computed:{getJsonData:function(){if(this.json_data)return this.json_data},setTitle:function(){return""==this.titre?this.dbname:this.titre},liveDatas:function(){return this.dbtype||this.dbname?Array.isArray(this.customFilter)&&this.customFilter.length>0?this.customFilter:m()(this.ldata):this.ldata},useSelection:function(){return this.editable||this.selectable?"single":"none"},useSelected:{get:function(){return this.selectable?this.selected:[]},set:function(e){this.selected=e}}},methods:d()(d()(d()({},Object(_["b"])("adinfos",["getAllDatabases","getTables","getTableDatas"])),{},{editAction:function(){this.editEvent?this.$emit("onEdit",this.selectedRow):this.show_EditDialog=!0},showJSonDiag:function(e){this.json_data=e,this.show_JSONDialog=!0},objectsNotIn:function(e,t){var i=[];return Object.keys(e).forEach((function(e){Object.keys(t).includes(e)||i.push(e)})),i.splice(i.indexOf("_id"),1),i},filterArray:function(e,t){var i=Object.keys(t);return e.filter((function(e){return i.every((function(i){return"function"!==typeof t[i]||t[i](e[i])}))}))},ifJSON:function(e){try{return!("[object Object]"!==Object.prototype.toString.call(e)&&!Array.isArray(e))}catch(error){return!1}},onChange:function(e){var t=this,i=e?e[0]:null;console.log("File :",i),this.currentFile=i;var n=i;console.log("Files data :",n);var o=new FileReader;o.onload=function(e){var i=e.target.result,n=p["read"](i,{type:"binary",cellDates:!0}),o=n.SheetNames[0],a=n.Sheets[o];t.ldata&&(t.ldata=p["utils"].sheet_to_json(a,{header:0,raw:!0})),console.log("Datas :",t.ldata);var r=p["utils"].sheet_to_json(a,{header:1,raw:!0});if(console.log("Datas headers :",r),console.log("Datas with header :",r.length),Array.isArray(r)&&r.length>0){t.newColumns=[],console.log("Keys headers :",JSON.parse(JSON.stringify(r[0])));var l=JSON.parse(JSON.stringify(r[0])),s=l.map((function(e){return"".concat(String(e).trim())}));console.log("Keys headers :",s),t.visibleColumns=s,l.forEach((function(e){"string"==typeof e&&t.newColumns.push({name:e,field:e,label:e,sortable:!0})}))}},o.readAsBinaryString(i)},saveToDatabase:function(){var e=this;return s()(regeneratorRuntime.mark((function t(){var i,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=Object.assign([],e.ldata),n=[],e.ldata=Object.assign([],n),Array.isArray(i)){t.next=5;break}return t.abrupt("return");case 5:i.forEach(function(){var t=s()(regeneratorRuntime.mark((function t(i){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,w["c"].service("tables").create(JSON.parse(JSON.stringify(i)),{query:{tableDb:e.dbtype,tableName:e.dbname}});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),i.length>0&&(o=Object.keys(i[0]),console.log("Columns :",o),e.editRow=o.reduce((function(e,t){return e[t]="",e}),{}),e.newColumns=o.map((function(e){return{name:e,align:"center",label:e,field:e,sortable:!0}}))),e.visibleColumns=Object.assign([],e.newColumns),e.hideid&&(e.visibleColumns=Object.assign([],e.visibleColumns.filter((function(e){return"_id"!=e.field})).map((function(e){return"".concat(e.field.trim())}))),console.log("Visible columns :",e.visibleColumns)),setTimeout(s()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.updateDatas();case 2:e.show_ExcelImport=!1;case 3:case"end":return t.stop()}}),t)}))),1e3);case 10:case"end":return t.stop()}}),t)})))()},exportDatasExcel:function(){var e=this;Promise.resolve().then(i.t.bind(null,"1146",7)).then((function(t){var i,n,o;if(o=e.ldata,e.newColumns.length>0){var a=[];o.forEach((function(t,i,n){var o={};e.newColumns.forEach((function(e,i,n){o[e.name]=t[e.field]})),console.log("données exportables:",o),a.push(o)})),i=e.newColumns,n=a}else{var r=[];e.newColumns.forEach((function(e){var t={title:e.name,dataKey:e.field};"Actions"!=e.name&&r.push(t)})),console.log("Columns :",r),i=r;var l=[];o.forEach((function(t,i,n){var o={};e.newColumns.forEach((function(e,i,n){o[e.name]=t[e.field]})),console.log("données exportables:",o),l.push(o)})),n=l}n.map((function(e){return delete e._id,e}));var s=[i.filter((function(e){return"_id"!=e.name})).map((function(e){return e.name}))],c=p["utils"].book_new();t.utils.sheet_add_aoa(c,s);var d=t.utils.sheet_add_json(c,n,{origin:"A2",skipHeader:!0}),u={Sheets:{data:d},SheetNames:["data"]},m=t.write(u,{bookType:"xlsx",type:"array"}),f=Object(q["a"])("table-export.xlsx",m,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8");!0!==f&&e.$q.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})}))},exportDatasPdf:function(){var e=this;Promise.resolve().then(i.t.bind(null,"0da4",7)).then((function(t){var i,n,o=new f["jsPDF"];if(e.newColumns.length>0){var a=[];e.ldata.forEach((function(t,i,n){var o=[];e.newColumns.forEach((function(e,i,n){"_id"!=e.field&&o.push(t[e.field])})),console.log("données exportables:",o),a.push(o)}));var r=Object.assign([],e.newColumns);delete r._id,i=[r.filter((function(e){return"_id"!=e.name})).map((function(e){return e.name}))],n=a}console.log("Columns :",i),console.log("Body :",n),o.autoTable({head:i,body:n}),o.save("export-table.pdf")}))},exportCsvTable:function(){var e=this;Promise.resolve().then(i.t.bind(null,"1146",7)).then((function(t){var i,n,o;if(o=e.ldata,e.newColumns.length>0){var a=[];o.forEach((function(t,i,n){var o={};e.newColumns.forEach((function(e,i,n){o[e.name]=t[e.field]})),console.log("données exportables:",o),a.push(o)})),i=e.newColumns,n=a}else{var r=[];e.newColumns.forEach((function(e){var t={title:e.name,dataKey:e.field};"Actions"!=e.name&&r.push(t)})),console.log("Columns :",r),i=r;var l=[];o.forEach((function(t,i,n){var o={};e.newColumns.forEach((function(e,i,n){o[e.name]=t[e.field]})),console.log("données exportables:",o),l.push(o)})),n=l}n.map((function(e){return delete e._id,e}));var s=[i.filter((function(e){return"_id"!=e.name})).map((function(e){return e.name}))],c=p["utils"].book_new();t.utils.sheet_add_aoa(c,s);var d=t.utils.sheet_add_json(c,n,{origin:"A2",skipHeader:!0}),u=t.utils.sheet_to_csv(d,{FS:","}),m=Object(q["a"])("table-export.csv",u,"text/csv");!0!==m&&e.$q.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})}))},rowSelect:function(e,t,i){this.$emit("row-click",e,t,i)},rowDblSelect:function(e,t,i){this.$emit("row-dblclick",e,t,i)},rowASelect:function(e,t,i){console.log("evt :",e),console.log("row :",t),console.log("index :",i),this.$emit("row-dblclick",e,t,i)}},Object(_["b"])("tables",{getDatas:"getTableQuery"})),{},{whereDateYearEq:function(e){return function(t){return t.split("/")[2]===e}},whereDateMonthrEq:function(e){return function(t){return t.split("/")[2]===e}},whereDateDayEq:function(e){return function(t){return t.split("/")[2]===e}},whereContain:function(e){return function(t){return-1!=String(t).toLowerCase().indexOf(e.toLowerCase())}},whereDateBetween:function(e,t){return function(i){return y["b"].isBetweenDates(new Date(i.split("/")[2],i.split("/")[1],i.split("/")[0]),new Date(e.split("/")[2],e.split("/")[1],e.split("/")[0]),new Date(t.split("/")[2],t.split("/")[1],t.split("/")[0]),{onlyDate:!0,inclusiveFrom:!0,inclusiveTo:!0})}},whereDateDuJour:function(e){var t=new Date(e.split("/")[2],e.split("/")[1],e.split("/")[0]);return function(e){return y["b"].isSameDate(new Date(e.split("/")[2],e.split("/")[1],e.split("/")[0]),t)}},whereTypeAcces:function(e){return function(t){return String(t).trim()==e}},filterColumn:function(e){var t=this;console.log("Filter data :",this.filter_data),console.log("Value :",e),console.log("Donnees :",this.ldata.filter((function(i){return-1!=String(i[Object.keys(t.filter_data)[0]]).indexOf(e)})));var i=Object.entries(this.filter_data).map((function(e){var t=r()(e,2),i=t[0],n=t[1];return{key:i,value:n}}));console.log("Donnees :",i),i.forEach((function(e){t.filters[e.key]=t.whereContain(e.value)})),this.customFilter=this.filterArray(this.ldata,this.filters)},updateFilters:function(e,t){console.log("Object SCOPE :",e),Object(e.value).hasOwnProperty("option")&&(e.value.option&&"annee"===e.value.option&&(this.filters["".concat(t)]=""!=e.value.value?this.whereDateYearEq(e.value.value):""),e.value.option&&"mois"===e.value.option&&(this.filters["".concat(t)]=""!=e.value.value?this.whereDateMonthEq(e.value.value):""),e.value.option&&"jour"===e.value.option&&(this.filters["".concat(t)]=""!=e.value.value?this.whereDateDayEq(e.value.value):"")),console.log("Filters :",this.filters),console.log("Filters Params:",this.filtersParams),console.log("Colonne filtre update :",t),this.customFilter=this.filterArray(this.ldata,this.filters),e.set()},getColumnOptions:function(e){var t=m()(new Set(this.ldata.map((function(t){return t[e]})))),i=[];return t.filter((function(e){return i.push({label:e.toString(),value:e.toString().toLowerCase().replace(/_/g,"_")}),e})),i},deleteFilters:function(e,t){this.filters["".concat(t)]="",this.customFilter=this.filterArray(this.ldata,this.filters),this.filtersParams["".concat(t)].value="",e.set()},addRow:function(){var e=this;return s()(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!=e.newColumns.length){t.next=2;break}return t.abrupt("return");case 2:return console.log("Edit rows :",e.editRow),t.next=5,e.$store.dispatch("tables/create",[e.editRow,{query:{tableDb:e.dbtype,tableName:e.dbname}}]);case 5:return i=t.sent,console.log("Added row :",i),t.next=9,e.updateDatas();case 9:case"end":return t.stop()}}),t)})))()},updateRow:function(){var e=this;return s()(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("Edit rows :",e.selectedRow),delete e.$refs["editForm"].fieldData._id,console.log("Form datas :",e.$refs["editForm"].fieldData),!e.selectedRow){t.next=10;break}return t.next=6,e.$store.dispatch("tables/update",[e.selectedRow._id,e.selectedRow,{query:{tableDb:e.dbtype,tableName:e.dbname}}]);case 6:return i=t.sent,console.log("Données modifiées :",i),t.next=10,e.updateDatas();case 10:case"end":return t.stop()}}),t)})))()},updateDatas:function(){var e=this;return s()(regeneratorRuntime.mark((function t(){var i,n,o,a,r,l,s,c,d,u,p,f,_,h,g;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$q.loading.show({spinner:b["a"],spinnerColor:"red",message:"Chargement en cours..."}),t.next=3,w["c"].service("tables").find({query:{tableDb:e.dbtype,tableName:e.dbname,query:JSON.stringify({query:{}})}});case 3:if(o=t.sent,console.log("Table result :",o),e.$q.loading.hide(),e.ldata=Object.assign([],o),!(e.ldata.length>0)){t.next=40;break}if(a=e.ldata.map((function(e){return"".concat(Object.keys(e).length)})),console.log("Count keys :",a),r=Math.max.apply(Math,m()(a)),l=Math.min.apply(Math,m()(a)),console.log("Nb max props :",r),console.log("Nb min props :",l),s=a.findIndex((function(e){return Number(e)==Number(r)})),console.log("Nb maxCols props :",s),c=Object.assign([],e.ldata),console.log("Data max :",c[s]),d=a.findIndex((function(e){return Number(e)==Number(l)})),console.log("Data :",e.ldata),m()(new Set(a)),console.log("Data min :",c[d]),u=Object.assign(c[s],c[d]),console.log("Fusion Obj :",u),p=Object.keys(u),console.log("Columns :",p),""==e.uidForm&&null==e.uidForm){t.next=31;break}return t.next=29,w["c"].service("tables").find({query:{tableDb:e.dbtype,tableName:"formulaires",query:JSON.stringify({query:{uid:e.uidForm}})}});case 29:i=t.sent,console.log("INFOS Formulaire associé ".concat(e.uidForm,":"),i);case 31:e.editRow=p.reduce((function(e,t){return e[t]="",e}),{}),f=[],o.forEach((function(t,i){if(f.push({orig:Object.keys(t).length,col:Object.keys(e.editRow).length,obbj:e.objectsNotIn(t,e.editRow)}),e.objectsNotIn(t,e.editRow).length>0){var n=e.objectsNotIn(t,e.editRow).reduce((function(e,t){return e[t]="",e}),{});e.editRow=Object.assign(e.editRow,n)}})),console.log("New edit row :",e.editRow),p=Object.keys(e.editRow),e.newColumns=p.map((function(e){return{name:e,align:"center",label:e,field:e,sortable:!0}})),console.log("NEw Columns :",e.editRow),console.log("COLONNES  COMP : ",f),e.labelsColumns&&e.labelsColumns.length>0?(console.log("Label :",e.labelsColumns),console.log("Columns :",e.newColumns),e.labelsColumns.forEach((function(t,i){if(t.id&&t.label){var n=e.newColumns.findIndex((function(e){return e.name==t.id}));console.log("Index :",n),-1!=n&&(e.newColumns[n].label=t.label)}}))):i&&1==i.length&&n?(e.datesFields=[],n.forEach((function(t,i){if(-1!=e.newColumns.findIndex((function(e){return e.name==t.id}))){var n=e.newColumns.findIndex((function(e){return e.name==t.id}));e.newColumns[n].label=String(t.label).trim().replace(":",""),"date"==t.field_type&&e.datesFields.push(t.id)}})),console.log("Champs types date :",e.datesFields),console.log(" Form Columns :",e.newColumns)):(_=Object.assign([],e.newColumns.map((function(e){return{id:e.name,label:e.name}}))),_.forEach((function(t,i){if(t.id&&t.label){var n=e.newColumns.findIndex((function(e){return e.name==t.id}));e.newColumns[n].label=t.label}})),console.log("Columns :",e.newColumns));case 40:e.visibleColumns=Object.assign([],e.newColumns),console.log("Visible columns :",e.visibleColumns),!e.hideid||e.editable&&e.selectable?(g=Object.assign([],e.visibleColumns.map((function(e){return"".concat(e.field.trim())}))),e.visibleColumns=Object.assign([],g),console.log("Visible columns :",e.visibleColumns)):(h=Object.assign([],e.visibleColumns.filter((function(e){return"_id"!=e.field})).map((function(e){return"".concat(e.field.trim())}))),e.visibleColumns=Object.assign([],h),console.log("Visible columns :",e.visibleColumns)),null!==e.filters&&0!==e.filters.length||(e.filters=e.visibleColumns.reduce((function(e,t){return e[t]="",e}),{})),null!==e.filtersParams&&0!==e.filtersParams.length||(e.filtersParams=e.visibleColumns.reduce((function(e,t){return e[t]={},e}),{})),console.log("Filters :",e.filters),console.log("Filters Params:",e.filtersParams),e.customFilter=e.filterArray(e.ldata,e.filters),console.log("Custom filter :",e.customFilter);case 49:case"end":return t.stop()}}),t)})))()},deletedRow:function(){var e=this;return s()(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(1!=e.selected.length){t.next=10;break}return console.log("ligne a effacer :",e.selected),console.log("ligne tabledb :",e.dbtype),console.log("ligne table :",e.dbname),t.next=6,e.$store.dispatch("tables/remove",[e.selected[0]._id,{query:{tableDb:e.dbtype,tableName:e.dbname}}]);case 6:return i=t.sent,console.log("Deleted row :",i),t.next=10,e.updateDatas();case 10:case"end":return t.stop()}}),t)})))()},supPrevBtn:function(){var e=this;this.$q.dialog({title:"Confirmation",message:"Vous allez supprimer définitivement cette ligne ?",ok:{push:!0,label:"Oui",color:"negative"},cancel:{push:!0,label:"Non"},persistent:!0}).onOk(s()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.deletedRow();case 2:case"end":return t.stop()}}),t)})))).onCancel((function(){})).onDismiss((function(){}))}}),mounted:function(){var e=this;return s()(regeneratorRuntime.mark((function t(){var i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$emit("init-mounted"),console.log("Store context",e.$store),i=e.$FeathersVuex.api.Table,!e.dbtype||!e.dbname){t.next=11;break}return i.find({query:{tableDb:e.dbtype,tableName:e.dbname,query:e.queryObj?JSON.stringify(e.queryObj):JSON.stringify({})}}).then((function(e){console.log("Table :",e)})),console.log("DbName :",e.dbname),Array.isArray(e.columns)&&e.columns.length>0&&(e.editRow=e.columns.reduce((function(e,t){return e[t]="",e}),{}),console.log("Edit rows :",e.editRow),e.newColumns=e.columns.map((function(e){return{name:e,align:"center",label:e,field:e,sortable:!0}})),e.visibleColumns=Object.assign([],e.newColumns),e.hideid&&(e.visibleColumns=Object.assign([],e.visibleColumns.filter((function(e){return"_id"!=e.field})).map((function(e){return"".concat(e.field.trim())}))),console.log("Visible columns :",e.visibleColumns))),t.next=9,e.updateDatas();case 9:t.next=13;break;case 11:console.log("Table datas :",e.datas),e.ldata=Object.assign([],e.datas);case 13:console.log("Table :",e.ldata),Array.isArray(e.columns)&&e.columns.length>0?(e.editRow=e.columns.reduce((function(e,t){return e[t]="",e}),{}),console.log("Edit rows :",e.editRow),e.newColumns=e.columns.map((function(e){return{name:e,align:"center",label:e,field:e,sortable:!0}})),e.visibleColumns=Object.assign([],e.newColumns),e.hideid&&(e.visibleColumns=Object.assign([],e.visibleColumns.filter((function(e){return"_id"!=e.field})).map((function(e){return"".concat(e.field.trim())}))),console.log("Visible columns :",e.visibleColumns))):(e.ldata.length>0&&(n=Object.keys(e.ldata[0]),console.log("Columns :",n),e.editRow=n.reduce((function(e,t){return e[t]="",e}),{}),e.newColumns=n.map((function(e){return{name:e,align:"center",label:e,field:e,sortable:!0}}))),e.visibleColumns=Object.assign([],e.newColumns),e.hideid&&(e.visibleColumns=Object.assign([],e.visibleColumns.filter((function(e){return"_id"!=e.field})).map((function(e){return"".concat(e.field.trim())}))),console.log("Visible columns :",e.visibleColumns)));case 15:case"end":return t.stop()}}),t)})))()},created:function(){var e=this;return s()(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.uuid=Object(v["a"])(),Array.isArray(e.columns)&&e.columns.length>0?(e.editRow=e.columns.reduce((function(e,t){return e[t]="",e}),{}),console.log("Edit rows :",e.editRow),e.newColumns=e.columns.map((function(e){return{name:e,align:"center",label:e,field:e,sortable:!0}})),e.visibleColumns=Object.assign([],e.newColumns),e.hideid&&(e.visibleColumns=Object.assign([],e.visibleColumns.filter((function(e){return"_id"!=e.field})).map((function(e){return"".concat(e.field.trim())}))),console.log("Visible columns :",e.visibleColumns))):(e.ldata.length>0&&(i=Object.keys(e.ldata[0]),console.log("Columns :",i),e.editRow=i.reduce((function(e,t){return e[t]="",e}),{}),e.newColumns=i.map((function(e){return{name:e,align:"center",label:e,field:e,sortable:!0}}))),e.visibleColumns=Object.assign([],e.newColumns),e.hideid&&(e.visibleColumns=Object.assign([],e.visibleColumns.filter((function(e){return"_id"!=e.field})).map((function(e){return"".concat(e.field.trim())}))),console.log("Visible columns :",e.visibleColumns)));case 2:case"end":return t.stop()}}),t)})))()},watch:{datas:function(e,t){e&&(console.log("Datas properties  :",e),this.ldata=Object.assign([],e),this.$emit("data-change",this.ldata))},selected:function(){console.log("Selection :",this.selected),this.selected.length>0&&Object.assign(this.selectedRow,this.selected[0])},selectedRow:function(){console.log("Changement de données")}},errorCaptured:function(e,t,i){console.log("Error :",error),console.log("Vm component :",t),console.log("Info :",i)}},x=C,E=(i("033d"),i("2877")),O=i("ee89"),F=i("eaac"),M=i("bd08"),k=i("357e"),S=i("42a1"),j=i("ddd8"),D=i("27f9"),R=i("0016"),T=i("db86"),Q=i("8f8e"),I=i("24e8"),A=i("f09f"),L=i("a370"),U=i("4b7e"),N=i("65c6"),B=i("6ac5"),P=i("7f67"),V=i("eebe"),$=i.n(V),z=Object(E["a"])(x,n,o,!1,null,null,null);t["a"]=z.exports;$()(z,"components",{QUploader:O["a"],QBtn:h["a"],QTable:F["a"],QTr:M["a"],QTh:k["a"],QPopupEdit:S["a"],QSelect:j["a"],QInput:D["a"],QIcon:R["a"],QTd:T["a"],QCheckbox:Q["a"],QTooltip:g["a"],QDialog:I["a"],QCard:A["a"],QCardSection:L["a"],QCardActions:U["a"],QToolbar:N["a"],QToolbarTitle:B["a"]}),$()(z,"directives",{ClosePopup:P["a"]})},"9ef0":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"q-gutter-md row"},[i("q-form",{ref:"myForm",style:e.$q.platform.is.mobile?{width:"95%"}:{width:"100%"},on:{submit:e.onSubmit}},[i("div",{staticClass:"q-gutter-none row"},e._l(e.visibleFields,(function(t,n){return i("div",{key:n,class:e.$q.platform.is.mobile?"col-md-12 ":t.span?"col-"+t.span:"col-auto"},[e.setShow[t.id]&&e.visibleFields.length>0?i(e.getElement(t),{ref:t.cid,refInFor:!0,tag:"component",attrs:{label:t.label,labelToolTip:t.labelToolTip,required:t.required,field_options:t.field_options,id:t.id,cid:t.cid,debounce:"500"},on:{input:e.onInput},model:{value:e.fieldData[t.id],callback:function(i){e.$set(e.fieldData,t.id,i)},expression:"fieldData[field.id]"}}):e._e()],1)})),0),i("div",{staticClass:"row q-gutter-xl item-center justify-center q-pt-md"},[e.showSave?i("q-btn",{staticClass:"q-pa-sm",attrs:{icon:"save",color:"primary","no-caps":"",label:e.saveLabel?e.saveLabel:"Enregistrer",type:"submit"}},[i("q-tooltip",{attrs:{"content-class":"bg-amber text-center text-h6 text-dark"}},[e._v("\n          "+e._s(e.saveLabel?e.saveLabel:"Enregistrer")+"\n        ")])],1):e._e()],1)])],1)},o=[],a=i("c973"),r=i.n(a),l=i("ded3"),s=i.n(l),c=(i("96cf"),i("ac1f"),i("1276"),i("4de4"),i("d3b7"),i("cca6"),i("b64b"),i("4fadc"),i("13d5"),i("4160"),i("159b"),i("d81d"),i("fb6a"),i("a15b"),i("2f62")),d=i("ed09"),u=i("bd4c"),m=i("cf57"),p=i("9c40"),f=i("05c0"),_=(i("d882"),i("c18b")),b=Object(d["d"])({name:"FVvFormByName",components:{QBtn:p["a"],QTooltip:f["a"],VvFormBuilder:_["y"],RvFormBuilder:_["s"],QFormBuilder:_["q"],TextElement:_["w"],CacemusersElement:_["b"],CommunesElement:_["d"],ParagraphElement:_["m"],CheckboxesElement:_["c"],RadioElement:_["r"],DateElement:_["e"],TimeElement:_["x"],DropdownElement:_["f"],EmailElement:_["g"],NameElement:_["k"],SimpleNameElement:_["u"],AddressElement:_["a"],PhoneElement:_["p"],FileElement:_["h"],PaymentElement:_["o"],TermsElement:_["v"],PageBreakElement:_["l"],ImageElement:_["j"],SectionBreakElement:_["t"],PassagersElement:_["n"],HiddenElement:_["i"]},props:{nameForm:{type:String,required:!1},ffields:{type:Array,required:!1},title:{type:String,required:!1},tablename:{type:String,required:!1},saveLabel:{type:String,required:!1},fieldsmodel:{type:Object,required:!1},showSave:{required:!1,default:!1,type:Boolean}},data:function(){"Dimanche_Lundi_Mardi_Mercredi_Jeudi_Vendredi_Samedi".split("_"),"Dim_Lun_Mar_Mer_Jeu_Ven_Sam".split("_"),"Janvier_Février_Mars_Avril_Mai_Juin_Juillet_Aôut_Septembre_Octobre_Novembre_Décembre".split("_"),"Jan_Fév_Mar_Avr_Mai_Jun_Jui_Aou_Sep_Oct_Nov_Déc".split("_");return{fields:[],setShow:[],fieldData:[],FormValid:!0,selectedDate:u["b"].formatDate(Date.now(),"DD/MM/YYYY"),selectedTime:u["b"].formatDate(Date.now(),"HH:mm")}},computed:s()(s()(s()({},Object(c["d"])("adinfos",{isAdmin:function(e){return e.isAdmin},isSiteAdmin:function(e){return e.isSiteAdmin}})),Object(c["d"])("admin",{formData:function(e){return e.getform},fconfig:function(e){return e.config}})),{},{visibleFields:function(){if(this.fields)return this.fields.filter((function(e){return"hidden"!=e.field_type}))}}),methods:s()(s()({},Object(c["b"])("admin",["getAllVisiteurs","addVisiteur","getForm","getFormByName","saveForm","getConfig","writeConfig"])),{},{onSubmit:function(e){var t=this;console.log("Form submit :",this.$refs.myForm),this.$refs.myForm.validate().then(function(){var e=r()(regeneratorRuntime.mark((function e(i){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("Valid :",i),console.log("Form :",t.fieldData),n=Object.assign({},t.fieldsmodel,t.fieldData),console.log("Form result :",n),t.$emit("onFormAdded",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())["catch"]((function(e){t.$q.notify({message:"Formulaire incomplet !!!",color:"negative"})}))},setForm:function(e,t){var i=this;return r()(regeneratorRuntime.mark((function n(){var o,a,r,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:o=Object.keys(t),Object.entries(t),i.fieldData=o.reduce((function(e,i){return e[i]=t[i],e}),{}),a=Object.assign([],e),i.fields=Object.assign([],a),r=i.fields.filter((function(e){return e.innerValue&&""!=e.innerValue})),console.log("Field form default values :",r),r&&Array.isArray(r)&&r.length>0&&(i.fieldsmodel={},r.forEach((function(e,t){i.fieldsmodel["".concat(e.id)]=e.innerValue}))),console.log("Field model :",i.fieldsmodel),l=i.fields.map((function(e){return"".concat(e.id)})),i.setShow=l.reduce((function(e,t){return e[t]=!0,e}),{}),i.initConds(),i.fields.forEach((function(e,t){Object(e).hasOwnProperty("show_options")&&Array.isArray(e.show_options)&&e.show_options.length>0&&e.show_options.forEach((function(t){var n=t.id_field,o=t.valcalc;Object(i.fieldsmodel).hasOwnProperty("".concat(n))&&(i.setShow["".concat(e.id)]=i.fieldsmodel["".concat(n)]==o)}))}));case 13:case"end":return n.stop()}}),n)})))()},initConds:function(){var e=this;this.fields.forEach((function(t,i){Object(t).hasOwnProperty("show_options")&&Array.isArray(t.show_options)&&t.show_options.length>0&&(e.setShow["".concat(t.id)]=!1)}))},onInput:function(e,t){var i=this,n=Object.assign([],this.fields),o=Object.assign([],this.fieldData);n.filter((function(e){return"passagers"===e.field_type})).forEach((function(e){o["".concat(e.id)]=Object.assign([],[{nom:null,prenom:null,societe:null}])})),n.forEach((function(e,n){Object(e).hasOwnProperty("id")&&Object(e).hasOwnProperty("show_options")&&Array.isArray(e.show_options)&&e.show_options.length>0&&e.id!=t&&e.show_options.forEach((function(t){var n=t.id_field,a=t.valcalc;Object(o).hasOwnProperty("".concat(n))&&(i.setShow["".concat(e.id)]=o["".concat(n)]==a)}))}))},getElement:function(e){if("hidden"!=e.field_type){for(var t=e.field_type.split("_"),i=0;i<t.length;i++)t[i]=t[i].charAt(0).toUpperCase()+t[i].slice(1);return t.join("")+"Element"}return null},updateDisplayForm:function(e){var t=this;return r()(regeneratorRuntime.mark((function i(){var n,o,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!e){i.next=10;break}return t.$q.loading.show({spinner:m["a"],spinnerColor:"red",message:"Chargement en cours..."}),i.next=4,t.getFormByName(e);case 4:t.$q.loading.hide(),console.log("Données du formulaire chargée :",t.formData),Object(t.formData[0]).hasOwnProperty("titre")&&(t.currentTitle=t.formData[0].titre),t.formData.length>0&&t.formData[0].data.length>0&&(t.fields=Object.assign([],t.formData[0].data),n=Object.assign([],t.formData),o=Object.assign([],n[0].data),t.fieldsmodel?t.setForm(o,t.fieldsmodel):t.setForm(o,t.fieldsmodel?t.fieldsmodel:{})),i.next=13;break;case 10:t.fields=Object.assign([],t.ffields),a=Object.assign([],t.ffields),t.fieldsmodel?t.setForm(a,t.fieldsmodel):t.setForm(a,t.fieldsmodel?t.fieldsmodel:{});case 13:case"end":return i.stop()}}),i)})))()}}),beforeMount:function(){var e=this;return r()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$q.loading.show({spinner:m["a"],spinnerColor:"red",message:"Chargement en cours..."}),console.log("Form Name :",e.nameForm),t.next=4,e.updateDisplayForm(e.nameForm);case 4:e.$q.loading.hide();case 5:case"end":return t.stop()}}),t)})))()},watch:{fields:{handler:function(e){console.log("FormData :",e)},deep:!0}}}),h=b,g=i("2877"),v=i("0378"),q=i("eebe"),y=i.n(q),w=Object(g["a"])(h,n,o,!1,null,null,null);t["a"]=w.exports;y()(w,"components",{QForm:v["a"],QBtn:p["a"],QTooltip:f["a"]})},b376:function(e,t,i){},b4ac:function(e,t,i){"use strict";i("b376")},bc6f:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-dialog",{ref:"dialog",staticClass:"q-pa-none",on:{hide:e.onDialogHide}},[i("q-card",{staticClass:"q-dialog-plugin q-px-none",style:"width:"+e.twidth+"; max-width:100%"},[i("q-card-section",{staticClass:"full-width q-pa-none overflow-hidden-y hide-scrollbar"},[i("q-bar",{staticClass:"bg-primary text-white full-width"},[i("q-space"),i("q-btn",{attrs:{dense:"",flat:"",icon:"close"},on:{click:function(t){return e.hide()}}})],1)],1),i("q-card-section",{staticClass:"scroll col-12 q-py-md",staticStyle:{"max-height":"50vh"}},[i("f-vv-table",{staticClass:"q-pa-xs",attrs:{dbname:e.dbname,dbtype:e.dbtype,useSelection:!0,editable:!1,columns:["uid","nom","type"]},on:{"row-dblclick":e.onRowClick}})],1)],1)],1)},o=[],a=i("c973"),r=i.n(a),l=i("ded3"),s=i.n(l),c=(i("96cf"),i("9e62f"),i("2f62")),d=i("ed09"),u=i("985a"),m=Object(d["d"])({name:"DiagVvTable",components:{FVvTable:u["a"]},data:function(){return{data:[],columns:[],selected:[],filter:""}},props:{dbname:{type:String,required:!0},dbtype:{type:String,required:!0},twidth:{type:String,default:"90%",required:!1}},methods:s()(s()({},Object(c["b"])("tables",{getDatas:"getTableQuery"})),{},{onRowClick:function(e,t){console.log("Row :",t),this.$emit("ok",t),this.hide()},show:function(){this.$refs.dialog.show()},hide:function(){this.$refs.dialog.hide()},onDialogHide:function(){this.$emit("hide")},onOKClick:function(){this.$emit("ok"),this.hide()},onCancelClick:function(){this.hide()}}),mounted:function(){var e=this;return r()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("Store context",e),console.log("DbName :",e.dbname),console.log("DbType :",e.dbtype);case 3:case"end":return t.stop()}}),t)})))()}}),p=m,f=i("2877"),_=i("24e8"),b=i("f09f"),h=i("a370"),g=i("d8472"),v=i("2c91"),q=i("9c40"),y=i("4b7e"),w=i("eebe"),C=i.n(w),x=Object(f["a"])(p,n,o,!1,null,null,null);t["a"]=x.exports;C()(x,"components",{QDialog:_["a"],QCard:b["a"],QCardSection:h["a"],QBar:g["a"],QSpace:v["a"],QBtn:q["a"],QCardActions:y["a"]})},c18b:function(e,t,i){"use strict";i.d(t,"s",(function(){return Sn})),i.d(t,"y",(function(){return Kn})),i.d(t,"q",(function(){return no})),i.d(t,"w",(function(){return U})),i.d(t,"b",(function(){return X})),i.d(t,"d",(function(){return re})),i.d(t,"m",(function(){return me})),i.d(t,"c",(function(){return ye})),i.d(t,"r",(function(){return Me})),i.d(t,"e",(function(){return Ue})),i.d(t,"x",(function(){return Je})),i.d(t,"f",(function(){return We})),i.d(t,"g",(function(){return ot})),i.d(t,"k",(function(){return dt})),i.d(t,"u",(function(){return bt})),i.d(t,"a",(function(){return Ct})),i.d(t,"p",(function(){return kt})),i.d(t,"h",(function(){return It})),i.d(t,"o",(function(){return zt})),i.d(t,"v",(function(){return Wt})),i.d(t,"t",(function(){return ai})),i.d(t,"l",(function(){return ui})),i.d(t,"n",(function(){return Ci})),i.d(t,"j",(function(){return hi})),i.d(t,"i",(function(){return ki}));var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-layout",{attrs:{view:"hHh LpR fFf"}},[n("q-drawer",{attrs:{"show-if-above":"",side:"left",bordered:""},model:{value:e.left,callback:function(t){e.left=t},expression:"left"}},[n("draggable",e._b({attrs:{list:e.sourceFields,clone:e.createField,sort:!1}},"draggable",e.sourceOptions,!1),[n("div",{staticClass:"text-left text-bold bg-blue-4 q-px-md q-py-sm"},[e._v("\n        COMPOSANTS FORM\n      ")]),e._l(e.sourceFields,(function(t,i){return n("div",{key:i,staticClass:"source-field q-gutter-sm row no-wrap"},[""!==t.type?n("q-btn",{staticClass:"btn-fixed-width",attrs:{type:"button",size:"12px",dense:"",align:"left",icon:t.icon,label:t.label},on:{click:function(i){return e.onAddFieldClick(t.type)}}}):e._e()],1)}))],2),n("q-separator",{staticClass:"q-my-md"}),n("div",{staticClass:"q-pa-none q-gutter-md"},[n("div",{staticClass:"row q-gutter-md q-px-none"},[n("q-btn",{attrs:{color:"primary",icon:"save",glossy:"","text-color":"white",dense:"","no-caps":"",label:"Enregistrer"},on:{click:function(t){return e.saveForm()}}},[n("q-tooltip",{attrs:{"content-class":"bg-amber-5 text-dark","content-style":"font-size: 1.2em"}},[n("div",{staticClass:"text-justify-center text-bold text-size-16"},[e._v("\n              Enregistrement du formulaire en cours "),n("br"),e._v("ou création d'un\n              nouveau\n            ")])])],1),n("q-btn",{attrs:{color:"primary",icon:"list",glossy:"","text-color":"white",dense:"","no-caps":"",label:"Formulaires"},on:{click:function(t){return e.onList()}}})],1),n("q-separator",{staticClass:"q-my-md"}),n("q-expansion-item",{staticClass:"text-center tex-bold bg-blue-3",attrs:{dense:"","expand-separator":"",icon:"perm_identity",label:"Champs cachés"}},[n("q-card",[e._l(e.hiddenFields,(function(t,i){return n("q-card-section",{key:i+"_hidden",staticClass:"q-py-none bg-blue-1"},[n("div",{staticClass:"row  q-px-none q-py-none"},[n("div",{staticClass:"col-12"},[n("div",{staticClass:"row text-left q-pa-none"},[n("q-chip",{attrs:{square:"",dense:"",icon:"hide_source"}},[e._v("\n            Caché\n          ")])],1),n("q-input",{attrs:{dense:"",placeholder:"nom du champ",label:"Nom du champ"},model:{value:t.label,callback:function(i){e.$set(t,"label",i)},expression:"hField.label"}}),n("q-input",{attrs:{dense:"",placeholder:"id du champ",label:"ID du champ","label-color":"negative"},model:{value:t.id,callback:function(i){e.$set(t,"id",i)},expression:"hField.id"}})],1)])])})),n("q-card-actions",{staticClass:"q-pa-xs justify-center"},[n("q-btn",{staticClass:"q-pa-none text-caption",attrs:{dense:"",flat:"",color:"primary","text-color":"primary",label:"Ajouter",icon:"add"},on:{click:function(t){return e.addHiddenField()}}})],1)],2)],1),n("q-expansion-item",{staticClass:"text-center tex-bold bg-blue-3",attrs:{dense:"",label:"Export/Import en JSON"}},[n("q-card",[n("q-card-section",[n("div",{staticClass:"row items-center"},[n("div",{staticClass:"col-6"},[n("q-btn",{staticClass:"q-pa-xs no-wrap",attrs:{dense:"",color:"primary",icon:"save_alt","no-caps":"",label:"Export "},on:{click:function(t){return e.exportToJSON()}}})],1),n("div",{staticClass:"col-6"},[n("q-file",{staticClass:"q-pa-none no-wrap",attrs:{dense:"",label:"Import ...",accept:".json, text/json",outlined:""},on:{input:function(t){return e.importFromJSON()}},scopedSlots:e._u([{key:"prepend",fn:function(){return[n("q-icon",{attrs:{dense:"",name:"file_upload"}})]},proxy:!0}]),model:{value:e.jsonFile,callback:function(t){e.jsonFile=t},expression:"jsonFile"}})],1)])])],1)],1)],1)],1),n("q-drawer",{attrs:{"show-if-above":"",side:"right",bordered:""},model:{value:e.right,callback:function(t){e.right=t},expression:"right"}},[n("div",{staticClass:"text-left text-bold bg-blue-4 q-px-md q-py-sm"},[e._v("\n      PROPRIETES\n    ")]),n("editable-element-options",{staticClass:"q-pa-sm",attrs:{"type-info":e.sourceFields,"fields-list":e.fields,submitOptions:e.submitOptions},model:{value:e.currentField,callback:function(t){e.currentField=t},expression:"currentField"}})],1),n("q-header",{staticClass:"bg-primary text-white",attrs:{unelevated:""}},[n("q-toolbar",{staticClass:"full-width"},[n("q-btn",{attrs:{dense:"",flat:"",round:"",icon:"menu"},on:{click:e.toggleLeftDrawer}}),n("q-toolbar-title",[n("q-avatar",[n("img",{staticClass:"bg-white",attrs:{src:i("cf05")}})]),e._v("\n        Créateur de formulaires ("+e._s(e.nameForm)+")\n      ")],1),n("q-btn",{staticClass:"q-mr-xs",attrs:{flat:"",round:"",dense:"",icon:"home"},on:{click:function(t){return e.$emit("goBack")}}}),n("q-btn",{staticClass:"q-mr-xs",attrs:{flat:"",round:"",dense:"",icon:"preview"},on:{click:function(t){return e.doShowPreview()}}},[n("q-tooltip",{attrs:{"content-class":"bg-amber text-dark","content-style":"font-size: 1.2em"}},[e._v("\n          Apercu de votre formulaire\n        ")])],1)],1)],1),n("q-page-container",[n("q-page",{directives:[{name:"show",rawName:"v-show",value:!e.showpreview,expression:"!showpreview"}],staticClass:"q-form-builder-page bg-white"},[n("draggable",{class:{"q-form-builder-elements-container":!0,empty:0==e.fields.length,row:!0,"q-gutter-none":!0},staticStyle:{width:"100%","max-width":"100%"},attrs:{options:e.destinationOptions},on:{change:e.onChange},model:{value:e.fields,callback:function(t){e.fields=t},expression:"fields"}},e._l(e.vFields,(function(t,i){return n("div",{key:i,class:t.span?"col-"+t.span+" editable-element-container":"col-auto editable-element-container"},[n("editable-element",{ref:e.fields[i].cid,refInFor:!0,class:{selected:e.isSelectedForEdit(i)},on:{click:e.selectForEdit},model:{value:e.fields[i],callback:function(t){e.$set(e.fields,i,t)},expression:"fields[idx]"}}),n("div",{staticClass:"editable-element-action-buttons"},[e.isSelectedForEdit(i)?n("q-btn",{staticClass:"editable-element-button",attrs:{color:"red",icon:"delete",round:"",size:"xs"},on:{click:function(t){return e.deleteField(i)}}},[n("q-tooltip",[e._v("Effacer ce champ")])],1):e._e(),e.isSelectedForEdit(i)?n("q-btn",{staticClass:"editable-element-button",attrs:{color:"primary",icon:"file_copy",round:"",size:"xs"},on:{click:function(t){return e.duplicateField(i)}}},[n("q-tooltip",[e._v("Dupliquer ce champ")])],1):e._e()],1)],1)})),0)],1),n("q-page",{directives:[{name:"show",rawName:"v-show",value:e.showpreview,expression:"showpreview"}],staticClass:"full-width bg-white"},[n("div",{staticClass:"q-gutter-md row"},[n("div",{staticClass:"q-gutter-none row"},e._l(e.vFields,(function(t,i){return n("div",{key:i,class:t.span?"col-"+t.span:"col-auto"},[n(e.getElement(t),{ref:t.cid,refInFor:!0,tag:"component",attrs:{disabled:"true",show_options:t.field_show_options,ofields:e.vFields,label:t.label,labelToolTip:t.labelToolTip,required:t.required,field_options:t.field_options,id:t.id,name:t.id,cid:t.cid,debounce:"500"}})],1)})),0)])])],1)],1)},o=[],a=i("6374"),r=i.n(a),l=(i("4de4"),i("d3b7"),i("cca6"),i("ac1f"),i("00b4"),i("1276"),i("fb6a"),i("a15b"),i("e9c4"),i("4d5a")),s=i("09e3"),c=i("9989"),d=i("9404"),u=i("7460"),m=i("429b"),p=i("823b"),f=i("adad"),_=i("05c0"),b=i("9c40"),h=i("068f"),g=i("1732"),v=i("11ec"),q=i("a357"),y=i("b76a"),w=i.n(y),C=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"q-editable-element"},[i("div",{staticClass:"overlay",on:{click:e.onClick}}),i(e.element,{tag:"component",attrs:{label:e.value.label,required:e.value.required,field_options:e.value.field_options,show_options:e.value.show_options,id:e.value.id,cid:e.value.cid,labelToolTip:e.value.labelToolTip}})],1)},x=[],E=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"q-px-sm  q-form-text q-form-builder-element"},[i("q-input",e._b({ref:e.id,staticClass:"q-pb-md",attrs:{"label-slot":"",debounce:e.debounce,rules:e.getRules(),name:e.id,mask:e.mask},scopedSlots:e._u([{key:"label",fn:function(){return[i("div",{staticClass:"row items-center all-pointer-events text-h6"},[e._v("\n        "+e._s(e.getLabel)+"\n\n       "),e.labelToolTip&&""!=e.labelToolTip?i("q-tooltip",{attrs:{"content-class":"bg-amber text-dark","content-style":"text-15",anchor:"top left",self:"bottom left",offset:[0,8]}},[e._v("\n          "+e._s(e.labelToolTip)+"\n        ")]):e._e()],1)]},proxy:!0}]),model:{value:e.innerValue,callback:function(t){e.innerValue=t},expression:"innerValue"}},"q-input",e.field_options,!1)),e.hint?i("div",{staticClass:"text-caption text-italic q-pa-none",domProps:{innerHTML:e._s(e.hint)}}):e._e()],1)},O=[];i("a9e3"),i("a4d3"),i("e01a"),i("99af"),i("5319");function F(e){switch(e){case"checkboxes":case"radio":return{options:[],include_other_option:!1,description:""};case"dropdown":return{options:[],description:""};default:return{description:"",span:12,filled:!1,"stack-label":!1}}}function M(e){switch(e){case"section_break":return"";default:return"Inconnue"}}function k(e){return e.replace(/(?:\r\n|\r|\n)/g,"<br>")}var S={props:{value:{},span:{type:Number,required:!1,default:12},label:{type:String},labelToolTip:{type:String},required:{type:Boolean,default:!0},show_options:{type:Array,required:!1},field_options:{type:Object,required:!1,default:function(){return{description:!1,filled:!1,"stack-label":!1}}},cid:{},id:{},mask:{type:String},debounce:{default:200}},data:function(){return{innerValue:this.value,hasError:!1,errors:[]}},watch:{value:{handler:function(e){this.innerValue=e},deep:!0},innerValue:{handler:function(e){this.$emit("input",e,this.id)},deep:!0}},computed:{getLabel:function(){return this.required?"".concat(this.label," *"):this.label},hint:function(){return this.field_options&&this.field_options.description?k(this.field_options.description):""},getTooltip:function(){return this.labelToolTip,this.labelToolTip},rules:function(){return[]}},methods:{getRules:function(e,t){var i=function(e){return!!e||"Ce champ est obligatoire."};return e?Object.prototype.hasOwnProperty.call(this.rules,e)?t?this.rules[e].concat(i):this.rules[e]:t?[i]:[]:this.required?this.rules.concat(i):this.rules},validate:function(){for(var e in this.errors=[],this.$refs)"function"===typeof this.$refs[e].validate&&(this.$refs[e].validate(),this.$refs[e].hasError&&this.errors.push({id:this.$refs[e].innerErrorMessage}));this.hasError=this.errors.length>0}}},j=i("27f9"),D={name:"TextElement",extends:S,components:{QInput:j["a"],QTooltip:_["a"]}},R=D,T=i("2877"),Q=i("0378"),I=i("eebe"),A=i.n(I),L=Object(T["a"])(R,E,O,!1,null,null,null),U=L.exports;A()(L,"components",{QForm:Q["a"],QInput:j["a"],QTooltip:_["a"]});var N=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"q-px-sm q-form-dropdown q-form-builder-element"},[i("div",{staticClass:"col-12 col-md-6 col-lg-3"},[i("q-select",{ref:e.id+"_cacemuser",attrs:{value:e.innerValue,options:e.uoptions,"label-slot":!0,rules:e.getRules(),clearable:"","options-selected-class":"text-deep-orange","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0","options-sanitize":!1,"option-value":function(e){return null===e?null:e},"option-label":function(e){return null===e?null:""+e},"emit-value":"","map-options":"",filled:e.field_options.filled},on:{clear:function(t){e.innerValue=""},input:e.changeModel,filter:e.filterFn},scopedSlots:e._u([{key:"prepend",fn:function(e){return[i("q-avatar",{staticClass:"shadow-1",attrs:{icon:"person"}})]}},{key:"label",fn:function(){return[i("div",{staticClass:"text-h6"},[e._v(e._s(e.getLabel))])]},proxy:!0},{key:"option",fn:function(t){return[i("q-item",e._g(e._b({},"q-item",t.itemProps,!1),t.itemEvents),[i("q-item-section",{attrs:{avatar:""}},[i("img",{staticStyle:{height:"40px","max-width":"80px"},attrs:{src:t.opt.ThumbnailPhoto}})]),i("q-item-section",[i("q-item-label",[e._v(e._s(t.opt.Name))]),i("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.opt.mail))])],1)],1)]}},{key:"selected-item",fn:function(t){return[i("q-avatar",[i("img",{staticStyle:{height:"50px","max-width":"80px"},attrs:{src:t.opt.ThumbnailPhoto}})]),e._v("\n          "+e._s(t.opt.DisplayName)+"\n      ")]}}])}),e.hint?i("p",{staticClass:"text-caption text-italic q-pa-none",domProps:{innerHTML:e._s(e.hint)}}):e._e()],1)])},B=[],P=i("c973"),V=i.n(P),$=(i("96cf"),i("c975"),i("7db0"),i("5494")),z=i("ddd8"),J={name:"CacemusersElement",extends:S,data:function(){return{users:null,model:null,uoptions:[]}},components:{QSelect:z["a"]},methods:{abortFilterFn:function(){},filterFn:function(e,t,i){var n=this;t((function(){var t=e.toLocaleLowerCase();console.log("Ref :",n.users.filter((function(e){return e.Name.toLocaleLowerCase().indexOf(t)>-1}))),n.uoptions=n.users.filter((function(e){return e.Name.toLocaleLowerCase().indexOf(t)>-1}))}))},selectOption:function(e){console.log("Option :",e),this.model=e.opt.mail},setModel:function(e){console.log("Model :",e),this.innerValue=e},changeModel:function(e){console.log("Display val :",this.innerValue),console.log("Model val ",e),console.log("Comp :",this.$refs["".concat(this.id,"_cacemuser")]);var t=e;Object(e).hasOwnProperty("DisplayName")&&(this.innerValue="".concat(e.DisplayName," [poste: ").concat(t.IPPhone,"] (").concat(String(t.mail).toLowerCase(),")"))},getNewModel:function(e,t){console.log("Model val :",e),t(e,"add-unique")}},beforeMount:function(){var e=this;return V()(regeneratorRuntime.mark((function t(){var i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=3,$["c"].service("tables").find({query:{tableDb:"cacemdb",tableName:"ad-users",query:JSON.stringify({query:{}})}});case 3:i=t.sent,e.users=i?i.filter((function(e){return"true"==e.Enabled})):null,t.next=11;break;case 7:return t.next=9,$["c"].service("tables").find({query:{tableDb:"cacemdb",tableName:"ad-users",query:JSON.stringify({query:{}})}});case 9:n=t.sent,e.users=Array.isArray(n)?n.filter((function(e){return"true"==e.Enabled})):null;case 11:e.users&&(console.log("Liste des utilisateurs :",e.users.length),e.uoptions=e.users);case 12:case"end":return t.stop()}}),t)})))()}},H=J,Y=i("cb32"),Z=i("66e5"),G=i("4074"),K=i("0170"),W=Object(T["a"])(H,N,B,!1,null,null,null),X=W.exports;A()(W,"components",{QForm:Q["a"],QSelect:z["a"],QAvatar:Y["a"],QItem:Z["a"],QItemSection:G["a"],QItemLabel:K["a"]});var ee=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"q-px-sm q-form-dropdown q-form-builder-element"},[i("div",{staticClass:"col-12 col-md-6 col-lg-3"},[i("q-select",e._b({ref:e.id+"_commune",attrs:{value:e.innerValue,options:e.coptions,"label-slot":!0,rules:e.getRules(),"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0","options-sanitize":!1,"option-label":function(e){return null===e?null:e},"option-value":function(e){return null===e?null:e},"emit-value":"","options-dense":""},on:{filter:e.filterFn,"input-value":e.setModel},scopedSlots:e._u([{key:"prepend",fn:function(){return[i("q-avatar",{staticClass:"shadow-1",attrs:{icon:"home"}})]},proxy:!0},{key:"label",fn:function(){return[i("div",{staticClass:"text-h6"},[e._v(e._s(e.getLabel))])]},proxy:!0}])},"q-select",e.field_options,!1)),e.hint?i("p",{staticClass:"text-caption text-italic q-pa-none",domProps:{innerHTML:e._s(e.hint)}}):e._e()],1)])},te=[],ie=(i("d81d"),i("7ae3")),ne={name:"CommunesElement",extends:S,data:function(){return{communes:ie.map((function(e){return"".concat(e.fields.com_nom)})),coptions:[]}},components:{QSelect:z["a"]},methods:{filterFn:function(e,t,i){var n=this;t((function(){console.log("Val filter :",e);var t=e.toLocaleLowerCase();n.coptions=n.communes.filter((function(e){return e.toLocaleLowerCase().indexOf(t)>-1})),console.log("Ref :",n.coptions)}))},setModel:function(e){console.log("Model :",e),this.innerValue=e}},beforeMount:function(){var e=this;return V()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("Liste des communes :",e.communes),e.coptions=e.communes;case 2:case"end":return t.stop()}}),t)})))()}},oe=ne,ae=Object(T["a"])(oe,ee,te,!1,null,null,null),re=ae.exports;A()(ae,"components",{QForm:Q["a"],QSelect:z["a"],QAvatar:Y["a"]});var le=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"q-px-sm q-form-paragraph q-form-builder-element"},[i("q-input",e._b({ref:e.id,attrs:{"label-slot":"",type:"textarea",debounce:e.debounce,rules:e.getRules()},scopedSlots:e._u([{key:"label",fn:function(){return[i("div",{staticClass:"row items-center all-pointer-events text-h6"},[e._v("\n        "+e._s(e.getLabel)+"\n\n       "),e.labelToolTip&&""!=e.labelToolTip?i("q-tooltip",{attrs:{"content-class":"bg-amber text-dark","content-style":"text-15",anchor:"top left",self:"bottom left",offset:[0,8]}},[e._v("\n          "+e._s(e.labelToolTip)+"\n        ")]):e._e()],1)]},proxy:!0}]),model:{value:e.innerValue,callback:function(t){e.innerValue=t},expression:"innerValue"}},"q-input",e.field_options,!1)),e.hint?i("p",{staticClass:"text-caption",domProps:{innerHTML:e._s(e.hint)}}):e._e()],1)},se=[],ce={name:"ParagraphElement",extends:S,components:{QInput:j["a"]}},de=ce,ue=Object(T["a"])(de,le,se,!1,null,null,null),me=ue.exports;A()(ue,"components",{QForm:Q["a"],QInput:j["a"],QTooltip:_["a"]});var pe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"q-px-sm q-form-checkbox q-form-builder-element"},[i("div",{staticClass:"row"},[i("label",{class:e.hasError?"text-negative":""},[e._v(e._s(e.getLabel))])]),i("div",{staticClass:"row"},[i("q-list",{attrs:{dense:""}},[i("q-item",[i("q-option-group",{ref:e.id,attrs:{type:"checkbox",options:e.allOptions,"keep-color":"",color:e.hasError?"red":""},on:{input:e.onUpdate},model:{value:e.selectedValues,callback:function(t){e.selectedValues=t},expression:"selectedValues"}})],1),e.includeOther?i("q-item",{attrs:{dense:""}},[i("q-item-section",{attrs:{avatar:""}},[i("q-checkbox",{ref:"checkbox-other-"+e.id,attrs:{label:"Autre :","keep-color":"",color:e.hasError?"red":""},on:{input:e.onUpdate},model:{value:e.selectedOther,callback:function(t){e.selectedOther=t},expression:"selectedOther"}})],1),i("q-item-section",{attrs:{left:""}},[i("q-input",{ref:"other-"+e.id,attrs:{dense:"",disable:!e.selectedOther},on:{input:e.onUpdate},model:{value:e.selectedOtherValue,callback:function(t){e.selectedOtherValue=t},expression:"selectedOtherValue"}})],1)],1):e._e()],1)],1),i("div",{staticClass:"row"},[e._l(e.errors,(function(t,n){return i("p",{key:n,staticClass:"text-negative text-caption"},[e._v(e._s(t))])})),e.hint?i("p",{staticClass:"text-caption  text-italic q-pa-none",domProps:{innerHTML:e._s(e.hint)}}):e._e()],2)])},fe=[],_e=i("8f8e"),be=i("9f0a"),he=i("1c1c"),ge={name:"CheckboxesElement",extends:S,components:{QCheckbox:_e["a"],QOptionGroup:be["a"],QInput:j["a"],QList:he["a"],QItem:Z["a"],QItemSection:G["a"]},props:{field_options:{type:Object,required:!1,default:function(){return{description:!1,options:[]}}}},data:function(){return{hasError:!1,errors:[],selectedValues:this.defaultSelectedValues(),selectedOther:this.defaultSelectedOther().checked,selectedOtherValue:this.defaultSelectedOther().label}},computed:{allOptions:function(){return this.field_options.options.map((function(e){return{label:e.label,value:e.label}}))},includeOther:function(){return!!this.field_options.include_other_option}},methods:{defaultSelectedValues:function(){var e=[];if(this.value&&Array.isArray(this.value))e=this.value;else{var t,i=r()(this.getOptions());try{for(i.s();!(t=i.n()).done;){var n=t.value;n.checked&&e.push(n.label)}}catch(o){i.e(o)}finally{i.f()}}return e},defaultSelectedOther:function(){if(this.value&&Array.isArray(this.value)){var e,t=this.value.slice(-1)[0],i=r()(this.getOptions());try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n.label===t)return{checked:!1,label:""}}}catch(o){i.e(o)}finally{i.f()}return{checked:!0,label:t}}return{checked:!1,label:""}},getOptions:function(){return this.field_options&&this.field_options.options?this.field_options.options:{}},setInnerValue:function(){var e=[];e=this.selectedValues.slice(0),this.selectedOther&&e.push(this.selectedOtherValue),this.innerValue=e},onUpdate:function(){this.setInnerValue(),this.validate()},validate:function(){this.hasError=!1,this.errors=[],this.required&&!this.innerValue.length&&this.allOptions.length&&(this.hasError=!0,this.allOptions.length>1?this.errors.push("Svp choisissez une option."):this.errors.push("Svp sélectionnez l'option requise."))}},watch:{field_options:{handler:function(){this.selectedValues=this.defaultSelectedValues()},deep:!0}},mounted:function(){this.setInnerValue()}},ve=ge,qe=Object(T["a"])(ve,pe,fe,!1,null,null,null),ye=qe.exports;A()(qe,"components",{QForm:Q["a"],QList:he["a"],QItem:Z["a"],QOptionGroup:be["a"],QItemSection:G["a"],QCheckbox:_e["a"],QInput:j["a"]});var we=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"q-px-sm q-form-radio q-form-builder-element"},[i("div",{staticClass:"row"},[i("label",{class:e.hasError?"text-negative":""},[e._v(e._s(e.getLabel))])]),i("div",{staticClass:"row"},[i("q-list",{attrs:{dense:""}},[i("q-item",{attrs:{dense:""}},[i("q-option-group",{ref:e.id,attrs:{type:"radio",options:e.allOptions,"keep-color":"",color:e.hasError?"red":""},on:{input:e.validate},model:{value:e.innerValue,callback:function(t){e.innerValue=t},expression:"innerValue"}})],1),e.includeOther?i("q-item",{attrs:{dense:""}},[i("q-item-section",{attrs:{avatar:""}},[i("q-radio",{ref:"radio-other-"+e.id,attrs:{label:"Autre :",val:e.otherOptionVal,"keep-color":"",color:e.hasError?"red":""},on:{input:e.validate},model:{value:e.innerValue,callback:function(t){e.innerValue=t},expression:"innerValue"}})],1),i("q-item-section",{attrs:{left:""}},[i("q-input",{ref:"other-"+e.id,attrs:{dense:"",disable:!e.otherSelected},on:{input:e.otherValueUpdated},model:{value:e.otherOptionVal,callback:function(t){e.otherOptionVal=t},expression:"otherOptionVal"}})],1)],1):e._e()],1)],1),i("div",{staticClass:"row"},[e._l(e.errors,(function(t,n){return i("p",{key:n,staticClass:"text-negative text-caption"},[e._v(e._s(t))])})),e.hint?i("p",{staticClass:"text-caption  text-italic q-pa-none",domProps:{innerHTML:e._s(e.hint)}}):e._e()],2)])},Ce=[],xe=i("3786"),Ee={name:"RadioElement",extends:S,components:{QRadio:xe["a"],QOptionGroup:be["a"],QInput:j["a"],QList:he["a"],QItem:Z["a"],QItemSection:G["a"]},props:{value:{default:function(){}},field_options:{type:Object,required:!1,default:function(){return{description:!1,options:[]}}}},data:function(){return{otherOptionVal:null}},computed:{allOptions:function(){return this.field_options&&this.field_options.options?this.field_options.options.map((function(e){return{label:e.label,value:e.label}})):[]},includeOther:function(){return!!this.field_options.include_other_option},otherSelected:function(){var e=this.field_options.options.map((function(e){return e.label}));return e.indexOf(this.innerValue)<0}},methods:{otherValueUpdated:function(e){this.innerValue=e,this.validate()},validate:function(){this.hasError=!1,this.errors=[],this.required&&!this.innerValue&&(this.hasError=!0,this.errors.push("Svp sélectionner une option."))}}},Oe=Ee,Fe=(i("b4ac"),Object(T["a"])(Oe,we,Ce,!1,null,null,null)),Me=Fe.exports;A()(Fe,"components",{QForm:Q["a"],QList:he["a"],QItem:Z["a"],QOptionGroup:be["a"],QItemSection:G["a"],QRadio:xe["a"],QInput:j["a"]});var ke=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"q-px-sm q-form-date q-form-builder-element"},[i("div",{staticClass:"col-12 col-md-6"},[i("q-input",e._b({ref:e.id,attrs:{mask:"##/##/####","label-slot":"",debounce:e.debounce,rules:e.getRules(),name:e.id},scopedSlots:e._u([{key:"label",fn:function(){return[i("div",{staticClass:"row items-center all-pointer-events text-h6"},[e._v("\n          "+e._s(e.getLabel)+"\n        ")])]},proxy:!0},{key:"append",fn:function(){return[i("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[i("q-popup-proxy",[i("q-date",{attrs:{mask:"DD/MM/YYYY"},model:{value:e.innerValue,callback:function(t){e.innerValue=t},expression:"innerValue"}},[i("div",{staticClass:"row items-center justify-end"},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Fermer",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.innerValue,callback:function(t){e.innerValue=t},expression:"innerValue"}},"q-input",e.field_options,!1)),e.hint?i("p",{staticClass:"text-caption  text-italic q-pa-none",domProps:{innerHTML:e._s(e.hint)}}):e._e()],1)])},Se=[],je=i("0016"),De=i("7cbe"),Re=i("52ee"),Te=i("bd4c"),Qe={name:"DateElement",extends:S,components:{QInput:j["a"],QIcon:je["a"],QPopupProxy:De["a"],QDate:Re["a"]},data:function(){return{initDate:Te["b"].formatDate(Date.now(),"DD/MM/YYYY")}},computed:{rules:function(){return["DD/MM/YYYY"]}},mounted:function(){this.innerValue||(this.innerValue=this.initDate)}},Ie=Qe,Ae=i("7f67"),Le=Object(T["a"])(Ie,ke,Se,!1,null,null,null),Ue=Le.exports;A()(Le,"components",{QForm:Q["a"],QInput:j["a"],QIcon:je["a"],QPopupProxy:De["a"],QDate:Re["a"],QBtn:b["a"]}),A()(Le,"directives",{ClosePopup:Ae["a"]});var Ne=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"q-px-sm q-form-time q-form-builder-element"},[i("div",{staticClass:"col-12 col-md-6"},[i("q-input",e._b({ref:e.id,attrs:{mask:"time","label-slot":"",debounce:e.debounce,rules:e.getRules(),name:e.id},scopedSlots:e._u([{key:"label",fn:function(){return[i("div",{staticClass:"row items-center all-pointer-events text-h6"},[e._v("\n          "+e._s(e.getLabel)+"\n        ")])]},proxy:!0},{key:"append",fn:function(){return[i("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[i("q-popup-proxy",[i("q-time",{model:{value:e.innerValue,callback:function(t){e.innerValue=t},expression:"innerValue"}},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Fermer",color:"primary",flat:""}})],1)],1)],1)]},proxy:!0}]),model:{value:e.innerValue,callback:function(t){e.innerValue=t},expression:"innerValue"}},"q-input",e.field_options,!1)),e.hint?i("p",{staticClass:"text-caption  text-italic q-pa-none",domProps:{innerHTML:e._s(e.hint)}}):e._e()],1)])},Be=[],Pe=i("ca78"),Ve={name:"TimeElement",extends:S,components:{QInput:j["a"],QIcon:je["a"],QPopupProxy:De["a"],QTime:Pe["a"]},data:function(){return{initTime:Te["b"].formatDate(Date.now(),"HH:mm")}},computed:{rules:function(){return["time"]}},mounted:function(){this.innerValue||(this.innerValue=this.initTime)}},$e=Ve,ze=Object(T["a"])($e,Ne,Be,!1,null,null,null),Je=ze.exports;A()(ze,"components",{QForm:Q["a"],QInput:j["a"],QIcon:je["a"],QPopupProxy:De["a"],QTime:Pe["a"],QBtn:b["a"]}),A()(ze,"directives",{ClosePopup:Ae["a"]});var He=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"q-px-sm q-form-dropdown q-form-builder-element"},[i("div",{staticClass:"col-12 col-md-6 col-lg-3"},[i("q-select",e._b({ref:e.id,attrs:{options:e.allOptions,label:e.getLabel,rules:e.getRules(),"emit-value":"","map-options":""},scopedSlots:e._u([{key:"label",fn:function(){return[i("div",{staticClass:"text-h6"},[e._v(e._s(e.getLabel))])]},proxy:!0}]),model:{value:e.innerValue,callback:function(t){e.innerValue=t},expression:"innerValue"}},"q-select",e.field_options,!1)),e.hint?i("p",{staticClass:"text-caption text-italic q-pa-none",domProps:{innerHTML:e._s(e.hint)}}):e._e()],1)])},Ye=[],Ze={name:"DropdownElement",extends:S,components:{QSelect:z["a"]},computed:{allOptions:function(){return this.field_options.options.map((function(e){return{label:e.label,value:e.label}}))}}},Ge=Ze,Ke=Object(T["a"])(Ge,He,Ye,!1,null,null,null),We=Ke.exports;A()(Ke,"components",{QForm:Q["a"],QSelect:z["a"]});var Xe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"q-px-sm q-form-email q-form-builder-element"},[i("div",{staticClass:"col-12 col-md-6"},[i("q-input",{ref:e.id,attrs:{type:"email",label:e.getLabel,debounce:e.debounce,rules:e.getRules()},scopedSlots:e._u([{key:"append",fn:function(){return[i("q-icon",{attrs:{name:"email"}})]},proxy:!0}]),model:{value:e.innerValue,callback:function(t){e.innerValue=t},expression:"innerValue"}}),e.hint?i("p",{staticClass:"text-caption  text-italic q-pa-none",domProps:{innerHTML:e._s(e.hint)}}):e._e()],1)])},et=[],tt={name:"EmailElement",extends:S,components:{QInput:j["a"],QIcon:je["a"]},computed:{rules:function(){return["email"]}}},it=tt,nt=Object(T["a"])(it,Xe,et,!1,null,null,null),ot=nt.exports;A()(nt,"components",{QForm:Q["a"],QInput:j["a"],QIcon:je["a"]});var at=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"q-px-sm q-form-name q-form-builder-element"},[e.getLabel?i("div",{staticClass:"row"},[i("div",{staticClass:"col-12"},[i("label",[e._v(e._s(e.getLabel))])])]):e._e(),i("div",{staticClass:"row q-gutter-md"},[i("div",{staticClass:"col-md-5"},[i("q-input",{ref:e.id+"_first",attrs:{label:"Nom ",dense:"",debounce:e.debounce,rules:e.getRules("first",e.required)},model:{value:e.innerValue.first,callback:function(t){e.$set(e.innerValue,"first",t)},expression:"innerValue.first"}})],1),i("div",{staticClass:"col-md-5"},[i("q-input",{ref:e.id+"_last",attrs:{label:"Prénom ",dense:"",debounce:e.debounce,rules:e.getRules("last",e.required)},model:{value:e.innerValue.last,callback:function(t){e.$set(e.innerValue,"last",t)},expression:"innerValue.last"}})],1)]),e.hint?i("div",{staticClass:"row"},[i("p",{staticClass:"col-12 text-caption  text-italic q-pa-none",domProps:{innerHTML:e._s(e.hint)}})]):e._e()])},rt=[],lt={name:"NameElement",extends:S,components:{QInput:j["a"],QSelect:z["a"]},props:{value:{type:Object,default:function(){return{first:null,last:null}}}},computed:{titleOptions:function(){return["Mr.","Mrs.","Ms.","Dr."]}}},st=lt,ct=Object(T["a"])(st,at,rt,!1,null,null,null),dt=ct.exports;A()(ct,"components",{QForm:Q["a"],QSelect:z["a"],QInput:j["a"]});var ut=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"q-form-simple-name q-form-builder-element"},[e.getLabel?i("div",{staticClass:"row"},[i("div",{staticClass:"col-12"},[i("label",[e._v(e._s(e.getLabel))])])]):e._e(),i("div",{staticClass:"row q-col-gutter-sm"},[i("div",{staticClass:"col-12 col-md-6"},[i("q-input",{ref:e.id+"_first",attrs:{dense:"",placeholder:"Nom",debounce:e.debounce,rules:e.getRules("first",e.required)},model:{value:e.innerValue.first,callback:function(t){e.$set(e.innerValue,"first",t)},expression:"innerValue.first"}})],1),i("div",{staticClass:"col-12 col-md-6"},[i("q-input",{ref:e.id+"_last",attrs:{dense:"",placeholder:"Prenom",debounce:e.debounce,rules:e.getRules("last",e.required)},model:{value:e.innerValue.last,callback:function(t){e.$set(e.innerValue,"last",t)},expression:"innerValue.last"}})],1)]),e.hint?i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 text-caption",domProps:{innerHTML:e._s(e.hint)}})]):e._e()])},mt=[],pt={name:"SimpleNameElement",extends:S,components:{QInput:j["a"]},props:{value:{type:Object,default:function(){return{first:null,last:null}}}}},ft=pt,_t=Object(T["a"])(ft,ut,mt,!1,null,null,null),bt=_t.exports;A()(_t,"components",{QForm:Q["a"],QInput:j["a"]});var ht=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"q-px-sm q-form-address q-form-builder-element"},[e.getLabel?i("div",{staticClass:"row"},[i("div",{staticClass:"col-12"},[i("label",[e._v(e._s(e.getLabel))])])]):e._e(),i("div",{staticClass:"row q-col-gutter-sm"},[i("div",{staticClass:"col-12"},[i("q-input",{ref:e.id+"_street",attrs:{label:"Street",debounce:e.debounce,rules:e.getRules("street",e.required)},model:{value:e.innerValue.address,callback:function(t){e.$set(e.innerValue,"address",t)},expression:"innerValue.address"}})],1)]),i("div",{staticClass:"row q-col-gutter-sm"},[i("div",{staticClass:"col-12 col-md-6"},[i("q-input",{ref:e.id+"_city",attrs:{label:"City",debounce:e.debounce,rules:e.getRules("city",e.required)},model:{value:e.innerValue.city,callback:function(t){e.$set(e.innerValue,"city",t)},expression:"innerValue.city"}})],1),i("div",{staticClass:"col-12 col-md-6"},[i("q-input",{ref:e.id+"_state",attrs:{label:"State/Province/Region",debounce:e.debounce,rules:e.getRules("state",e.required)},model:{value:e.innerValue.state,callback:function(t){e.$set(e.innerValue,"state",t)},expression:"innerValue.state"}})],1)]),i("div",{staticClass:"row q-col-gutter-sm"},[i("div",{staticClass:"col-12 col-md-6"},[i("q-input",{ref:e.id+"_zip",attrs:{label:"Zip/Postal Code",rules:e.getRules("zip",e.required)},model:{value:e.innerValue.zip,callback:function(t){e.$set(e.innerValue,"zip",t)},expression:"innerValue.zip"}})],1),i("div",{staticClass:"col-12 col-md-6"},[i("q-select",{ref:e.id+"_country",attrs:{options:e.countries,label:"Country",debounce:e.debounce,rules:e.getRules("country",e.required)},model:{value:e.innerValue.country,callback:function(t){e.$set(e.innerValue,"country",t)},expression:"innerValue.country"}})],1)]),e.hint?i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 text-caption  text-italic q-pa-none",domProps:{innerHTML:e._s(e.hint)}})]):e._e()])},gt=[],vt=i("6edf"),qt={name:"AddressElement",extends:S,components:{QInput:j["a"],QSelect:z["a"]},props:{value:{type:Object,default:function(){return{address:null,city:null,state:null,zip:null,country:null}}}},computed:{countries:function(){return vt}}},yt=qt,wt=Object(T["a"])(yt,ht,gt,!1,null,null,null),Ct=wt.exports;A()(wt,"components",{QForm:Q["a"],QInput:j["a"],QSelect:z["a"]});var xt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"q-px-sm q-form-phone q-form-builder-element"},[i("div",{staticClass:"col-12 col-md-6 col-lg-3"},[i("q-input",{ref:e.id,attrs:{type:"tel",label:e.getLabel,mask:"(###) ### - ####",debounce:e.debounce,rules:e.getRules()},scopedSlots:e._u([{key:"append",fn:function(){return[i("q-icon",{attrs:{name:"phone"}})]},proxy:!0}]),model:{value:e.innerValue,callback:function(t){e.innerValue=t},expression:"innerValue"}}),e.hint?i("p",{staticClass:"text-caption",domProps:{innerHTML:e._s(e.hint)}}):e._e()],1)])},Et=[],Ot={name:"PhoneElement",extends:S,components:{QInput:j["a"],QIcon:je["a"]}},Ft=Ot,Mt=Object(T["a"])(Ft,xt,Et,!1,null,null,null),kt=Mt.exports;A()(Mt,"components",{QForm:Q["a"],QInput:j["a"],QIcon:je["a"]});var St=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"q-form-file-upload q-form-builder-element"},[i("div",{staticClass:"q-px-sm"},[i("div",{staticClass:"col-12 col-md-6"},[e.innerValue?e._e():i("q-uploader",{ref:e.id,staticClass:"uploader-hidden",attrs:{accept:".jpg, .pdf, image/*",url:e.uploadPath,label:e.getLabel,"field-name":"uri",color:"white",flat:"",square:""},on:{added:e.addFiles,uploading:e.onStartUpload,uploaded:e.onUpload}}),e.innerValue?e._e():i("q-btn",{staticClass:"full-width",attrs:{"icon-right":"cloud_upload",label:e.buttonLabel,color:e.buttonColor,disable:e.imgUploading,align:"between"},on:{click:function(t){return e.pickFiles()}}}),e.innerValue?i("q-img",{staticClass:"upload-display",attrs:{contain:"",src:e.imgRef},on:{error:e.onImgLoadError}},[i("div",{staticClass:"absolute-top text-subtitle2"},[e._v("\n          "+e._s(e.getLabel)+"\n          "),i("span",{staticClass:"float-right"},[i("q-btn",{attrs:{flat:"",round:"",size:"sm",icon:"open_in_new"},on:{click:e.viewOriginal}},[i("q-tooltip",[e._v("View Original")])],1),i("q-btn",{attrs:{flat:"",round:"",size:"sm",icon:"delete"},on:{click:e.unsetUpload}},[i("q-tooltip",[e._v("Remove")])],1)],1)]),e.imgLoadFailed?i("div",{staticClass:"absolute-bottom text-subtitle1 text-center"},[e._v("\n          No Preview Available\n        ")]):e._e()]):e._e()],1)]),e._l(e.errors,(function(t,n){return i("p",{key:n,staticClass:"col-12 col-md-6 text-negative text-caption"},[e._v(e._s(t))])})),e.hint?i("div",{staticClass:"row q-col-gutter-sm"},[i("p",{staticClass:"col-12 col-md-6 text-caption  text-italic q-pa-none",domProps:{innerHTML:e._s(e.hint)}})]):e._e()],2)},jt=[],Dt=i("ee89"),Rt={name:"FileElement",extends:S,components:{QUploader:Dt["a"],QImg:h["a"],QBtn:b["a"],QTooltip:_["a"]},data:function(){return{imgLoadFailed:!1,imgUploading:!1}},props:{uploadPath:{type:String,default:"".concat(window.location.origin,"/uploads")}},methods:{pickFiles:function(){this.$refs[this.id].pickFiles()},addFiles:function(e){console.log("File :",e),this.innerValue=e[0].name},onStartUpload:function(){this.imgUploading=!0},onUpload:function(e){console.log("File to upload :",e),this.imgUploading=!1,this.innerValue=JSON.parse(e.xhr.response),this.validate()},unsetUpload:function(){this.innerValue=!1},viewOriginal:function(){window.open("/assets/".concat(this.innerValue),"_blank")},onImgLoadError:function(){this.imgLoadFailed=!0},validate:function(){this.errors=[],this.required&&!this.innerValue&&this.errors.push("This field is required."),this.hasError=this.errors.length>0}},computed:{imgRef:function(){return this.imgLoadFailed?i("439a"):"/assets/".concat(this.innerValue)},buttonColor:function(){return this.hasError?"negative":"grey-7"},buttonLabel:function(){return this.imgUploading?"Uploading...":this.getLabel}}},Tt=Rt,Qt=(i("ea54"),Object(T["a"])(Tt,St,jt,!1,null,null,null)),It=Qt.exports;A()(Qt,"components",{QForm:Q["a"],QUploader:Dt["a"],QBtn:b["a"],QImg:h["a"],QTooltip:_["a"]});var At=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"q-form-payment q-form-builder-element"},[e.getLabel?i("div",{staticClass:"row"},[i("div",{staticClass:"col-12"},[i("label",[e._v(e._s(e.getLabel))])])]):e._e(),i("div",{staticClass:"row q-col-gutter-sm"},[i("div",{staticClass:"col-12 col-md-6"},[i("q-input",{ref:e.id+"_ccname",attrs:{label:"Name on card",debounce:e.debounce,rules:e.getRules("ccname",e.required)},model:{value:e.innerValue.ccname,callback:function(t){e.$set(e.innerValue,"ccname",t)},expression:"innerValue.ccname"}})],1)]),i("div",{staticClass:"row q-col-gutter-sm"},[i("div",{staticClass:"col-12 col-md-6"},[i("q-input",{ref:e.id+"_ccnum",attrs:{label:"Card number","fill-mask":"#",debounce:e.debounce,rules:e.getRules("ccnum",e.required)},model:{value:e.innerValue.ccnum,callback:function(t){e.$set(e.innerValue,"ccnum",t)},expression:"innerValue.ccnum"}})],1)]),i("div",{staticClass:"row q-col-gutter-sm"},[i("div",{staticClass:"col-12 col-sm-6 col-md-3"},[i("q-select",{ref:e.id+"_expmonth",attrs:{options:e.expmonths,label:"Exp. Month",debounce:e.debounce,rules:e.getRules("expmonth",e.required)},model:{value:e.innerValue.expmonth,callback:function(t){e.$set(e.innerValue,"expmonth",t)},expression:"innerValue.expmonth"}})],1),i("div",{staticClass:"col-12 col-sm-6 col-md-3"},[i("q-select",{ref:e.id+"_expyear",attrs:{options:e.expyears,label:"Exp. Year",debounce:e.debounce,rules:e.getRules("expyear",e.required)},model:{value:e.innerValue.expyear,callback:function(t){e.$set(e.innerValue,"expyear",t)},expression:"innerValue.expyear"}})],1)]),i("div",{staticClass:"row q-col-gutter-sm"},[i("div",{staticClass:"col-12 col-sm-6 col-md-3"},[i("q-input",{ref:e.id+"_cvv",attrs:{label:"CVV","fill-mask":"#",hint:"3 or 4 digit code on back of card",maxlength:"4",debounce:e.debounce,rules:e.getRules("cvv",e.required)},model:{value:e.innerValue.cvv,callback:function(t){e.$set(e.innerValue,"cvv",t)},expression:"innerValue.cvv"}})],1)]),e.hint?i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 text-caption",domProps:{innerHTML:e._s(e.hint)}})]):e._e()])},Lt=[],Ut=i("448a"),Nt=i.n(Ut),Bt=i("e5a6"),Pt={name:"PaymentElement",extends:S,components:{QInput:j["a"],QSelect:z["a"]},props:{value:{type:Object,default:function(){return{ccname:null,ccnum:null,expmonth:null,expyear:null,cvv:null}}}},methods:{range:function(e,t){return Nt()(Array(t-e+1)).map((function(t,i){return e+i}))}},computed:{expmonths:function(){return this.range(1,12)},expyears:function(){var e=(new Date).getFullYear();return this.range(e,e+10)},rules:function(){var e=this;return{ccnum:[function(t){return!(!e.value.ccnum||t!==e.value.ccnum)||(Bt["validate"](t)||"Please enter a valid credit card.")}]}}}},Vt=Pt,$t=Object(T["a"])(Vt,At,Lt,!1,null,null,null),zt=$t.exports;A()($t,"components",{QForm:Q["a"],QInput:j["a"],QSelect:z["a"]});var Jt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"q-px-sm q-form-terms q-form-builder-element"},[i("div",{staticClass:"col"},[i("label",[e._v(e._s(e.getLabel))]),i("q-scroll-area",{staticClass:"terms-scroll-area",attrs:{"content-style":e.termsContentStyle,"content-active-style":e.termsContentStyle}},[i("div",{staticClass:"text-body2",domProps:{innerHTML:e._s(e.hint)}})]),i("q-checkbox",{ref:e.id,attrs:{"true-value":"I Agree","false-value":!1,"keep-color":"",color:e.hasError?"red":""},model:{value:e.iAgree,callback:function(t){e.iAgree=t},expression:"iAgree"}},[i("span",{class:e.hasError?"text-negative":""},[e._v("J'accepte ")])]),e._l(e.errors,(function(t,n){return i("p",{key:n,staticClass:"text-negative text-caption  text-italic q-pa-none"},[e._v(e._s(t))])}))],2)])},Ht=[],Yt=i("4983"),Zt={name:"TermsElement",extends:S,components:{QScrollArea:Yt["a"],QCheckbox:_e["a"]},data:function(){return{iAgree:!1}},computed:{termsContentStyle:function(){return{background:"rgba(0,0,0,0.02)",color:"rgb(117, 117, 117)",padding:"10px"}}},methods:{validate:function(){this.hasError=!1,this.errors=[],this.required&&!this.iAgree&&(this.hasError=!0,this.errors.push('Please click "I Agree" to accept.'))}},watch:{iAgree:function(e){this.innerValue=e,this.validate()}}},Gt=Zt,Kt=(i("7416"),Object(T["a"])(Gt,Jt,Ht,!1,null,null,null)),Wt=Kt.exports;A()(Kt,"components",{QForm:Q["a"],QScrollArea:Yt["a"],QCheckbox:_e["a"]});var Xt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"q-px-sm q-form-section-break q-form-builder-element"},[e.label?i("div",{staticClass:"q-pl-none q-form-section-break-title q-py-none q-mb-none text-bold text-primary"},[i("q-icon",{staticClass:"q-pa-none",attrs:{name:"arrow_right",color:"primary",size:"40px"}}),e._v(e._s(e.label))],1):e._e(),i("q-separator",{staticClass:"q-py-xs",attrs:{spaced:"",color:"primary"}}),e.hint?i("p",{staticClass:"text-caption",domProps:{innerHTML:e._s(e.hint)}}):e._e()],1)},ei=[],ti=i("eb85"),ii={name:"SectionBreakElement",components:{QSeparator:ti["a"]},props:{label:{type:String,default:""},field_options:{type:Object,required:!1,default:function(){return{description:!1}}},cid:{},id:{}},computed:{hint:function(){return this.field_options&&this.field_options.description?k(this.field_options.description):""}},methods:{validate:function(){return!0}}},ni=ii,oi=Object(T["a"])(ni,Xt,ei,!1,null,null,null),ai=oi.exports;A()(oi,"components",{QForm:Q["a"],QIcon:je["a"],QSeparator:ti["a"]});var ri=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"q-form-page-break q-form-builder-element"},[e.label?i("label",[i("strong",[e._v("Page Break: ")]),e._v(e._s(e.label))]):e._e(),i("q-separator",{attrs:{spaced:"",color:"primary"}}),e.hint?i("p",{staticClass:"text-caption",domProps:{innerHTML:e._s(e.hint)}}):e._e()],1)},li=[],si={name:"PageBreakElement",components:{QSeparator:ti["a"]},props:{label:{type:String,default:""},field_options:{type:Object,required:!1,default:function(){return{description:!1}}},cid:{},id:{}},computed:{hint:function(){return this.field_options.description}},methods:{validate:function(){return!0}}},ci=si,di=Object(T["a"])(ci,ri,li,!1,null,null,null),ui=di.exports;A()(di,"components",{QForm:Q["a"],QSeparator:ti["a"]});var mi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:"q-px-sm q-form-text q-form-builder-element row justify-"+e.field_options.img_position},[e.img64?i("q-img",{style:"width: "+e.iwidth+"px;height: "+e.iheight+"px",attrs:{src:e.img64,"spinner-color":"white"}}):e._e(),e.hint?i("p",{staticClass:"text-caption  text-italic q-pa-none",domProps:{innerHTML:e._s(e.hint)}}):e._e()],1)},pi=[],fi={name:"ImageElement",components:{QImg:h["a"]},props:{span:{type:Number,required:!1,default:5},label:{type:String,default:""},field_options:{type:Object,required:!1,default:function(){return{description:!1}}},cid:{},id:{}},computed:{hint:function(){return this.field_options&&this.field_options.description?k(this.field_options.description):""},iwidth:function(){return this.field_options&&this.field_options.img_width?this.field_options.img_width:100},iheight:function(){return this.field_options&&this.field_options.img_height?this.field_options.img_height:100},img64:function(){if(this.field_options.img_src)return this.field_options.img_src}},methods:{validate:function(){return!0}}},_i=fi,bi=Object(T["a"])(_i,mi,pi,!1,null,null,null),hi=bi.exports;A()(bi,"components",{QForm:Q["a"],QImg:h["a"]});var gi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"q-px-sm q-form-passagers q-form-builder-element"},[e.getLabel?i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 all-pointer-events text-h6"},[i("label",[e._v(e._s(e.getLabel))]),e.labelToolTip&&""!=e.labelToolTip?i("q-tooltip",{attrs:{"content-class":"bg-amber text-dark text-h5","content-style":"text-h5",anchor:"top left",self:"bottom left",offset:[0,8]}},[e._v("\n          "+e._s(e.labelToolTip)+"\n        ")]):e._e()],1)]):e._e(),e._l(e.innerValue,(function(t,n){return i("div",{key:n,staticClass:"row q-col-gutter-sm"},[i("div",{staticClass:"col-12 col-md-3"},[i("q-input",e._b({ref:e.id+"_passager_nom",refInFor:!0,staticClass:"q-pb-md text-h6",attrs:{placeholder:"Nom ",debounce:e.debounce,rules:e.getRules("passager_nom",e.required)},model:{value:t.nom,callback:function(i){e.$set(t,"nom",i)},expression:"valelt.nom"}},"q-input",e.field_options,!1))],1),i("div",{staticClass:"col-12 col-md-3"},[i("q-input",e._b({ref:e.id+"_passager_prenom",refInFor:!0,staticClass:"q-pb-md text-h6",attrs:{placeholder:"Prenom ",debounce:e.debounce,rules:e.getRules("passager_prenom",e.required)},model:{value:t.prenom,callback:function(i){e.$set(t,"prenom",i)},expression:"valelt.prenom"}},"q-input",e.field_options,!1))],1),i("div",{staticClass:"col-12 col-md-4"},[i("q-input",e._b({ref:e.id+"_passager_societe",refInFor:!0,staticClass:"q-pb-md text-h6",attrs:{placeholder:"Société ",debounce:e.debounce,rules:e.getRules("passager_societe",e.required)},model:{value:t.societe,callback:function(i){e.$set(t,"societe",i)},expression:"valelt.societe"}},"q-input",e.field_options,!1))],1),i("div",{staticClass:"col-12 col-md-2"},[i("div",{staticClass:"q-pa-sm row q-gutter-sm items-center"},[i("div",{staticClass:"col self-center justify-center"},[i("q-btn",{attrs:{flat:"",icon:"add"},on:{click:function(i){return e.addElt(t)}}})],1),i("div",{staticClass:"col self-center"},[n>=0&&n!=e.innerValue.length?i("q-btn",{attrs:{flat:"",icon:"remove"},on:{click:function(t){return e.delElt(n)}}}):e._e()],1)])])])})),e.hint?i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 text-caption",domProps:{innerHTML:e._s(e.hint)}})]):e._e()],2)},vi=[],qi=(i("a434"),{name:"PassagersElement",extends:S,components:{QInput:j["a"],QTooltip:_["a"]},props:{value:{type:Array,default:function(){return[{nom:null,prenom:null,societe:null}]}}},methods:{addElt:function(e){this.innerValue.push({nom:e.nom,prenom:e.prenom,societe:e.societe})},delElt:function(e){0==e?this.innerValue=Object.assign([],[{nom:null,prenom:null,societe:null}]):this.innerValue.splice(e,1)}}}),yi=qi,wi=Object(T["a"])(yi,gi,vi,!1,null,null,null),Ci=wi.exports;A()(wi,"components",{QForm:Q["a"],QTooltip:_["a"],QInput:j["a"],QBtn:b["a"]});var xi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"q-px-sm q-form-time q-form-builder-element",attrs:{id:"hidden_"+e.cid,show:e.visible}},[e.label&&e.visible?i("label",[i("strong",[e._v("Hidden: ")]),e._v(e._s(e.label))]):e._e(),i("q-separator",{attrs:{spaced:"",color:"primary"}}),e.hint?i("p",{staticClass:"text-caption",domProps:{innerHTML:e._s(e.hint)}}):e._e()],1)},Ei=[],Oi={name:"HiddenElement",components:{QSeparator:ti["a"]},props:{label:{type:String,default:""},field_options:{type:Object,required:!1,default:function(){return{description:!1}}},cid:{},id:{}},computed:{visible:function(){return"hidden"==this.field_type},hint:function(){return this.field_options.description}},methods:{validate:function(){return!0}}},Fi=Oi,Mi=Object(T["a"])(Fi,xi,Ei,!1,null,null,null),ki=Mi.exports;A()(Mi,"components",{QForm:Q["a"],QSeparator:ti["a"]});var Si={name:"EditableElement",components:{TextElement:U,CacemusersElement:X,CommunesElement:re,ParagraphElement:me,CheckboxesElement:ye,RadioElement:Me,ImageElement:hi,DateElement:Ue,TimeElement:Je,DropdownElement:We,EmailElement:ot,NameElement:dt,SimpleNameElement:bt,AddressElement:Ct,PhoneElement:kt,FileElement:It,PaymentElement:zt,TermsElement:Wt,SectionBreakElement:ai,PageBreakElement:ui,PassagersElement:Ci,HiddenElement:ki},props:["value"],methods:{onClick:function(){this.$emit("click",this.value)}},computed:{element:function(){for(var e=this.value.field_type.split("_"),t=0;t<e.length;t++)e[t]=e[t].charAt(0).toUpperCase()+e[t].slice(1);return e.join("")+"Element"}},beforeMount:function(){Object(this.value).hasOwnProperty("show_options")||(this.value.show_options=[]),Object(this.value).hasOwnProperty("span")||(this.value.span=12),this.value.field_options&&(Object(this.value.field_options).hasOwnProperty("filled")||(this.value.field_options["filled"]=!1),Object(this.value.field_options).hasOwnProperty("stack-label")||(this.value.field_options["stack-label"]=!1)),console.log("Init vals :",this.value)}},ji=Si,Di=(i("ed4b"),Object(T["a"])(ji,C,x,!1,null,"5bae5938",null)),Ri=Di.exports,Ti=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.value?i("form",{on:{submit:function(e){e.preventDefault()}}},[i("div",{staticClass:"text-right q-px-sm"},[i("q-chip",{staticClass:"text-uppercase",attrs:{square:"",dense:"",icon:e.typeIcon}},[e._v(e._s(e.typeName)+"\n    ")])],1),e.ifNotTypes(["image"])?i("q-input",{staticClass:"q-px-sm",attrs:{dense:"",placeholder:"nom du champ",label:"Nom du champ"},model:{value:e.value.label,callback:function(t){e.$set(e.value,"label",t)},expression:"value.label"}}):e._e(),e.ifNotTypes(["section_break","page_break","image"])?i("q-input",{staticClass:"q-px-sm",attrs:{dense:"",placeholder:"id du champ",label:"ID du champ","label-color":"negative"},model:{value:e.value.id,callback:function(t){e.$set(e.value,"id",t)},expression:"value.id"}}):e._e(),e.ifNotTypes(["section_break","page_break","image"])?i("q-input",{staticClass:"q-px-sm",attrs:{dense:"",label:"Masque :"},model:{value:e.value.mask,callback:function(t){e.$set(e.value,"mask",t)},expression:"value.mask"}}):e._e(),i("q-input",{staticClass:"q-px-sm",attrs:{dense:"",type:"number",min:"1",max:"12",value:12,placeholder:"12",label:"Nb col/12"},model:{value:e.value.span,callback:function(t){e.$set(e.value,"span",t)},expression:"value.span"}}),e.ifType("checkboxes")?i("editable-checkboxes-options",{model:{value:e.value.field_options,callback:function(t){e.$set(e.value,"field_options",t)},expression:"value.field_options"}}):e._e(),e.ifType("radio")?i("editable-radio-options",{model:{value:e.value.field_options,callback:function(t){e.$set(e.value,"field_options",t)},expression:"value.field_options"}}):e._e(),e.ifType("dropdown")?i("editable-dropdown-options",{model:{value:e.value.field_options,callback:function(t){e.$set(e.value,"field_options",t)},expression:"value.field_options"}}):e._e(),e.ifNotTypes(["section_break","page_break","image"])?i("q-expansion-item",{staticClass:"q-px-none q-py-md",attrs:{dense:"","expand-separator":"",label:"Description",caption:"information sous le champ","header-class":"bg-blue-2"}},[i("q-card",[i("q-card-section",[e.ifNotTypes(["section_break","page_break","image"])?i("q-input",{staticClass:"q-pt-md",attrs:{dense:"",type:"textarea",label:"Description :",filled:""},model:{value:e.value.field_options.description,callback:function(t){e.$set(e.value.field_options,"description",t)},expression:"value.field_options.description"}}):e._e(),e.ifNotTypes(["section_break","page_break","image"])?i("q-input",{staticClass:"q-pt-sm",attrs:{dense:"",type:"textarea",label:"Bulle d'aide :",filled:""},model:{value:e.value.labelToolTip,callback:function(t){e.$set(e.value,"labelToolTip",t)},expression:"value.labelToolTip"}}):e._e()],1)],1)],1):e._e(),e.ifNotTypes(["section_break","page_break","image"])?i("q-toggle",{staticClass:"q-px-sm",attrs:{label:"Obligatoire"},model:{value:e.value.required,callback:function(t){e.$set(e.value,"required",t)},expression:"value.required"}}):e._e(),e.ifNotTypes(["section_break","page_break","image","radio","checkboxes","hidden"])?i("q-toggle",{staticClass:"q-px-sm",attrs:{value:!0,label:"Remplie"},model:{value:e.value.field_options.filled,callback:function(t){e.$set(e.value.field_options,"filled",t)},expression:"value.field_options.filled"}}):e._e(),e.ifNotTypes(["section_break","page_break","image","radio","checkboxes"])?i("q-toggle",{staticClass:"q-px-sm",attrs:{value:!0,label:"Au dessus"},model:{value:e.value.field_options["stack-label"],callback:function(t){e.$set(e.value.field_options,"stack-label",t)},expression:"value.field_options['stack-label']"}}):e._e(),e.ifType("image")?i("q-file",{staticClass:"q-pa-md",attrs:{dense:"",outlined:"",label:"Sélectionnez une Image...",accept:".png, application/*"},on:{input:e.fileSelect},scopedSlots:e._u([{key:"prepend",fn:function(){return[i("q-icon",{attrs:{name:"attach_file"}})]},proxy:!0}],null,!1,2664251742),model:{value:e.imgFile,callback:function(t){e.imgFile=t},expression:"imgFile"}}):e._e(),e.ifType("image")?i("q-input",{staticClass:"q-px-md",attrs:{dense:"",label:"Largeur :",type:"number",value:150},model:{value:e.value.field_options.img_width,callback:function(t){e.$set(e.value.field_options,"img_width",t)},expression:"value.field_options.img_width"}}):e._e(),e.ifType("image")?i("q-input",{staticClass:"q-px-md",attrs:{dense:"",label:"Hauteur :",type:"number",value:250},model:{value:e.value.field_options.img_height,callback:function(t){e.$set(e.value.field_options,"img_height",t)},expression:"value.field_options.img_height"}}):e._e(),e.ifType("image")?i("div",{staticClass:"q-pa-md"},[i("div",[e._v("Position :")]),i("div",{staticClass:"q-gutter-sm"},[i("q-radio",{attrs:{val:"start",label:"Debut"},model:{value:e.value.field_options.img_position,callback:function(t){e.$set(e.value.field_options,"img_position",t)},expression:"value.field_options.img_position"}}),i("q-radio",{attrs:{val:"center",label:"Milieu"},model:{value:e.value.field_options.img_position,callback:function(t){e.$set(e.value.field_options,"img_position",t)},expression:"value.field_options.img_position"}}),i("q-radio",{attrs:{val:"end",label:"Fin"},model:{value:e.value.field_options.img_position,callback:function(t){e.$set(e.value.field_options,"img_position",t)},expression:"value.field_options.img_position"}})],1)]):e._e(),e.ifNotTypes(["section_break","page_break"])?i("editable-show-options",{attrs:{fieldsList:e.fieldsList},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}):e._e()],1):e._e()},Qi=[],Ii=i("9564"),Ai=i("b0476"),Li=i("7d53"),Ui=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"q-pa-xs"},[i("q-list",[i("q-item-label",{attrs:{dense:"",header:""}},[e._v("Liste")]),e._l(e.value.options,(function(t,n){return i("q-item",{key:n,attrs:{dense:""}},[i("q-item-section",{attrs:{side:""}},[i("q-checkbox",{model:{value:t.checked,callback:function(i){e.$set(t,"checked",i)},expression:"option.checked"}})],1),i("q-item-section",[i("q-input",{attrs:{dense:""},model:{value:t.label,callback:function(i){e.$set(t,"label",i)},expression:"option.label"}})],1),i("q-item-section",{attrs:{side:""}},[i("q-btn",{attrs:{round:"",flat:"",size:"xs",icon:"delete"},on:{click:function(t){return e.deleteItem(n)}}},[i("q-tooltip",[e._v("Effacer cette option")])],1)],1)],1)})),i("q-item",{attrs:{dense:""}},[i("q-item-section",{attrs:{side:""}},[i("q-checkbox",{model:{value:e.newItem.checked,callback:function(t){e.$set(e.newItem,"checked",t)},expression:"newItem.checked"}})],1),i("q-item-section",[i("q-input",{attrs:{dense:"",filled:""},model:{value:e.newItem.label,callback:function(t){e.$set(e.newItem,"label",t)},expression:"newItem.label"}})],1),i("q-item-section",{attrs:{side:""}},[i("q-btn",{attrs:{round:"",size:"xs",icon:"add"},on:{click:e.addNewItem}},[i("q-tooltip",[e._v("Ajouter l'option")])],1)],1)],1),i("q-item",{attrs:{dense:""}},[i("q-checkbox",{attrs:{label:'Inclut "Autre" option'},model:{value:e.value.include_other_option,callback:function(t){e.$set(e.value,"include_other_option",t)},expression:"value.include_other_option"}})],1)],2)],1)},Ni=[],Bi=function(){return{checked:!1,label:""}},Pi={name:"EditableCheckboxesOptions",components:{QList:he["a"],QItem:Z["a"],QItemLabel:K["a"],QItemSection:G["a"],QCheckbox:_e["a"],QInput:j["a"],QBtn:b["a"],QTooltip:_["a"]},props:["value"],data:function(){return{newItem:Bi()}},methods:{addNewItem:function(){this.value.options||(this.value.options=[]),this.value.options.push({label:this.newItem.label,checked:this.newItem.checked}),this.newItem=Bi()},deleteItem:function(e){this.value.options.splice(e,1)}}},Vi=Pi,$i=Object(T["a"])(Vi,Ui,Ni,!1,null,null,null),zi=$i.exports;A()($i,"components",{QList:he["a"],QItemLabel:K["a"],QItem:Z["a"],QItemSection:G["a"],QCheckbox:_e["a"],QInput:j["a"],QBtn:b["a"],QTooltip:_["a"]});var Ji=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"q-pa-xs"},[i("q-list",[i("q-item-label",{attrs:{dense:"",header:""}},[e._v("Liste")]),e._l(e.value.options,(function(t,n){return i("q-item",{key:n,attrs:{dense:""}},[i("q-item-section",{attrs:{side:""}},[i("q-radio",{attrs:{val:!0},on:{input:function(i){return e.changeSelected(t.label)}},model:{value:t.checked,callback:function(i){e.$set(t,"checked",i)},expression:"option.checked"}})],1),i("q-item-section",[i("q-input",{attrs:{dense:""},model:{value:t.label,callback:function(i){e.$set(t,"label",i)},expression:"option.label"}})],1),i("q-item-section",{attrs:{side:""}},[i("q-btn",{attrs:{round:"",flat:"",size:"xs",icon:"delete"},on:{click:function(t){return e.deleteItem(n)}}},[i("q-tooltip",[e._v("Effacer cette option")])],1)],1)],1)})),i("q-item",{attrs:{dense:""}},[i("q-item-section",{attrs:{side:""}},[i("q-radio",{attrs:{val:!0},on:{input:function(t){return e.changeSelected(e.newItem.label)}},model:{value:e.newItem.checked,callback:function(t){e.$set(e.newItem,"checked",t)},expression:"newItem.checked"}})],1),i("q-item-section",[i("q-input",{attrs:{dense:"",filled:""},model:{value:e.newItem.label,callback:function(t){e.$set(e.newItem,"label",t)},expression:"newItem.label"}})],1),i("q-item-section",{attrs:{side:""}},[i("q-btn",{attrs:{round:"",size:"xs",icon:"add"},on:{click:e.addNewItem}},[i("q-tooltip",[e._v("Ajouter l'option")])],1)],1)],1),i("q-item",{attrs:{dense:""}},[i("q-checkbox",{attrs:{label:'Inclut "Autre" option'},model:{value:e.value.include_other_option,callback:function(t){e.$set(e.value,"include_other_option",t)},expression:"value.include_other_option"}})],1)],2)],1)},Hi=[],Yi=function(){return{checked:!1,label:""}},Zi={name:"EditableRadioOptions",components:{QList:he["a"],QItem:Z["a"],QItemLabel:K["a"],QItemSection:G["a"],QRadio:xe["a"],QCheckbox:_e["a"],QInput:j["a"],QBtn:b["a"],QTooltip:_["a"]},props:["value"],data:function(){return{newItem:Yi()}},methods:{addNewItem:function(){this.value.options||(this.value.options=[]),this.value.options.push({label:this.newItem.label,checked:this.newItem.checked}),this.newItem=Yi()},deleteItem:function(e){this.value.options.splice(e,1)},changeSelected:function(e){this.newItem.checked=this.newItem.label===e;var t,i=r()(this.value.options);try{for(i.s();!(t=i.n()).done;){var n=t.value;n.checked=n.label===e}}catch(o){i.e(o)}finally{i.f()}}}},Gi=Zi,Ki=Object(T["a"])(Gi,Ji,Hi,!1,null,null,null),Wi=Ki.exports;A()(Ki,"components",{QList:he["a"],QItemLabel:K["a"],QItem:Z["a"],QItemSection:G["a"],QRadio:xe["a"],QInput:j["a"],QBtn:b["a"],QTooltip:_["a"],QCheckbox:_e["a"]});var Xi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"q-px-none q-pt-md"},[i("q-list",{staticClass:"q-px-none"},[i("q-expansion-item",{attrs:{dense:"",label:"Liste","header-class":"bg-blue-2 full-width"}},[e._l(e.value.options,(function(t,n){return i("q-item",{key:n,attrs:{dense:""}},[i("q-item-section",[i("q-input",{attrs:{dense:""},model:{value:t.label,callback:function(i){e.$set(t,"label",i)},expression:"option.label"}})],1),i("q-item-section",{attrs:{side:""}},[i("q-btn",{attrs:{round:"",flat:"",size:"xs",color:"negative",icon:"delete"},on:{click:function(t){return e.deleteItem(n)}}},[i("q-tooltip",[e._v("Effacer cette option")])],1)],1)],1)})),i("q-item",{attrs:{dense:""}},[i("q-item-section",[i("q-input",{attrs:{dense:"",filled:""},model:{value:e.newItem.label,callback:function(t){e.$set(e.newItem,"label",t)},expression:"newItem.label"}})],1),i("q-item-section",{attrs:{side:""}},[i("q-btn",{attrs:{round:"",size:"xs",icon:"add",color:"teal"},on:{click:e.addNewItem}},[i("q-tooltip",[e._v("Ajouter l' option")])],1)],1)],1)],2)],1)],1)},en=[],tn=function(){return{label:""}},nn={name:"EditableDropdownOptions",components:{QList:he["a"],QItem:Z["a"],QItemLabel:K["a"],QItemSection:G["a"],QCheckbox:_e["a"],QInput:j["a"],QBtn:b["a"],QTooltip:_["a"]},props:["value"],data:function(){return{newItem:tn()}},methods:{addNewItem:function(){this.value.options.push({label:this.newItem.label}),this.newItem=tn()},deleteItem:function(e){this.value.options.splice(e,1)},changeSelected:function(e){this.newItem.label}}},on=nn,an=i("3b73"),rn=Object(T["a"])(on,Xi,en,!1,null,null,null),ln=rn.exports;A()(rn,"components",{QList:he["a"],QItemLabel:K["a"],QExpansionItem:an["a"],QItem:Z["a"],QItemSection:G["a"],QInput:j["a"],QBtn:b["a"],QTooltip:_["a"]});var sn=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"q-px-none q-pt-md"},[i("q-list",{staticClass:"q-px-none"},[i("q-expansion-item",{attrs:{dense:"",label:"Conditions (visibilité)","header-class":"bg-blue-3 full-width text-bold"}},[e._l(e.value.show_options,(function(t,n){return i("q-item",{key:n,staticClass:"bg-blue-1 q-pr-none",attrs:{dense:""}},[i("q-item-section",[i("q-select",{ref:"foption",refInFor:!0,attrs:{dense:"",round:"",value:t.id_field.id,"option-value":"id","option-label":"label","emit-value":"","map-options":"",options:e.fieldsList,label:"Visible si"},model:{value:t.id_field,callback:function(i){e.$set(t,"id_field",i)},expression:"option.id_field"}}),t.id_field?i("q-input",{attrs:{dense:"",round:"",label:"valeur"},model:{value:t.valcalc,callback:function(i){e.$set(t,"valcalc",i)},expression:"option.valcalc"}}):e._e()],1),i("q-item-section",{staticClass:"q-pa-none no-padding",attrs:{side:""}},[i("q-btn",{staticClass:"no-padding",attrs:{round:"",flat:"",size:"md",icon:"remove_circle",color:"negative"},on:{click:function(t){return e.deleteItem(n)}}},[i("q-tooltip",[e._v("Effacer cette option")])],1)],1)],1)})),i("q-item",{staticClass:"bg-amber-1 q-pr-none",attrs:{dense:""}},[i("q-item-section",[i("q-select",{ref:"foption",attrs:{dense:"",round:"",options:e.fieldsList,label:"Visible si"},model:{value:e.newItem.id_field,callback:function(t){e.$set(e.newItem,"id_field",t)},expression:"newItem.id_field"}}),e.newItem.id_field?i("q-input",{attrs:{dense:"",round:"",label:"valeur"},model:{value:e.newItem.valcalc,callback:function(t){e.$set(e.newItem,"valcalc",t)},expression:"newItem.valcalc"}}):e._e()],1),i("q-item-section",{staticClass:"q-pa-none no-padding",attrs:{side:""}},[i("q-btn",{attrs:{round:"",flat:"",size:"md",icon:"add_circle",color:"primary"},on:{click:e.addNewItem}},[i("q-tooltip",[e._v("Ajouter l' option")])],1)],1)],1)],2)],1)],1)},cn=[],dn=function(){return{id_field:null,valcalc:""}},un={name:"EditableShowOptions",components:{QList:he["a"],QItem:Z["a"],QSelect:z["a"],QItemLabel:K["a"],QItemSection:G["a"],QCheckbox:_e["a"],QInput:j["a"],QBtn:b["a"],QTooltip:_["a"]},props:["value","fieldsList"],data:function(){return{newItem:dn()}},methods:{addNewItem:function(){Object(this.newItem.id_field).hasOwnProperty("id")?this.value.show_options.push({id_field:this.newItem.id_field.id,valcalc:this.newItem.valcalc}):this.value.show_options.push({id_field:this.newItem.id_field,valcalc:this.newItem.valcalc}),this.newItem=dn()},deleteItem:function(e){this.value.show_options.splice(e,1)}}},mn=un,pn=Object(T["a"])(mn,sn,cn,!1,null,null,null),fn=pn.exports;A()(pn,"components",{QList:he["a"],QItemLabel:K["a"],QExpansionItem:an["a"],QItem:Z["a"],QItemSection:G["a"],QSelect:z["a"],QInput:j["a"],QBtn:b["a"],QTooltip:_["a"]});var _n={name:"EditableElementOptions",components:{QInput:j["a"],QToggle:Ii["a"],QChip:Ai["a"],QFile:Li["a"],EditableCheckboxesOptions:zi,EditableRadioOptions:Wi,EditableDropdownOptions:ln,EditableShowOptions:fn},props:["value","typeInfo","fieldsList","submitOptions"],data:function(){return{imgFile:null,foption:null,fcalc:"",useShowOption:!1,expandVisible:!1}},methods:{ifType:function(e){return this.value.field_type===e},ifNotTypes:function(e){return Array.isArray(e)||(e=[e]),e.indexOf(this.value.field_type)<0},getTypeInfo:function(){for(var e in this.typeInfo)if(this.typeInfo[e].type===this.value.field_type)return this.typeInfo[e];return!1},fileSelect:function(e){var t=this,i=new FileReader;console.log("Event file image :",e),i.onload=function(e){if(e.target.readyState==FileReader.DONE){console.log("File data :",e.target.result),console.log("File data infos :",e.target);var i=new Image;i.src=e.target.result,i.onload=function(e){var n=document.createElement("canvas"),o=n.getContext("2d");t.value.field_options.img_width=i.width,t.value.field_options.img_height=i.height,n.width=i.width,n.height=i.height,o.drawImage(i,0,0),t.value.field_options.img_src=n.toDataURL("image/png")}}},i.readAsDataURL(e)}},computed:{typeName:function(){return this.getTypeInfo().label},typeIcon:function(){return this.getTypeInfo().icon}},watch:{value:{handler:function(e){console.log("Proprietes :",e)}}}},bn=_n,hn=i("d66b"),gn=i("f09f"),vn=i("a370"),qn=Object(T["a"])(bn,Ti,Qi,!1,null,null,null),yn=qn.exports;A()(qn,"components",{QChip:Ai["a"],QInput:j["a"],QEditor:hn["a"],QExpansionItem:an["a"],QCard:gn["a"],QCardSection:vn["a"],QToggle:Ii["a"],QFile:Li["a"],QIcon:je["a"],QRadio:xe["a"]});var wn={name:"RvFormBuilder",components:{EditableElement:Ri,EditableElementOptions:yn,draggable:w.a,QLayout:l["a"],QPageContainer:s["a"],QPage:c["a"],QDrawer:d["a"],QTab:u["a"],QTabs:m["a"],QTabPanel:p["a"],QTabPanels:f["a"],QTooltip:_["a"],QBtn:b["a"],QImg:h["a"],TextElement:U,CacemusersElement:X,CommunesElement:re,ParagraphElement:me,CheckboxesElement:ye,RadioElement:Me,DateElement:Ue,TimeElement:Je,DropdownElement:We,EmailElement:ot,NameElement:dt,SimpleNameElement:bt,AddressElement:Ct,PhoneElement:kt,FileElement:It,PaymentElement:zt,TermsElement:Wt,PageBreakElement:ui,ImageElement:hi,SectionBreakElement:ai,PassagersElement:Ci},data:function(){return{left:!1,right:!1,jsonFile:null,fields:this.value,hiddenFields:this.value.filter((function(e){return"hidden"==e.type})),vFields:null,drawer:!0,showpreview:!1,tab:"add",currentField:!1,currentHiddenField:!1,hovered:[]}},props:{navPosition:{type:String,default:"left"},fieldIdName:{default:"_id"},value:{required:!0,type:Array},idForm:{required:!1,type:String,default:""},nameForm:{required:!1,type:String,default:""},submitOptions:{required:!1,type:Object,default:function(){return{}}},sourceFields:{required:!1,default:function(){return[{type:"text",icon:"text_format",label:"Text"},{type:"paragraph",icon:"text_fields",label:"Paragraphe"},{type:"checkboxes",icon:"check_box",label:"Case à cocher"},{type:"radio",icon:"radio_button_checked",label:"Choix multi"},{type:"date",icon:"event",label:"Date"},{type:"time",icon:"access_time",label:"Heure"},{type:"dropdown",icon:"arrow_drop_down",label:"Liste Choix"},{type:"email",icon:"email",label:"E-mail"},{type:"image",icon:"image",label:"Image"},{type:"cacemusers",icon:"person",label:"Util. CACEM"},{type:"communes",icon:"home",label:"Communes"},{type:"passagers",icon:"people",label:"Passagers"},{type:"section_break",icon:"view_agenda",label:"Section"}]}}},methods:{getTypeInfo:function(){for(var e in this.typeInfo)if(this.typeInfo[e].type===this.value.field_type)return this.typeInfo[e];return!1},doShowPreview:function(){this.showpreview=!this.showpreview,1==this.showpreview?this.drawer=!1:this.drawer=!0},saveForm:function(){var e=this,t=Object.assign([],this.fields),i="accueil";""!=this.nameForm&&"accueil"!=this.nameForm&&"parking"!=this.nameForm&&(i="autre"),this.$q.dialog({title:"Sauvegarde du formulaire",message:"Vous souhaitez ce formulaire pour ",options:{type:"radio",model:i,items:[{label:"L' Accueil",value:"accueil",color:"secondary"},{label:"Autre..",value:"autre"}]},cancel:!0,persistent:!0}).onOk((function(i){if(console.log(">>>> OK, received",i),"autre"==i){var n="Nom";""!=e.nameForm&&(n=e.nameForm.toUpperCase()),e.$q.dialog({title:"Nom du formulaire",message:"Merci de donner un nom au formulaire ",prompt:{model:n,isValid:function(e){return e.length>2&&e.length<16&&1==/^[A-Za-z0-9]+$/.test(e)&&0==/accueil/.test(e.toLowerCase())&&0==/parking/.test(e.toLowerCase())},type:"text"},cancel:!0,persistent:!0}).onOk((function(i){e.$emit("save",{formName:i.toUpperCase(),data:t})}))}e.$emit("save",{formName:i,data:t})}))},onList:function(){var e=Object.assign([],this.vFields);this.$emit("onlist",e)},toggleLeftDrawer:function(){this.drawer=!this.drawer},createField:function(e){return{label:M(e.type),field_type:e.type,required:!0,cid:Object(g["a"])(),id:e.id,name:e.id,span:12,show_options:[],field_options:F(e.type)}},addHiddenField:function(){var e={label:null,field_type:"hidden",required:!1,cid:Object(g["a"])(),id:null,event_options:[]};this.fields.push(e),this.hiddenFields.push(e),this.currentHiddenField=e},deleteField:function(e){this.currentField=!1,this.tab="add",this.$delete(this.fields,e)},duplicateField:function(e){var t=Object(v["a"])(!0,{},this.fields[e]);t.cid=Object(g["a"])(),delete t[this.fieldIdName],this.fields.push(t)},onChange:function(e){e.added&&this.selectForEdit(e.added.element)},onAddFieldClick:function(e){console.log("Type to add :",e);var t=this.createField({type:e});this.fields.push(t),this.selectForEdit(t)},onAddHiddenFieldClick:function(e){var t=this.createHiddenField({type:e});this.fields.push(t)},selectForEdit:function(e){0==this.drawer&&(this.drawer=!0),this.currentField=e,this.tab="edit"},isSelectedForEdit:function(e){return this.currentField.cid===this.fields[e].cid},getFieldByCid:function(e){var t,i=r()(this.fields);try{for(i.s();!(t=i.n()).done;){var n=t.value;if(n.cid===e)return n}}catch(o){i.e(o)}finally{i.f()}return!1},getElement:function(e){if("hidden"!=e.field_type){for(var t=e.field_type.split("_"),i=0;i<t.length;i++)t[i]=t[i].charAt(0).toUpperCase()+t[i].slice(1);return t.join("")+"Element"}return null},exportToJSON:function(){var e=Object(q["a"])("form.json",JSON.stringify(this.fields),"text/json");!0!==e&&this.$q.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})},importFromJSON:function(){var e=this;console.log("Fichier sélectionné :",this.jsonFile);var t=new FileReader;t.onload=function(t){console.log("Contenu :",t.target.result);var i=JSON.parse(t.target.result);e.fields=Object.assign([],i)},t.readAsText(this.jsonFile)}},computed:{typeName:function(){return this.getTypeInfo().label},typeIcon:function(){return this.getTypeInfo().icon},sourceOptions:function(){return{group:{name:"q-form-builder",pull:"clone",put:!1}}},destinationOptions:function(){return{group:{name:"q-form-builder",pull:!1,put:!0}}}},beforeMount:function(){this.fields&&this.fields instanceof Array||(this.fields=[],this.hiddenFields=[]),this.hiddenFields=this.fields.filter((function(e){return"hidden"==e.field_type})),this.vFields=this.fields.filter((function(e){return"hidden"!=e.field_type})),console.log("Fields :",JSON.stringify(this.vFields))},watch:{fields:function(e){console.log("Form :",e),this.hiddenFields=e.filter((function(e){return"hidden"==e.field_type})),this.$emit("input",e)},value:function(e){this.fields=e,this.hiddenFields=this.fields.filter((function(e){return"hidden"==e.field_type})),this.vFields=this.fields.filter((function(e){return"hidden"!=e.field_type})),this.currentField&&this.selectForEdit(this.getFieldByCid(this.currentField.cid))}},errorCaptured:function(e,t,i){console.log("Error :",error),console.log("Vm component :",t),console.log("Info :",i)}},Cn=wn,xn=(i("5f7b"),i("4b7e")),En=i("e359"),On=i("65c6"),Fn=i("6ac5"),Mn=i("8572"),kn=Object(T["a"])(Cn,n,o,!1,null,null,null),Sn=kn.exports;A()(kn,"components",{QLayout:l["a"],QDrawer:d["a"],QBtn:b["a"],QSeparator:ti["a"],QTooltip:_["a"],QExpansionItem:an["a"],QCard:gn["a"],QCardSection:vn["a"],QChip:Ai["a"],QInput:j["a"],QCardActions:xn["a"],QFile:Li["a"],QIcon:je["a"],QHeader:En["a"],QToolbar:On["a"],QToolbarTitle:Fn["a"],QAvatar:Y["a"],QPageContainer:s["a"],QPage:c["a"],QForm:Q["a"],QField:Mn["a"]});var jn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-layout",{attrs:{view:"hHh LpR fFf"}},[n("q-drawer",{attrs:{"show-if-above":"",side:"left"},model:{value:e.left,callback:function(t){e.left=t},expression:"left"}},[n("draggable",e._b({attrs:{list:e.sourceFields,clone:e.createField,sort:!1}},"draggable",e.sourceOptions,!1),e._l(e.sourceFields,(function(t,i){return n("div",{key:i,staticClass:"source-field q-gutter-sm row items-center justify-center no-wrap col-12"},[""!==t.type?n("q-btn",{attrs:{type:"button",size:"12px",dense:"",stack:"",outline:"",color:"primary",align:"center",icon:t.icon,label:t.label},on:{click:function(i){return e.onAddFieldClick(t.type)}}}):e._e()],1)})),0),n("q-separator",{staticClass:"q-my-md"}),n("div",{staticClass:"q-pa-none q-gutter-md"},[n("div",{staticClass:"row items-center justify-center q-gutter-md q-px-none"},[n("q-btn",{attrs:{color:"primary",icon:"save",glossy:"","text-color":"white",dense:"","no-caps":"",label:"Enregistrer"},on:{click:function(t){return e.saveForm()}}},[n("q-tooltip",{attrs:{"content-class":"bg-amber-5 text-dark","content-style":"font-size: 1.2em"}},[n("div",{staticClass:"text-justify-center text-bold text-size-16"},[e._v("\n              Enregistrement du formulaire en cours "),n("br"),e._v("ou création d'un\n              nouveau\n            ")])])],1)],1),n("q-separator",{staticClass:"q-my-md"}),n("q-expansion-item",{staticClass:"text-center tex-bold bg-blue-3",attrs:{dense:"",label:"Export/Import en JSON"}},[n("q-card",[n("q-card-section",[n("div",{staticClass:"row items-center full-width"},[n("div",{staticClass:"col-6"},[n("q-btn",{staticClass:"q-pa-xs no-wrap",attrs:{dense:"",color:"primary",icon:"save_alt","no-caps":"",label:"Export "},on:{click:function(t){return e.exportToJSON()}}})],1),n("div",{staticClass:"col-6"},[n("q-file",{staticClass:"q-pa-none no-wrap",attrs:{dense:"",label:"Import ...",accept:".json, text/json",outlined:""},on:{input:function(t){return e.importFromJSON()}},scopedSlots:e._u([{key:"prepend",fn:function(){return[n("q-icon",{attrs:{dense:"",name:"file_upload"}})]},proxy:!0}]),model:{value:e.jsonFile,callback:function(t){e.jsonFile=t},expression:"jsonFile"}})],1)])])],1)],1)],1)],1),n("q-drawer",{attrs:{"show-if-above":"",side:"right"},model:{value:e.right,callback:function(t){e.right=t},expression:"right"}},[n("div",{staticClass:"text-left text-bold bg-blue-4 q-px-md q-py-sm"},[e._v("\n      PROPRIETE\n    ")]),n("q-expansion-item",{staticClass:"text-left text-bold bg-red-3 q-pa-none",attrs:{dense:"","expand-separator":"",label:"Géneral"}},[n("q-card",{staticClass:"my-card"},[n("q-card-section",{staticClass:"q-pa-none"},[n("div",{staticClass:"row items-center full-width q-pa-xs"},[n("q-input",{staticClass:"full-width",attrs:{dense:"",square:"",outlined:"",label:"Nom de la base"},model:{value:e.dbname,callback:function(t){e.dbname=t},expression:"dbname"}}),n("q-input",{staticClass:"full-width",attrs:{dense:"",square:"",outlined:"",label:"Nom de la table"},model:{value:e.tablename,callback:function(t){e.tablename=t},expression:"tablename"}})],1),n("div",{staticClass:"row items-center full-width q-pa-xs"},[n("q-input",{staticClass:"full-width",attrs:{dense:"",square:"",outlined:"",label:"Nom du formulaire"},model:{value:e.formName,callback:function(t){e.formName=t},expression:"formName"}}),n("div",{staticClass:"row items-center justify-center full-width q-px-md q-py-sm"},[n("div",{staticClass:"q-px-md"},[e._v("Accès")]),n("q-toggle",{staticClass:"q-pa-none",attrs:{dense:"","checked-icon":"check",color:"green",label:e.formT,"false-value":"publique","true-value":"privé","unchecked-icon":"clear"},model:{value:e.formT,callback:function(t){e.formT=t},expression:"formT"}})],1)],1),"privé"==e.formT?n("q-separator",{staticClass:"q-my-xs"}):e._e(),"privé"==e.formT?n("cacemusers-list",{attrs:{value:e.accusers},on:{"update:value":function(t){e.accusers=t},update:function(t){e.accusers=t}}}):e._e()],1)],1)],1),Object(e.currentField).hasOwnProperty("field_type")&&"hidden"!=e.currentField.field_type?n("div",{staticClass:"text-left text-bold bg-blue-4 q-px-md q-py-sm"},[e._v("\n       -- PARAMETRES COMPOSANT --\n    ")]):e._e(),Object(e.currentField).hasOwnProperty("field_type")&&"hidden"!=e.currentField.field_type?n("editable-element-options",{staticClass:"q-py-sm",attrs:{"type-info":e.sourceFields,"fields-list":e.fields,submitOptions:e.submitOptions},model:{value:e.currentField,callback:function(t){e.currentField=t},expression:"currentField"}}):e._e(),n("q-expansion-item",{staticClass:"text-left tex-bold bg-blue-3",attrs:{dense:"","expand-separator":"",icon:"visibility_off",label:"Champs cachés"}},[n("editable-hidden-element-options",{staticClass:"q-pa-sm",attrs:{"type-info":e.sourceFields,"fields-list":e.fields,submitOptions:e.submitOptions},model:{value:e.hiddenFields,callback:function(t){e.hiddenFields=t},expression:"hiddenFields"}})],1)],1),n("q-header",{staticClass:"bg-primary text-white",attrs:{unelevated:""}},[n("q-toolbar",{staticClass:"full-width"},[n("q-btn",{attrs:{dense:"",flat:"",round:"",icon:"menu"},on:{click:e.toggleLeftDrawer}}),n("q-toolbar-title",[n("q-avatar",[n("img",{staticClass:"bg-white",attrs:{src:i("cf05")}})]),e._v("\n        Créateur de formulaires ("+e._s(e.nameForm)+")\n      ")],1),n("q-btn",{staticClass:"q-mr-xs",attrs:{flat:"",round:"",dense:"",icon:"home"},on:{click:function(t){return e.$emit("goBack")}}}),n("q-btn",{staticClass:"q-mr-xs",attrs:{flat:"",round:"",dense:"",icon:"preview",color:e.showpreview?"red":null},on:{click:function(t){return e.doShowPreview()}}},[n("q-tooltip",{attrs:{"content-class":"bg-amber text-dark","content-style":"font-size: 1.2em"}},[e._v("\n          Apercu de votre formulaire\n        ")])],1),n("q-btn",{staticClass:"q-mr-xs",attrs:{flat:"",round:"",dense:"",icon:"email",to:"/emailbuilder/"+e.nameForm}},[n("q-tooltip",{attrs:{"content-class":"bg-amber text-dark","content-style":"font-size: 1.2em"}},[e._v("\n          Notification builder\n        ")])],1)],1)],1),n("q-page-container",[n("q-page",{directives:[{name:"show",rawName:"v-show",value:!e.showpreview,expression:"!showpreview"}],staticClass:"q-form-builder-page bg-white"},[n("draggable",{class:{"q-form-builder-elements-container":!0,empty:0==e.fields.length,row:!0,"q-gutter-none":!0},staticStyle:{width:"100%","max-width":"100%"},attrs:{options:e.destinationOptions},on:{change:e.onChange},model:{value:e.fields,callback:function(t){e.fields=t},expression:"fields"}},e._l(e.fields,(function(t,i){return n("div",{key:i,class:t.span?"col-"+t.span+" editable-element-container":"col-auto editable-element-container"},["hidden"!=t.field_type?n("editable-element",{ref:e.fields[i].cid,refInFor:!0,class:{selected:e.isSelectedForEdit(i)},on:{click:e.selectForEdit},model:{value:e.fields[i],callback:function(t){e.$set(e.fields,i,t)},expression:"fields[idx]"}}):e._e(),n("div",{staticClass:"editable-element-action-buttons"},[e.isSelectedForEdit(i)?n("q-btn",{staticClass:"editable-element-button",attrs:{color:"red",icon:"delete",round:"",size:"xs"},on:{click:function(t){return e.deleteField(i)}}},[n("q-tooltip",[e._v("Effacer ce champ")])],1):e._e(),e.isSelectedForEdit(i)?n("q-btn",{staticClass:"editable-element-button",attrs:{color:"primary",icon:"file_copy",round:"",size:"xs"},on:{click:function(t){return e.duplicateField(i)}}},[n("q-tooltip",[e._v("Dupliquer ce champ")])],1):e._e()],1)],1)})),0)],1),n("q-page",{directives:[{name:"show",rawName:"v-show",value:e.showpreview,expression:"showpreview"}],staticClass:"full-width bg-white"},[n("div",{staticClass:"q-gutter-sm row"},e._l(e.fields,(function(t,i){return n("div",{key:i,class:t.span?"col-"+t.span:"col-auto"},["hidden"!=t.field_type?n(e.getElement(t),{ref:t.cid,refInFor:!0,tag:"component",attrs:{disabled:"true",show_options:t.field_show_options,ofields:e.fields,label:t.label,labelToolTip:t.labelToolTip,required:t.required,field_options:t.field_options,id:t.id,name:t.id,cid:t.cid,mask:t.mask,debounce:"500"}}):e._e()],1)})),0)])],1)],1)},Dn=[],Rn=(i("caad"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-card",[i("q-card-section",[e.value?i("form",{on:{submit:function(e){e.preventDefault()}}},e._l(e.value,(function(t,n){return i("div",{key:"hidden_"+n},[i("div",{staticClass:"text-right"},[i("q-chip",{staticClass:"text-uppercase",attrs:{square:"",dense:"",icon:e.typeIcon}},[e._v(e._s(e.typeName)+"\n          ")])],1),e.ifNotTypes(["image"])?i("q-input",{attrs:{dense:"",placeholder:"nom du champ",label:"Nom du champ"},model:{value:t.label,callback:function(i){e.$set(t,"label",i)},expression:"f.label"}}):e._e(),e.ifNotTypes(["image"])?i("q-input",{attrs:{dense:"",placeholder:"id du champ",label:"ID du champ","label-color":"negative"},model:{value:t.id,callback:function(i){e.$set(t,"id",i)},expression:"f.id"}}):e._e(),e.ifNotTypes(["image"])?i("q-input",{staticClass:"q-px-sm",attrs:{dense:"",placeholder:"Valeur par défaut",label:"Valeur par défaut","label-color":"positive"},model:{value:t.innerValue,callback:function(i){e.$set(t,"innerValue",i)},expression:"f.innerValue"}}):e._e(),i("div",{staticClass:"full-width text-right"},[i("q-btn",{attrs:{flat:"",dense:"",color:"red",icon:"delete"},on:{click:function(t){return e.value.splice(n,1)}}})],1),i("hr")],1)})),0):e._e()])],1)}),Tn=[],Qn={name:"EditableHiddenElementOptions",components:{QInput:j["a"],QToggle:Ii["a"],QChip:Ai["a"],QFile:Li["a"],QCard:gn["a"],QCardSection:vn["a"]},props:["value","typeInfo","fieldsList","submitOptions"],data:function(){return{imgFile:null,foption:null,fcalc:"",useShowOption:!1,expandVisible:!1}},methods:{ifType:function(e){return this.value[0].field_type===e},ifNotTypes:function(e){return Array.isArray(e)||(e=[e]),e.indexOf(this.value[0].field_type)<0},getTypeInfo:function(){for(var e in this.typeInfo)if(this.typeInfo[e].type===this.value[0].field_type)return this.typeInfo[e];return!1}},computed:{typeName:function(){return this.getTypeInfo().label},typeIcon:function(){return this.getTypeInfo().icon}},watch:{value:{handler:function(e){console.log("Hidden Proprietes change :",e)}}}},In=Qn,An=Object(T["a"])(In,Rn,Tn,!1,null,null,null),Ln=An.exports;A()(An,"components",{QCard:gn["a"],QCardSection:vn["a"],QChip:Ai["a"],QInput:j["a"],QBtn:b["a"],QEditor:hn["a"]});var Un=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-12 q-px-xs q-py-sm"},[i("div",{staticClass:"row justify-center items-center"},[i("div",{staticClass:"col-10 q-pl-sm"},[i("q-select",{ref:"q-form-cacemuser",attrs:{dense:"",value:e.selectUser,options:e.uoptions,"label-slot":!0,clearable:"","options-selected-class":"text-deep-orange","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0","options-sanitize":!1,"option-value":function(e){return null===e?null:e},"option-label":function(e){return null===e?null:""+e},"emit-value":"","map-options":""},on:{clear:function(t){e.selectUser=""},input:e.changeModel,filter:e.filterFn},scopedSlots:e._u([{key:"prepend",fn:function(e){return[i("q-avatar",{staticClass:"shadow-1",attrs:{icon:"person"}})]}},{key:"label",fn:function(){return[i("div",{staticClass:"text-h6"},[e._v("Utilisateur")])]},proxy:!0},{key:"option",fn:function(t){return[i("q-item",e._g(e._b({},"q-item",t.itemProps,!1),t.itemEvents),[i("q-item-section",{attrs:{avatar:""}},[i("img",{staticStyle:{height:"40px","max-width":"80px"},attrs:{src:t.opt.ThumbnailPhoto}})]),i("q-item-section",[i("q-item-label",[e._v(e._s(t.opt.Name))]),i("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.opt.mail))])],1)],1)]}},{key:"selected-item",fn:function(t){return[i("q-avatar",[i("img",{staticStyle:{height:"50px","max-width":"80px"},attrs:{src:t.opt.ThumbnailPhoto}})]),e._v("\n          "+e._s(t.opt.DisplayName)+"\n        ")]}}])})],1),i("div",{staticClass:"col-2"},[i("div",{staticClass:"row items-center justify-center"},[i("q-btn",{attrs:{dense:"",color:"primary",icon:"add",flat:""},on:{click:function(t){e.sUsers.push(e.selectUser),e.$emit("update",e.sUsers)}}})],1)])]),i("div",{staticClass:"row justify-center items-center q-px-none q-py-none full-width"},[i("q-list",{staticClass:"dense full-width q-px-none ",attrs:{dense:"",bordered:"",separator:""}},e._l(e.rUsers,(function(t,n){return i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:"acc-user-"+n,staticClass:"dense q-py-none",attrs:{dense:"",clickable:""}},[i("q-item-section",{staticClass:"q-py-none q-ma-none"},[i("div",{staticClass:"row full-width q-gutter-xs q-pa-none items-center justify-center"},[i("div",{staticClass:"q-pa-none"},[e._v(e._s(t)+" ")]),i("q-space"),i("q-btn",{staticClass:"text-red q-pa-none",attrs:{flat:"",icon:"remove"},on:{click:function(t){e.sUsers.splice(n,1),e.$emit("update",e.sUsers)}}})],1)])],1)})),1)],1)])},Nn=[],Bn=i("ed09"),Pn=Object(Bn["d"])({name:"CacemusersElement",props:{value:{type:Array}},data:function(){return{selectUser:null,selectedUsers:[],sUsers:this.value,users:null,model:null,uoptions:[]}},computed:{rUsers:function(){return this.value&&(console.log("Option value:",this.value),this.sUsers=Object.assign([],this.value)),this.sUsers}},methods:{abortFilterFn:function(){},filterFn:function(e,t,i){var n=this;t((function(){var t=e.toLocaleLowerCase();n.users.length>0&&(console.log("Ref :",n.users.filter((function(e){return e.Name.toLocaleLowerCase().indexOf(t)>-1}))),n.uoptions=n.users.filter((function(e){return e.Name.toLocaleLowerCase().indexOf(t)>-1})))}))},selectOption:function(e){console.log("Option :",e),this.model=e.opt.mail},setModel:function(e){console.log("Model :",e),this.selectUser=e},changeModel:function(e){console.log("Display val :",this.selectUser),console.log("Model val ",e),console.log("Comp :",this.$refs["q-form-cacemuser"]);Object(e).hasOwnProperty("DisplayName")&&(this.selectUser="".concat(e.DisplayName))},getNewModel:function(e,t){console.log("Model val :",e),t(e,"add-unique")}},beforeMount:function(){this.value&&(this.sUsers=Object.assign([],this.value))},mounted:function(){var e=this;return V()(regeneratorRuntime.mark((function t(){var i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("Model val :",e.value),e.value&&(e.sUsers=Object.assign([],e.value)),t.next=5,$["c"].service("tables").find({query:{tableDb:"cacemdb",tableName:"ad-users",query:JSON.stringify({query:{}})}});case 5:i=t.sent,e.users=i?i.filter((function(e){return"true"==e.Enabled})):null,t.next=13;break;case 9:return t.next=11,$["c"].service("tables").find({query:{tableDb:"cacemdb",tableName:"ad-users",query:JSON.stringify({query:{}})}});case 11:n=t.sent,e.users=n?n.filter((function(e){return"true"==e.Enabled})):null;case 13:e.users&&(console.log("Liste des utilisateurs :",e.users.length),e.uoptions=e.users);case 14:case"end":return t.stop()}}),t)})))()},watch:{value:function(e){console.log("Users :",e),this.sUsers=Object.assign([],e),this.$emit("update",e)}}}),Vn=Pn,$n=i("2c91"),zn=i("714f"),Jn=Object(T["a"])(Vn,Un,Nn,!1,null,null,null),Hn=Jn.exports;A()(Jn,"components",{QSelect:z["a"],QForm:Q["a"],QAvatar:Y["a"],QItem:Z["a"],QItemSection:G["a"],QItemLabel:K["a"],QBtn:b["a"],QList:he["a"],QSpace:$n["a"]}),A()(Jn,"directives",{Ripple:zn["a"]});var Yn={name:"VvFormBuilder",components:{CacemusersList:Hn,EditableElement:Ri,EditableElementOptions:yn,EditableHiddenElementOptions:Ln,draggable:w.a,QLayout:l["a"],QPageContainer:s["a"],QPage:c["a"],QDrawer:d["a"],QTab:u["a"],QTabs:m["a"],QTabPanel:p["a"],QTabPanels:f["a"],QTooltip:_["a"],QBtn:b["a"],QImg:h["a"],TextElement:U,CacemusersElement:X,CommunesElement:re,ParagraphElement:me,CheckboxesElement:ye,RadioElement:Me,DateElement:Ue,TimeElement:Je,DropdownElement:We,EmailElement:ot,NameElement:dt,SimpleNameElement:bt,AddressElement:Ct,PhoneElement:kt,FileElement:It,PaymentElement:zt,TermsElement:Wt,PageBreakElement:ui,ImageElement:hi,SectionBreakElement:ai,PassagersElement:Ci,HiddenElement:ki},data:function(){return{left:!1,right:!1,jsonFile:null,formT:this.formType,accusers:this.formAcc,fields:this.value,hiddenFields:this.value.filter((function(e){return"hidden"==e.type})),drawer:!0,showpreview:!1,tab:"add",currentField:!1,hovered:[]}},props:{navPosition:{type:String,default:"left"},fieldIdName:{default:"_id"},value:{required:!0,type:Array},idForm:{required:!1,type:String,default:""},formName:{required:!1,type:String,default:""},formType:{required:!0,type:String,default:"privé"},formAcc:{required:!1,type:Array},nameForm:{required:!1,type:String,default:""},dbname:{required:!1,type:String,default:""},tablename:{required:!1,type:String,default:""},submitOptions:{required:!1,type:Object,default:function(){return{}}},sourceFields:{required:!1,default:function(){return[{type:"text",icon:"text_format",label:"Text"},{type:"paragraph",icon:"text_fields",label:"Paragraphe"},{type:"checkboxes",icon:"check_box",label:"Case à cocher"},{type:"radio",icon:"radio_button_checked",label:"Choix multi"},{type:"date",icon:"event",label:"Date"},{type:"time",icon:"access_time",label:"Heure"},{type:"dropdown",icon:"arrow_drop_down",label:"Liste Choix"},{type:"email",icon:"email",label:"E-mail"},{type:"image",icon:"image",label:"Image"},{type:"cacemusers",icon:"person",label:"Util. CACEM"},{type:"communes",icon:"home",label:"Communes"},{type:"passagers",icon:"people",label:"Passagers"},{type:"section_break",icon:"view_agenda",label:"Section"},{type:"hidden",icon:"visibility_off",label:"Element Caché"},{type:"file",icon:"cloud_upload",label:"Téléchargement de fichier"}]}}},methods:{doShowPreview:function(){this.showpreview=!this.showpreview,1==this.showpreview?this.drawer=!1:this.drawer=!0},saveForm:function(){var e=Object.assign([],this.fields);this.$emit("save",e,this.formName,this.formType,this.accusers,this.dbname,this.tablename)},onList:function(){var e=Object.assign([],this.fields);this.$emit("onlist",e)},toggleLeftDrawer:function(){this.drawer=!this.drawer},createField:function(e){return console.log("Field to create :",e),"hidden"==e.type?{label:M(e.type),field_type:e.type,cid:Object(g["a"])(),id:e.id,name:e.id,show_options:[],event_options:[]}:["section_break"].includes(e.type)?{label:M(e.type),field_type:e.type,cid:Object(g["a"])(),name:e.type,show_options:[],event_options:[]}:{label:M(e.type),field_type:e.type,required:!0,cid:Object(g["a"])(),id:e.id,name:e.id,span:12,mask:"",show_options:[],field_options:F(e.type)}},createHiddenField:function(e){return{label:M(e.type),field_type:e.type,cid:Object(g["a"])(),id:e.id,name:e.id,event_options:[]}},deleteField:function(e){this.currentField=!1,this.$delete(this.fields,e)},duplicateField:function(e){var t=Object(v["a"])(!0,{},this.fields[e]);t.cid=Object(g["a"])(),delete t[this.fieldIdName],this.fields.push(t),this.selectForEdit(t)},onChange:function(e){e.added&&this.selectForEdit(e.added.element)},onAddFieldClick:function(e){if("hidden"==e){var t=this.createHiddenField({type:e});this.fields.push(t)}else{var i=this.createField({type:e});this.fields.push(i),this.selectForEdit(i)}},selectForEdit:function(e){this.currentField=e},isSelectedForEdit:function(e){return this.currentField.cid===this.fields[e].cid},getFieldByCid:function(e){var t,i=r()(this.fields);try{for(i.s();!(t=i.n()).done;){var n=t.value;if(n.cid===e)return n}}catch(o){i.e(o)}finally{i.f()}return!1},getElement:function(e){for(var t=e.field_type.split("_"),i=0;i<t.length;i++)t[i]=t[i].charAt(0).toUpperCase()+t[i].slice(1);return t.join("")+"Element"},exportToJSON:function(){var e=Object(q["a"])("form.json",JSON.stringify(this.fields),"text/json");!0!==e&&this.$q.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})},importFromJSON:function(){var e=this;console.log("Fichier sélectionné :",this.jsonFile);var t=new FileReader;t.onload=function(t){console.log("Contenu :",t.target.result);var i=JSON.parse(t.target.result);e.fields=Object.assign([],i)},t.readAsText(this.jsonFile)}},computed:{sourceOptions:function(){return{group:{name:"q-form-builder",pull:"clone",put:!1}}},destinationOptions:function(){return{group:{name:"q-form-builder",pull:!1,put:!0}}}},beforeMount:function(){this.formT=this.formType,this.fields&&this.fields instanceof Array||(this.fields=[])},watch:{fields:function(e){console.log("Form :",e),this.hiddenFields=Object.assign([],e.filter((function(e){return"hidden"==e.field_type}))),this.$emit("input",e)},hiddenFields:function(e){console.log("Form hidden change :",e)},value:function(e){this.fields=e,e&&(this.hiddenFields=Object.assign([],e.filter((function(e){return"hidden"==e.field_type})))),this.currentField&&this.selectForEdit(this.getFieldByCid(this.currentField.cid))},formAcc:function(e){this.accusers=Object.assign([],e)}},errorCaptured:function(e,t,i){console.log("Error :",error),console.log("Vm component :",t),console.log("Info :",i)}},Zn=Yn,Gn=(i("6879"),Object(T["a"])(Zn,jn,Dn,!1,null,null,null)),Kn=Gn.exports;A()(Gn,"components",{QLayout:l["a"],QDrawer:d["a"],QBtn:b["a"],QSeparator:ti["a"],QTooltip:_["a"],QExpansionItem:an["a"],QCard:gn["a"],QCardSection:vn["a"],QFile:Li["a"],QIcon:je["a"],QInput:j["a"],QToggle:Ii["a"],QChip:Ai["a"],QCardActions:xn["a"],QHeader:En["a"],QToolbar:On["a"],QToolbarTitle:Fn["a"],QAvatar:Y["a"],QPageContainer:s["a"],QPage:c["a"],QForm:Q["a"],QField:Mn["a"]});var Wn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-layout",{staticStyle:{width:"100%",height:"100%","min-height":"calc(90vh - 50px)","min-width":"50vh"},attrs:{container:"",view:"hHh lpR lFf"}},[n("q-header",{staticClass:"bg-primary text-white ",attrs:{elevated:""}},[n("q-toolbar",{staticClass:"full-width"},[n("q-btn",{attrs:{dense:"",flat:"",round:"",icon:"menu"},on:{click:e.toggleLeftDrawer}}),n("q-toolbar-title",[n("q-avatar",[n("img",{staticClass:"bg-white",attrs:{src:i("cf05")}})]),e._v("\n        Créateur de formulaires ("+e._s(e.nameForm)+")\n\n      ")],1),n("q-btn",{staticClass:"q-mr-xs",attrs:{flat:"",round:"",dense:"",icon:"home"},on:{click:function(t){return e.$emit("goBack")}}}),n("q-btn",{staticClass:"q-mr-xs",attrs:{flat:"",round:"",dense:"",icon:"preview"},on:{click:function(t){return e.doShowPreview()}}},[n("q-tooltip",{attrs:{"content-class":"bg-amber text-dark","content-style":"font-size: 1.2em"}},[e._v("\n          Apercu de votre formulaire\n        ")])],1)],1)],1),n("q-drawer",{attrs:{overlay:!!e.$q.platform.mobile,bordered:"",side:e.navPosition},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[n("q-tabs",{staticClass:"q-pt-none",attrs:{align:"justify",dense:"","narrow-indicator":""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[n("q-tab",{attrs:{name:"add",label:"Composants"}}),n("q-tab",{attrs:{name:"edit",label:"Propriétés",disable:!e.currentField}})],1),n("q-tab-panels",{attrs:{animated:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[n("q-tab-panel",{attrs:{name:"add"}},[n("draggable",e._b({attrs:{list:e.sourceFields,clone:e.createField,sort:!1}},"draggable",e.sourceOptions,!1),e._l(e.sourceFields,(function(t,i){return n("div",{key:i,staticClass:"source-field q-gutter-xs row no-wrap"},[""!==t.type?n("q-btn",{staticClass:"btn-fixed-width",attrs:{type:"button",size:"12px",dense:"",align:"left",icon:t.icon,label:t.label},on:{click:function(i){return e.onAddFieldClick(t.type)}}}):e._e()],1)})),0),n("q-separator",{staticClass:"q-my-md"}),n("div",{staticClass:"q-pa-none q-gutter-md"},[n("div",{staticClass:"row q-gutter-md q-px-none"},[n("q-btn",{attrs:{color:"primary",icon:"save",glossy:"","text-color":"white",dense:"","no-caps":"",label:"Enregistrer"},on:{click:function(t){return e.saveForm()}}},[n("q-tooltip",{attrs:{"content-class":"bg-amber-5 text-dark","content-style":"font-size: 1.2em"}},[n("div",{staticClass:"text-justify-center text-bold text-size-16"},[e._v("Enregistrement du formulaire en cours "),n("br"),e._v("ou création d'un nouveau")])])],1),n("q-btn",{attrs:{color:"primary",icon:"list",glossy:"","text-color":"white",dense:"","no-caps":"",label:"Formulaires"},on:{click:function(t){return e.onList()}}})],1),n("q-separator",{staticClass:"q-my-md"}),n("q-expansion-item",{staticClass:"text-center tex-bold",attrs:{label:"Export/Import en JSON"}},[n("q-card",[n("q-card-section",[n("div",{staticClass:"row q-gutter-md q-px-none"},[n("q-btn",{attrs:{dense:"",color:"primary",glossy:"",icon:"list","no-caps":"",label:"JSON"},on:{click:function(t){return e.exportToJSON()}}}),n("q-file",{staticStyle:{"max-width":"100px"},attrs:{dense:"",label:"Fichier JSON",accept:".json, text/json",filled:""},on:{input:function(t){return e.importFromJSON()}},model:{value:e.jsonFile,callback:function(t){e.jsonFile=t},expression:"jsonFile"}})],1)])],1)],1)],1)],1),n("q-tab-panel",{attrs:{name:"edit"}},[n("editable-element-options",{attrs:{"type-info":e.sourceFields,"fields-list":e.fields,submitOptions:e.submitOptions},model:{value:e.currentField,callback:function(t){e.currentField=t},expression:"currentField"}})],1)],1)],1),n("q-page-container",[n("q-page",{directives:[{name:"show",rawName:"v-show",value:!e.showpreview,expression:"!showpreview"}],staticClass:"q-form-builder-page bg-white"},[n("draggable",{class:{"q-form-builder-elements-container":!0,empty:0==e.fields.length,row:!0,"q-gutter-none":!0},staticStyle:{width:"100%","max-width":"100%"},attrs:{options:e.destinationOptions},on:{change:e.onChange},model:{value:e.fields,callback:function(t){e.fields=t},expression:"fields"}},e._l(e.fields,(function(t,i){return n("div",{key:i,class:t.span?"col-"+t.span+" editable-element-container":"col-auto editable-element-container"},[n("editable-element",{ref:e.fields[i].cid,refInFor:!0,class:{selected:e.isSelectedForEdit(i)},on:{click:e.selectForEdit},model:{value:e.fields[i],callback:function(t){e.$set(e.fields,i,t)},expression:"fields[idx]"}}),n("div",{staticClass:"editable-element-action-buttons"},[e.isSelectedForEdit(i)?n("q-btn",{staticClass:"editable-element-button",attrs:{color:"red",icon:"delete",round:"",size:"xs"},on:{click:function(t){return e.deleteField(i)}}},[n("q-tooltip",[e._v("Effacer ce champ")])],1):e._e(),e.isSelectedForEdit(i)?n("q-btn",{staticClass:"editable-element-button",attrs:{color:"primary",icon:"file_copy",round:"",size:"xs"},on:{click:function(t){return e.duplicateField(i)}}},[n("q-tooltip",[e._v("Dupliquer ce champ")])],1):e._e()],1)],1)})),0)],1),n("q-page",{directives:[{name:"show",rawName:"v-show",value:e.showpreview,expression:"showpreview"}],staticClass:"full-width bg-white"},[n("div",{staticClass:"q-gutter-md row"},[n("div",{staticClass:"q-gutter-none row"},e._l(e.fields,(function(t,i){return n("div",{key:i,class:t.span?"col-"+t.span:"col-auto"},[n(e.getElement(t),{ref:t.cid,refInFor:!0,tag:"component",attrs:{disabled:"true",show_options:t.field_show_options,ofields:e.fields,label:t.label,labelToolTip:t.labelToolTip,required:t.required,field_options:t.field_options,id:t.id,name:t.id,cid:t.cid,debounce:"500"}})],1)})),0)])])],1)],1)},Xn=[],eo={name:"QFormBuilder",components:{EditableElement:Ri,EditableElementOptions:yn,draggable:w.a,QLayout:l["a"],QPageContainer:s["a"],QPage:c["a"],QDrawer:d["a"],QTab:u["a"],QTabs:m["a"],QTabPanel:p["a"],QTabPanels:f["a"],QTooltip:_["a"],QBtn:b["a"],QImg:h["a"],TextElement:U,CacemusersElement:X,CommunesElement:re,ParagraphElement:me,CheckboxesElement:ye,RadioElement:Me,DateElement:Ue,TimeElement:Je,DropdownElement:We,EmailElement:ot,NameElement:dt,SimpleNameElement:bt,AddressElement:Ct,PhoneElement:kt,FileElement:It,PaymentElement:zt,TermsElement:Wt,PageBreakElement:ui,ImageElement:hi,SectionBreakElement:ai,PassagersElement:Ci},data:function(){return{jsonFile:null,fields:this.value,drawer:!0,showpreview:!1,tab:"add",currentField:!1,hovered:[]}},props:{navPosition:{type:String,default:"left"},fieldIdName:{default:"_id"},value:{required:!0,type:Array},idForm:{required:!1,type:String,default:""},nameForm:{required:!1,type:String,default:""},submitOptions:{required:!1,type:Object,default:function(){return{}}},sourceFields:{required:!1,default:function(){return[{type:"text",icon:"text_format",label:"Text"},{type:"paragraph",icon:"text_fields",label:"Paragraphe"},{type:"checkboxes",icon:"check_box",label:"Case à cocher"},{type:"radio",icon:"radio_button_checked",label:"Choix multi"},{type:"date",icon:"event",label:"Date"},{type:"time",icon:"access_time",label:"Heure"},{type:"dropdown",icon:"arrow_drop_down",label:"Liste Choix"},{type:"email",icon:"email",label:"E-mail"},{type:"image",icon:"image",label:"Image"},{type:"cacemusers",icon:"person",label:"Util. CACEM"},{type:"communes",icon:"home",label:"Communes"},{type:"passagers",icon:"people",label:"Passagers"}]}}},methods:{doShowPreview:function(){this.showpreview=!this.showpreview,1==this.showpreview?this.drawer=!1:this.drawer=!0},saveForm:function(){var e=this,t=Object.assign([],this.fields),i="accueil";""!=this.nameForm&&"accueil"!=this.nameForm&&"parking"!=this.nameForm&&(i="autre"),this.$q.dialog({title:"Sauvegarde du formulaire",message:"Vous souhaitez ce formulaire pour ",options:{type:"radio",model:i,items:[{label:"L' Accueil",value:"accueil",color:"secondary"},{label:"Autre..",value:"autre"}]},cancel:!0,persistent:!0}).onOk((function(i){if(console.log(">>>> OK, received",i),"autre"==i){var n="Nom";""!=e.nameForm&&(n=e.nameForm.toUpperCase()),e.$q.dialog({title:"Nom du formulaire",message:"Merci de donner un nom au formulaire ",prompt:{model:n,isValid:function(e){return e.length>2&&e.length<16&&1==/^[A-Za-z0-9]+$/.test(e)&&0==/accueil/.test(e.toLowerCase())&&0==/parking/.test(e.toLowerCase())},type:"text"},cancel:!0,persistent:!0}).onOk((function(i){e.$emit("save",{formName:i.toUpperCase(),data:t})}))}e.$emit("save",{formName:i,data:t})}))},onList:function(){var e=Object.assign([],this.fields);this.$emit("onlist",e)},toggleLeftDrawer:function(){this.drawer=!this.drawer},createField:function(e){return{label:M(e.type),field_type:e.type,required:!0,cid:Object(g["a"])(),id:e.id,name:e.id,span:12,show_options:[],field_options:F(e.type)}},deleteField:function(e){this.currentField=!1,this.tab="add",this.$delete(this.fields,e)},duplicateField:function(e){var t=Object(v["a"])(!0,{},this.fields[e]);t.cid=Object(g["a"])(),delete t[this.fieldIdName],this.fields.push(t),this.selectForEdit(t)},onChange:function(e){e.added&&this.selectForEdit(e.added.element)},onAddFieldClick:function(e){var t=this.createField({type:e});this.fields.push(t),this.selectForEdit(t)},selectForEdit:function(e){0==this.drawer&&(this.drawer=!0),this.currentField=e,this.tab="edit"},isSelectedForEdit:function(e){return this.currentField.cid===this.fields[e].cid},getFieldByCid:function(e){var t,i=r()(this.fields);try{for(i.s();!(t=i.n()).done;){var n=t.value;if(n.cid===e)return n}}catch(o){i.e(o)}finally{i.f()}return!1},getElement:function(e){for(var t=e.field_type.split("_"),i=0;i<t.length;i++)t[i]=t[i].charAt(0).toUpperCase()+t[i].slice(1);return t.join("")+"Element"},exportToJSON:function(){var e=Object(q["a"])("form.json",JSON.stringify(this.fields),"text/json");!0!==e&&this.$q.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})},importFromJSON:function(){var e=this;console.log("Fichier sélectionné :",this.jsonFile);var t=new FileReader;t.onload=function(t){console.log("Contenu :",t.target.result);var i=JSON.parse(t.target.result);e.fields=Object.assign([],i)},t.readAsText(this.jsonFile)}},computed:{sourceOptions:function(){return{group:{name:"q-form-builder",pull:"clone",put:!1}}},destinationOptions:function(){return{group:{name:"q-form-builder",pull:!1,put:!0}}}},beforeMount:function(){this.fields&&this.fields instanceof Array||(this.fields=[])},watch:{fields:function(e){console.log("Form :",e),this.$emit("input",e)},value:function(e){this.fields=e,this.currentField&&this.selectForEdit(this.getFieldByCid(this.currentField.cid))}},errorCaptured:function(e,t,i){console.log("Error :",error),console.log("Vm component :",t),console.log("Info :",i)}},to=eo,io=(i("fc8a"),Object(T["a"])(to,Wn,Xn,!1,null,null,null)),no=io.exports;A()(io,"components",{QLayout:l["a"],QBtn:b["a"],QHeader:En["a"],QToolbar:On["a"],QToolbarTitle:Fn["a"],QAvatar:Y["a"],QTooltip:_["a"],QDrawer:d["a"],QTabs:m["a"],QTab:u["a"],QTabPanels:f["a"],QTabPanel:p["a"],QSeparator:ti["a"],QExpansionItem:an["a"],QCard:gn["a"],QCardSection:vn["a"],QFile:Li["a"],QPageContainer:s["a"],QPage:c["a"],QForm:Q["a"],QField:Mn["a"]})},cf05:function(e,t,i){e.exports=i.p+"img/logo.937e1f7f.png"},ea54:function(e,t,i){"use strict";i("21e8")},ed4b:function(e,t,i){"use strict";i("96f6")},f9ea:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-dialog",{ref:"dialog",staticClass:"q-pa-none",on:{hide:e.onDialogHide}},[i("q-card",{staticClass:"q-dialog-plugin q-pa-none",style:"width:"+e.twidth+"; max-width:100%"},[i("q-card-section",{staticClass:"q-pa-none"},[i("q-bar",{staticClass:"bg-primary text-white"},[i("q-space"),i("q-btn",{attrs:{dense:"",flat:"",icon:"close"},on:{click:function(t){return e.hide()}}})],1)],1),i("q-card-section",{staticClass:"q-pa-none"},[i("q-input",{attrs:{filled:"",label:"Couleur du fond"},scopedSlots:e._u([{key:"append",fn:function(){return[i("q-icon",{staticClass:"cursor-pointer",attrs:{name:"colorize"}},[i("q-popup-proxy",{attrs:{cover:"","transition-show":"scale","transition-hide":"scale"}},[i("q-color",{model:{value:e.config.bgright,callback:function(t){e.$set(e.config,"bgright",t)},expression:"config.bgright"}})],1)],1)]},proxy:!0}]),model:{value:e.config.bgright,callback:function(t){e.$set(e.config,"bgright",t)},expression:"config.bgright"}})],1),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{attrs:{color:"secondary",label:"Valider"},on:{click:e.onOKClick}}),i("q-btn",{attrs:{color:"secondary",label:"Annuler"},on:{click:e.onCancelClick}})],1)],1)],1)},o=[],a=i("c973"),r=i.n(a),l=i("ded3"),s=i.n(l),c=(i("96cf"),i("9e62f"),i("2f62")),d=i("ed09"),u=(i("985a"),Object(d["d"])({name:"DiagSettings",components:{},data:function(){return{data:[],columns:[],selected:[],filter:"",bgright:""}},props:{config:{type:Object,required:!0},twidth:{type:String,default:"90%",required:!1}},methods:s()(s()({},Object(c["b"])("admin",["getConfig","writeConfig"])),{},{show:function(){this.$refs.dialog.show()},hide:function(){this.$refs.dialog.hide()},onDialogHide:function(){this.$emit("hide")},onOKClick:function(){this.$emit("ok",this.config),this.hide()},onCancelClick:function(){this.hide()}}),beforeMount:function(){console.log("Config  :",this.config),this.bgright=this.config.bgright},mounted:function(){return r()(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}})),m=u,p=i("2877"),f=i("24e8"),_=i("f09f"),b=i("a370"),h=i("d8472"),g=i("2c91"),v=i("9c40"),q=i("27f9"),y=i("0016"),w=i("7cbe"),C=i("b498"),x=i("4b7e"),E=i("eebe"),O=i.n(E),F=Object(p["a"])(m,n,o,!1,null,null,null);t["a"]=F.exports;O()(F,"components",{QDialog:f["a"],QCard:_["a"],QCardSection:b["a"],QBar:h["a"],QSpace:g["a"],QBtn:v["a"],QInput:q["a"],QIcon:y["a"],QPopupProxy:w["a"],QColor:C["a"],QCardActions:x["a"]})},fc8a:function(e,t,i){"use strict";i("1471")}}]);