(this["webpackJsonp"]=this["webpackJsonp"]||[]).push([[10],{"1d0e":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{staticClass:"flex flex-center"},[a("div",{class:e.$q.dark.isActive?"dark_gradient":"normal_gradient",attrs:{id:"particles-js"}}),e.showBuilder?a("rv-form-builder",{attrs:{value:e.fields,nameForm:e.currentFormName},on:{save:e.onSave,goBack:function(t){return e.gotoAccueil()},onlist:e.showListForms}}):e._e(),a("q-dialog",{attrs:{position:"left","full-height":""},model:{value:e.showAdminMenu,callback:function(t){e.showAdminMenu=t},expression:"showAdminMenu"}},[a("q-card",{staticStyle:{width:"280px"}},[a("q-linear-progress",{attrs:{value:1,color:"amber"}}),a("q-card-section",{staticClass:"row items-start no-wrap"},[a("q-list",[a("q-item-label",{staticClass:"text-h6 text-grey-8 q-pt-xs",attrs:{header:""}},[e._v("\n                        Menu Administrateur\n                    ")]),a("q-item",{attrs:{clickable:"",to:"/"}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"home"}})],1),a("q-item-section",[a("q-item-label",[e._v("Accueil")]),a("q-item-label",{attrs:{caption:""}},[e._v("\n                                Retour à l'accueil\n                            ")])],1)],1)],1)],1)],1)],1),a("q-dialog",{attrs:{position:"left","full-height":""},model:{value:e.showUserMenu,callback:function(t){e.showUserMenu=t},expression:"showUserMenu"}},[a("q-card",{staticStyle:{width:"280px"}},[a("q-linear-progress",{attrs:{value:1,color:"amber"}}),a("q-card-section",{staticClass:"row items-start no-wrap"},[a("q-list",[a("q-item-label",{staticClass:"text-h6 text-grey-8 q-pt-xs",attrs:{header:""}},[e._v("\n                        Menu Utilisateur\n                    ")]),a("q-item",{attrs:{clickable:"",to:"/"}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"home"}})],1),a("q-item-section",[a("q-item-label",[e._v("Accueil")]),a("q-item-label",{attrs:{caption:""}},[e._v("\n                                Retour à l'accueil\n                            ")])],1)],1),a("q-item",{attrs:{clickable:"",to:{path:"nouveau",query:{type:"parking"}}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"directions_car_filled"}})],1),a("q-item-section",[a("q-item-label",[e._v("Packing")]),a("q-item-label",{attrs:{caption:""}},[e._v("\n                                Formulaire packing\n                            ")])],1)],1)],1)],1)],1)],1)],1)},s=[],n=(a("e9c4"),a("2f62")),o=a("ed09"),r=a("bc78"),l=(a("cf57"),a("bd4c")),c=a("c18b"),m=a("bc6f"),d=a("f9ea");const{lighten:u,setBrand:h}=r["a"];var p=Object(o["d"])({name:"FormBuilder",components:{RvFormBuilder:c["r"],QFormBuilder:c["p"],TextElement:c["v"],CacemusersElement:c["b"],CommunesElement:c["d"],ParagraphElement:c["l"],CheckboxesElement:c["c"],RadioElement:c["q"],DateElement:c["e"],TimeElement:c["w"],DropdownElement:c["f"],EmailElement:c["g"],NameElement:c["j"],SimpleNameElement:c["t"],AddressElement:c["a"],PhoneElement:c["o"],FileElement:c["h"],PaymentElement:c["n"],TermsElement:c["u"],PageBreakElement:c["k"],ImageElement:c["i"],SectionBreakElement:c["s"],PassagersElement:c["m"]},data(){"Dimanche_Lundi_Mardi_Mercredi_Jeudi_Vendredi_Samedi".split("_"),"Dim_Lun_Mar_Mer_Jeu_Ven_Sam".split("_"),"Janvier_Février_Mars_Avril_Mai_Juin_Juillet_Aôut_Septembre_Octobre_Novembre_Décembre".split("_"),"Jan_Fév_Mar_Avr_Mai_Jun_Jui_Aou_Sep_Oct_Nov_Déc".split("_");return{tab:"nouveau",showBuilder:!0,fields:[],fieldData:[],fieldsModel:{},currentFormName:"accueil",showPopUp:!1,showTimePopUp:!1,FormValid:!0,showAdminMenu:!1,showUserMenu:!1,showParticules:!0,currentTitle:"",selectedDate:l["b"].formatDate(Date.now(),"DD/MM/YYYY"),selectedTime:l["b"].formatDate(Date.now(),"HH:mm"),sfVisiteurs:{arriveed:l["b"].formatDate(Date.now(),"DD/MM/YYYY"),arriveeh:l["b"].formatDate(Date.now(),"HH:mm"),sortieh:l["b"].formatDate(Date.now(),"HH:mm")}}},computed:{...Object(n["e"])("adinfos",{isAdmin:e=>e.isAdmin,isSiteAdmin:e=>e.isSiteAdmin}),...Object(n["e"])("admin",{formData:e=>e.getform,fconfig:e=>e.config})},methods:{...Object(n["c"])("admin",["getAllVisiteurs","addVisiteur","getForm","saveForm","getConfig","writeConfig"]),async gotoAccueil(){this.$router.push("/")},async onSave(e){if(console.log("onSave :",e),await this.saveForm({nom:e.formName,data:e.data}),await this.updateDisplayForm(this.currentFormName),this.formData.length>0&&this.formData[0].data.length>0){const e=Object.assign([],this.formData),t=Object.assign([],e[0].data);this.setForm(t,{})}this.$q.notify({message:"Formulaire mémoriser avec succès",color:"positive"}),console.log("Donnees form :",this.fieldData)},showListForms(e){this.$q.dialog({component:m["a"],dbname:"formulaires",dbtype:"db_regvisiteurs",twidth:"70%"}).onOk((async e=>{console.log("OK",e),this.currentFormName=e.nom,await this.updateDisplayForm(this.currentFormName)})).onCancel((()=>{console.log("Cancel")})).onDismiss((()=>{console.log("Called on OK or Cancel")}))},showSettings(e){this.$q.dialog({component:d["a"],config:this.fconfig,twidth:"70%"}).onOk((async e=>{console.log("OK settings",e),await this.writeConfig(e),Object(e).hasOwnProperty("bgright")&&r["a"].setBrand("bgright",e.bgright)})).onCancel((()=>{console.log("Cancel")})).onDismiss((()=>{console.log("Called on OK or Cancel")}))},async setForm(e,t){let a=Object.keys(t);Object.entries(t);this.fieldData=a.reduce(((e,a)=>(e[a]=t[a],e)),{});const i=Object.assign([],e);this.fields=Object.assign([],i),this.fieldsModel=Object.assign({},t)},onInput(e,t){console.log(`${t}: `+JSON.stringify(e)),console.log("Field Datas :",this.fieldData)},getElement(e){const t=e.field_type.split("_");for(let a=0;a<t.length;a++)t[a]=t[a].charAt(0).toUpperCase()+t[a].slice(1);return t.join("")+"Element"},async updateDisplayForm(e){if(await this.getForm({nom:e}),console.log("Donnée du formulaire chargée :",this.formData),"accueil"==e&&(this.currentTitle="ACCUEIL: Saisie d'un nouveau visiteur "),"parking"==e&&(this.currentTitle="PARKING : Saisie d'un nouveau visiteur "),Object(this.formData[0]).hasOwnProperty("titre")&&(this.currentTitle=this.formData[0].titre),this.formData.length>0&&this.formData[0].data.length>0){const e=Object.assign([],this.formData),t=Object.assign([],e[0].data);this.setForm(t,{datearr:l["b"].formatDate(Date.now(),"DD/MM/YYYY")})}}},async mounted(){this.showParticules&&particlesJS("particles-js",{particles:{number:{value:80,density:{enable:!0,value_area:800}},color:{value:"#ffffff"},shape:{type:"circle",stroke:{width:0,color:"#000000"},polygon:{nb_sides:5},image:{src:"img/github.svg",width:100,height:100}},opacity:{value:.5,random:!1,anim:{enable:!1,speed:1,opacity_min:.1,sync:!1}},size:{value:3,random:!0,anim:{enable:!1,speed:20,size_min:.1,sync:!1}},line_linked:{enable:!0,distance:150,color:"#ffffff",opacity:.4,width:1},move:{enable:!0,speed:6,direction:"none",random:!1,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:600,rotateY:1200}}},interactivity:{detect_on:"canvas",events:{onhover:{enable:!1,mode:"grab"},onclick:{enable:!1,mode:"push"},resize:!0},modes:{grab:{distance:140,line_linked:{opacity:1}},bubble:{distance:400,size:40,duration:2,opacity:8,speed:3},repulse:{distance:200,duration:.4},push:{particles_nb:4},remove:{particles_nb:2}}},retina_detect:!1}),await this.updateDisplayForm(this.currentFormName)},watch:{fields:{handler(e){console.log("FormData :",e)},deep:!0}}}),g=p,b=a("2877"),f=a("9989"),_=a("9c40"),v=a("f09f"),D=a("65c6"),w=a("6ac5"),q=a("05c0"),y=a("a370"),F=a("0378"),O=a("4b7e"),E=a("2c91"),M=a("24e8"),k=a("6b1d"),C=a("1c1c"),A=a("0170"),S=a("66e5"),j=a("4074"),Q=a("0016"),x=a("eebe"),P=a.n(x),N=Object(b["a"])(g,i,s,!1,null,null,null);t["default"]=N.exports;P()(N,"components",{QPage:f["a"],QBtn:_["a"],QCard:v["a"],QToolbar:D["a"],QToolbarTitle:w["a"],QTooltip:q["a"],QCardSection:y["a"],QForm:F["a"],QCardActions:O["a"],QSpace:E["a"],QDialog:M["a"],QLinearProgress:k["a"],QList:C["a"],QItemLabel:A["a"],QItem:S["a"],QItemSection:j["a"],QIcon:Q["a"]})}}]);