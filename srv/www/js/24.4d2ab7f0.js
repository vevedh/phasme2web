(this["webpackJsonp"]=this["webpackJsonp"]||[]).push([[24],{"0224":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{staticClass:"container q-pa-md full-width"},[e.showTables?e._e():a("q-card",{staticClass:"full-width q-pa-none"},[a("q-banner",{staticClass:"bg-secondary text-white q-pb-none",scopedSlots:e._u([{key:"action",fn:function(){},proxy:!0}],null,!1,1660095959)},[e._v("\n      Liste de toutes les bases\n      ")]),a("q-card-section",{staticClass:"row full-width q-pa-none"},[a("comp-databases",{on:{onClick:e.onDbSelect}})],1)],1),e.showTables&&!e.showDatas?a("q-card",{staticClass:"full-width q-pa-none"},[a("q-banner",{staticClass:"bg-secondary text-white q-pb-none",scopedSlots:e._u([{key:"action",fn:function(){return[a("div",{staticClass:"q-pb-sm"},[a("q-btn",{attrs:{icon:"arrow_back",flat:"",glossy:"",color:"white",label:"Retour"},on:{click:function(t){e.hasTables=!1}}})],1)]},proxy:!0}],null,!1,1253856632)},[e._v("\n      Liste de toutes les tables de la base\n      "),a("span",{staticClass:"text-bold"},[e._v(e._s(e.currentDatabase))])]),a("q-card-section",{staticClass:"full-width q-pa-none"},[a("comp-tables",{attrs:{database:e.currentDatabase},on:{onClick:e.dbRowDatas}})],1)],1):e._e(),e.showDatas?a("q-card",{staticClass:"full-width q-pa-none"},[a("q-banner",{staticClass:"bg-secondary text-white q-pb-none",scopedSlots:e._u([{key:"action",fn:function(){return[a("div",{staticClass:"q-pb-sm"},[a("q-btn",{attrs:{icon:"arrow_back",flat:"",glossy:"",color:"white",label:"Retour"},on:{click:function(t){e.hasDatas=!1}}})],1)]},proxy:!0}],null,!1,3825377142)},[e._v("\n      Liste de toutes les tables de la base\n      "),a("span",{staticClass:"text-bold"},[e._v(e._s(e.selectTableData))])]),a("q-card-section",{staticClass:"full-width q-pa-none"},[a("comp-table-datas",{attrs:{database:e.currentDatabase,table:e.selectTableData}})],1)],1):e._e()],1)},n=[],r=a("c973"),o=a.n(r),l=a("ded3"),c=a.n(l),i=(a("96cf"),a("cca6"),a("2f62")),u=(a("bd4c"),a("cf57")),b=a("9c40"),d=(a("05c0"),a("5494")),h=a("985a"),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-table",{ref:"dqsd",staticStyle:{width:"100%",height:"100%"},attrs:{data:e.getDatas,editable:!1}})},p=[],m=a("448a"),g=a.n(m),w=(a("7db0"),a("d3b7"),a("ed09")),D=Object(w["d"])({components:{FVvTable:h["a"]},data:function(){return{donnees:[]}},methods:{},name:"SelectTables",props:{table:{type:String}},computed:{getDatas:function(){if(this.donnees)return g()(this.donnees)}},mounted:function(){var e=this;return o()(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d["c"].service("checkdbs").find({query:{todb:"".concat(e.table)}});case 2:a=t.sent,console.log("Les tables :",a),e.donnees=Object.assign([],a);case 5:case"end":return t.stop()}}),t)})))()},activated:function(){var e=this;return o()(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d["c"].service("checkdbs").find({query:{todb:"".concat(e.table)}});case 2:a=t.sent,console.log("Les tables :",a),e.donnees=Object.assign([],a);case 5:case"end":return t.stop()}}),t)})))()}}),T=D,v=a("2877"),C=a("eaac"),q=a("eebe"),$=a.n(q),k=Object(v["a"])(T,f,p,!1,null,null,null);k.exports;$()(k,"components",{QTable:C["a"]});var y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"full-width"},[a("FVvTable",{staticStyle:{width:"100%",height:"100%"},attrs:{titre:"Liste des bases",datas:e.lstDbs,editable:!1},on:{"row-click":e.dbRowClick}})],1)},_=[],x={name:"Test",components:{FVvTable:h["a"]},created:function(){},data:function(){return{}},props:{},computed:{lstDbs:function(){if(this.$store.state.allDatabases)return this.$store.state.allDatabases}},methods:{dbRowClick:function(e,t,a){var s=this;return o()(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.name,s.$q.loading.show({spinner:u["a"],spinnerColor:"red",message:"Chargement en cours..."}),e.next=4,s.$store.dispatch("adinfos/getTables",a);case 4:s.$q.loading.hide(),console.log("Tables :",s.$store.state.adinfos.currentTables),s.$emit("onClick",{db:a,tables:s.$store.state.adinfos.currentTables});case 7:case"end":return e.stop()}}),e)})))()}}},R=x,S=Object(v["a"])(R,y,_,!1,null,"434059c1",null),j=S.exports,O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"full-width"},[a("FVvTable",{staticStyle:{width:"100%",height:"100%"},attrs:{titre:"Liste des Tables",datas:e.lstTables,editable:!1},on:{"row-click":e.dbRowClick}})],1)},A=[],L={name:"Test",components:{FVvTable:h["a"]},data:function(){return{locTables:[]}},props:{database:{type:String},tables:{type:Array}},computed:{lstTables:function(){return this.$store.state.adinfos.currentTables}},methods:{dbRowClick:function(e,t,a){var s=this;return o()(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t.name,s.$emit("onClick",{db:s.database,table:a});case 2:case"end":return e.stop()}}),e)})))()}},mounted:function(){var e=this;return o()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("Les Tables :",e.$store.state.adinfos.currentTables),t.next=3,e.$store.dispatch("adinfos/getTables",e.database);case 3:case"end":return t.stop()}}),t)})))()},watch:{database:function(e){console.log("database change :",e)}}},F=L,V=Object(v["a"])(F,O,A,!1,null,"079ecbb3",null),Q=V.exports,E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"full-width"},[a("FVvTable",{staticStyle:{width:"100%",height:"100%"},attrs:{titre:"Liste des données de la table",datas:e.lstDatas,editable:e.isAdmin,selectable:e.isAdmin,readonly:!e.isAdmin,dbtype:e.database,dbname:e.table},on:{"row-click":e.dbRowClick}})],1)},G=[],B={name:"Test",components:{FVvTable:h["a"]},data:function(){return{donnees:[]}},props:{database:{type:String},table:{type:String}},computed:c()(c()({},Object(i["d"])("adinfos",{isAdmin:function(e){return e.isAdmin},isSiteAdmin:function(e){return e.isSiteAdmin},grpUser:function(e){return e.userGrpes},users:function(e){return e.users}})),{},{lstDatas:function(){if(this.$store.state.adinfos.currentDatas)return this.$store.state.adinfos.currentDatas}}),methods:{dbRowClick:function(e,t,a){t.name}},mounted:function(){var e=this;this.$q.loading.show({spinner:u["a"],spinnerColor:"red",message:"Chargement en cours..."}),this.$store.dispatch("adinfos/getTableDatas",[this.database,this.table]).then((function(){e.$q.loading.hide(),console.log("Les Données :",e.$store.state.adinfos.currentDatas)}))},watch:{database:function(e){console.log("database change :",e)},table:function(e){console.log("table change :",e)}}},J=B,P=Object(v["a"])(J,E,G,!1,null,"638106b1",null),U=P.exports,z={name:"PageDbadmin",components:{FVvTable:h["a"],CompDatabases:j,CompTables:Q,CompTableDatas:U},data:function(){return{currentDatabase:"",selectTableData:"",selectTable:"",selectTables:[],hasTables:!1,hasDatas:!1}},computed:c()(c()(c()({},Object(i["d"])("adinfos",{dbs:function(e){return e.bases},currentTables:function(e){return e.currentTables},currentDatas:function(e){return e.currentDatas}})),Object(i["c"])("adinfos",["getDatabases","getCurrentTables"])),{},{lstDbs:function(){if(this.$store.state.allDatabases)return this.$store.state.allDatabases},lstTables:function(){return this.selectTables},lstDatas:function(){if(Array.isArray(this.currentDatas))return Object.assign([],this.currentDatas)},showTables:function(){return this.hasTables},showDatas:function(){return this.hasDatas},selSelectTable:function(){return this.selectTable}}),methods:c()(c()({},Object(i["b"])("adinfos",["getAllDatabases","getTables","getTableDatas"])),{},{onDbSelect:function(e){console.log("Get tables :",e.tables),console.log("Get db :",e.db),this.currentDatabase=e.db,this.selectTables=e.tables,this.hasTables=!0,this.hasDatas=!1},dbRowDatas:function(e){var t=this;console.log("Get table :",e.table),console.log("Get db :",e.db),this.selectTableData=e.table,console.log("Table :",this.selectTableData),this.$store.dispatch("adinfos/getTableDatas",[e.db,e.table]).then((function(){console.log("Les Données :",t.$store.state.adinfos.currentDatas),t.$store.state.adinfos.currentDatas&&(t.hasDatas=!0)}))}}),mounted:function(){var e=this;return o()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$q.loading.show({spinner:u["a"],spinnerColor:"red",message:"Chargement en cours..."}),t.next=3,e.$store.dispatch("adinfos/getAllDatabases");case 3:console.log("Databases :",e.$store.state.adinfos.bases),console.log("CurrentDB :",e.$store.state.selectDataBase),console.log("CurrentTable :",e.$store.state.adinfos.currentTables),e.$q.loading.hide();case 7:case"end":return t.stop()}}),t)})))()}},H=z,I=a("9989"),K=a("f09f"),M=a("54e1"),N=a("a370"),W=Object(v["a"])(H,s,n,!1,null,null,null);t["default"]=W.exports;$()(W,"components",{QPage:I["a"],QCard:K["a"],QBanner:M["a"],QBtn:b["a"],QCardSection:N["a"]})}}]);