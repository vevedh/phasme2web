(this["webpackJsonp"]=this["webpackJsonp"]||[]).push([[17],{"1d0e":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",[e.showBuilder?a("vv-form-builder",{attrs:{value:e.fields,nameForm:e.currentFormId,formName:e.formName,formType:e.formType,formAcc:e.rformAcc},on:{save:e.onSave,goBack:function(t){return e.gotoAccueil()},onlist:e.showListForms,"update:formAcc":function(t){e.rformAcc=t},"update:form-acc":function(t){e.rformAcc=t}}}):e._e(),a("q-dialog",{attrs:{position:"left","full-height":""},model:{value:e.showAdminMenu,callback:function(t){e.showAdminMenu=t},expression:"showAdminMenu"}},[a("q-card",{staticStyle:{width:"280px"}},[a("q-linear-progress",{attrs:{value:1,color:"amber"}}),a("q-card-section",{staticClass:"row items-start no-wrap"},[a("q-list",[a("q-item-label",{staticClass:"text-h6 text-grey-8 q-pt-xs",attrs:{header:""}},[e._v("\n                        Menu Administrateur\n                    ")]),a("q-item",{attrs:{clickable:"",to:"/"}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"home"}})],1),a("q-item-section",[a("q-item-label",[e._v("Accueil")]),a("q-item-label",{attrs:{caption:""}},[e._v("\n                                Retour à l'accueil\n                            ")])],1)],1)],1)],1)],1)],1),a("q-dialog",{attrs:{position:"left","full-height":""},model:{value:e.showUserMenu,callback:function(t){e.showUserMenu=t},expression:"showUserMenu"}},[a("q-card",{staticStyle:{width:"280px"}},[a("q-linear-progress",{attrs:{value:1,color:"amber"}}),a("q-card-section",{staticClass:"row items-start no-wrap"},[a("q-list",[a("q-item-label",{staticClass:"text-h6 text-grey-8 q-pt-xs",attrs:{header:""}},[e._v("\n                        Menu Utilisateur\n                    ")]),a("q-item",{attrs:{clickable:"",to:"/"}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"home"}})],1),a("q-item-section",[a("q-item-label",[e._v("Accueil")]),a("q-item-label",{attrs:{caption:""}},[e._v("\n                                Retour à l'accueil\n                            ")])],1)],1),a("q-item",{attrs:{clickable:"",to:{path:"nouveau",query:{type:"parking"}}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"directions_car_filled"}})],1),a("q-item-section",[a("q-item-label",[e._v("Packing")]),a("q-item-label",{attrs:{caption:""}},[e._v("\n                                Formulaire packing\n                            ")])],1)],1)],1)],1)],1)],1)],1)},s=[],r=(a("498a"),a("e9c4"),a("2f62")),o=a("ed09"),n=a("bc78"),c=(a("cf57"),a("bd4c")),l=a("c18b"),m=a("bc6f"),d=a("f9ea");const{lighten:u,setBrand:h}=n["a"];var f=Object(o["d"])({name:"FormBuilder",components:{VvFormBuilder:l["y"],RvFormBuilder:l["s"],QFormBuilder:l["q"],TextElement:l["w"],CacemusersElement:l["b"],CommunesElement:l["d"],ParagraphElement:l["m"],CheckboxesElement:l["c"],RadioElement:l["r"],DateElement:l["e"],TimeElement:l["x"],DropdownElement:l["f"],EmailElement:l["g"],NameElement:l["k"],SimpleNameElement:l["u"],AddressElement:l["a"],PhoneElement:l["p"],FileElement:l["h"],PaymentElement:l["o"],TermsElement:l["v"],PageBreakElement:l["l"],ImageElement:l["j"],SectionBreakElement:l["t"],PassagersElement:l["n"],HiddenElement:l["i"]},data(){"Dimanche_Lundi_Mardi_Mercredi_Jeudi_Vendredi_Samedi".split("_"),"Dim_Lun_Mar_Mer_Jeu_Ven_Sam".split("_"),"Janvier_Février_Mars_Avril_Mai_Juin_Juillet_Aôut_Septembre_Octobre_Novembre_Décembre".split("_"),"Jan_Fév_Mar_Avr_Mai_Jun_Jui_Aou_Sep_Oct_Nov_Déc".split("_");return{tab:"nouveau",showBuilder:!0,fields:[],fieldData:[],fieldsModel:{},currentFormName:"vide",formName:"",formAcc:[],formType:"privé",currentFormId:"",showPopUp:!1,showTimePopUp:!1,FormValid:!0,showAdminMenu:!1,showUserMenu:!1,showParticules:!1,currentTitle:"",selectedDate:c["b"].formatDate(Date.now(),"DD/MM/YYYY"),selectedTime:c["b"].formatDate(Date.now(),"HH:mm"),sfVisiteurs:{arriveed:c["b"].formatDate(Date.now(),"DD/MM/YYYY"),arriveeh:c["b"].formatDate(Date.now(),"HH:mm"),sortieh:c["b"].formatDate(Date.now(),"HH:mm")}}},computed:{...Object(r["e"])("adinfos",{isAdmin:e=>e.isAdmin,isSiteAdmin:e=>e.isSiteAdmin}),...Object(r["e"])("admin",{formData:e=>e.getform,fconfig:e=>e.config,savedForm:e=>e.savedform}),...Object(r["e"])("auth",{currentUserId:e=>e.user.sAMAccountName}),rformAcc(){return Object(this.formData[0]).hasOwnProperty("accusers")?this.formData[0].accusers:[]}},methods:{...Object(r["c"])("admin",["getForm","saveForm","updateForm","getAllForms","getConfig","writeConfig"]),async gotoAccueil(){this.$router.push("/")},async onSave(e,t,a,i){if(console.log("onSave :",e,t),Array.isArray(e)&&0===e.length)this.$q.notify({message:"Formulaire vide sauvegarde impossible",color:"negative"});else if(""===t.trim())this.$q.notify({message:"Formulaire vide sauvegarde impossible",color:"negative"});else{if(this.currentFormId&&""!=this.currentFormId.trim()?await this.updateForm({uid:this.currentFormId,nom:t,data:e,user:this.currentUserId,type:a,accusers:i}):await this.saveForm({nom:t,data:e,user:this.currentUserId,type:a,accusers:i}),await this.updateDisplayForm(this.savedForm.uid),this.formData.length>0&&this.formData[0].data.length>0){const e=Object.assign([],this.formData),t=Object.assign([],e[0].data);this.setForm(t,{})}this.$q.notify({message:"Formulaire mémoriser avec succès",color:"positive"}),console.log("Donnees form :",this.fieldData)}},showListForms(e){this.$q.dialog({component:m["a"],dbname:"formulaires",dbtype:"cacemdb",twidth:"70%"}).onOk((async e=>{console.log("OK",e),this.currentFormId=e.uid,await this.updateDisplayForm(this.currentFormId)})).onCancel((()=>{console.log("Cancel")})).onDismiss((()=>{console.log("Called on OK or Cancel")}))},showSettings(e){this.$q.dialog({component:d["a"],config:this.fconfig,twidth:"70%"}).onOk((async e=>{console.log("OK settings",e),await this.writeConfig(e),Object(e).hasOwnProperty("bgright")&&n["a"].setBrand("bgright",e.bgright)})).onCancel((()=>{console.log("Cancel")})).onDismiss((()=>{console.log("Called on OK or Cancel")}))},async setForm(e,t){let a=Object.keys(t);Object.entries(t);this.fieldData=a.reduce(((e,a)=>(e[a]=t[a],e)),{});const i=Object.assign([],e);this.fields=Object.assign([],i),this.fieldsModel=Object.assign({},t)},onInput(e,t){console.log(`${t}: `+JSON.stringify(e)),console.log("Field Datas :",this.fieldData)},getElement(e){const t=e.field_type.split("_");for(let a=0;a<t.length;a++)t[a]=t[a].charAt(0).toUpperCase()+t[a].slice(1);return t.join("")+"Element"},async updateDisplayForm(e){await this.getForm(e),console.log("Donnée du formulaire chargée :",this.formData),Object(this.formData[0]).hasOwnProperty("titre")&&(this.currentTitle=this.formData[0].titre),this.formName=this.formData[0].nom,this.currentFormId=this.formData[0].uid;this.formData[0].accusers;if(Object.assign(this.formAcc,this.formData[0].accusers),console.log("Donnée du acces :",this.formAcc),this.formData.length>0&&this.formData[0].data.length>0){const e=Object.assign([],this.formData),t=Object.assign([],e[0].data);this.setForm(t,{datearr:c["b"].formatDate(Date.now(),"DD/MM/YYYY")})}}},async mounted(){this.showParticules&&particlesJS("particles-js",{particles:{number:{value:80,density:{enable:!0,value_area:800}},color:{value:"#ffffff"},shape:{type:"circle",stroke:{width:0,color:"#000000"},polygon:{nb_sides:5},image:{src:"img/github.svg",width:100,height:100}},opacity:{value:.5,random:!1,anim:{enable:!1,speed:1,opacity_min:.1,sync:!1}},size:{value:3,random:!0,anim:{enable:!1,speed:20,size_min:.1,sync:!1}},line_linked:{enable:!0,distance:150,color:"#ffffff",opacity:.4,width:1},move:{enable:!0,speed:6,direction:"none",random:!1,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:600,rotateY:1200}}},interactivity:{detect_on:"canvas",events:{onhover:{enable:!1,mode:"grab"},onclick:{enable:!1,mode:"push"},resize:!0},modes:{grab:{distance:140,line_linked:{opacity:1}},bubble:{distance:400,size:40,duration:2,opacity:8,speed:3},repulse:{distance:200,duration:.4},push:{particles_nb:4},remove:{particles_nb:2}}},retina_detect:!1})},watch:{fields:{handler(e){console.log("FormData :",e)},deep:!0}}}),p=f,g=a("2877"),b=a("9989"),v=a("24e8"),_=a("f09f"),D=a("6b1d"),w=a("a370"),y=a("1c1c"),F=a("0170"),q=a("66e5"),A=a("4074"),O=a("0016"),M=a("eebe"),E=a.n(M),j=Object(g["a"])(p,i,s,!1,null,null,null);t["default"]=j.exports;E()(j,"components",{QPage:b["a"],QDialog:v["a"],QCard:_["a"],QLinearProgress:D["a"],QCardSection:w["a"],QList:y["a"],QItemLabel:F["a"],QItem:q["a"],QItemSection:A["a"],QIcon:O["a"]})}}]);