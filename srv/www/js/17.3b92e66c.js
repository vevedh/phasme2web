(this["webpackJsonp"]=this["webpackJsonp"]||[]).push([[17],{"013f":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-page",{staticClass:"fit row justify-center "},[n("div",{staticClass:"column justify-center self-center q-pb-xl q-px-md",staticStyle:{width:"400px"}},[n("div",{staticClass:"row justify-center self-center rounded-borders q-pb-md",staticStyle:{width:"200px"}},[n("q-img",{staticClass:"rounded-borders",attrs:{src:e.url,"spinner-color":"white"}})],1),n("q-card",{staticClass:"my-card",attrs:{bordered:""}},[n("q-card-section",{staticClass:"text-center bg-primary text-white text-h5 q-py-xs",staticStyle:{width:"100%"}},[e._v("\n        Identification\n      ")]),n("q-separator"),n("q-card-section",{staticClass:"q-pb-none"},[n("q-form",{staticClass:"q-px-xl "},[n("q-input",{attrs:{filled:"","bottom-slots":"",label:"*Utilisateur :",dense:e.dense,"lazy-rules":"",rules:[function(e){return e&&e.length>0||"Utilisateur du domaine obligatoire!"}]},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),n("q-input",{attrs:{filled:"","bottom-slots":"",type:"password",label:"Mot de passe :",dense:e.dense},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),n("q-card-actions",{staticClass:"row items-center justify-center q-mt-md q-pt-none"},[n("div",{attrs:{hidden:!e.loading}},[n("div",{staticClass:"col items-center justify-center"},[n("div",[n("q-spinner",{attrs:{color:"primary",size:"3em",thickness:10}})],1),n("div",{staticClass:"text-h6"},[e._v("Vérifications en cours...")])])])]),n("q-card-actions",{staticClass:"row items-center justify-center q-mt-md q-pt-none"},[n("div",{staticClass:"q-gutter-xl"},[n("q-btn",{attrs:{color:"primary",icon:"lock","text-color":"white",label:"Connexion",disable:""==e.email||""==e.password},on:{click:function(t){return e.onSubmit(e.email,e.password)}}})],1)])],1)],1)])},i=[],s=n("c973"),r=n.n(s),o=n("ded3"),c=n.n(o),l=(n("96cf"),n("caad"),n("2532"),n("ac1f"),n("5319"),n("1b3f"),n("18d6")),u=(n("2a19"),n("436b"),n("b05d"),n("2f62")),d={name:"LoginPage",data:function(){return{email:"",password:"",url:"cacem.png",error:"",dense:!0,showParticules:!0,loading:!1}},computed:c()(c()(c()({},Object(u["d"])("adinfos",{isAdmin:function(e){return e.isAdmin},isSiteAdmin:function(e){return e.isSiteAdmin},grpUser:function(e){return e.userGrpes},siteRole:function(e){return e.siteRole}})),Object(u["c"])("auth",["isAuthenticated","user"])),{},{checkIsAuthenticated:function(){var e=this;return r()(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("Init"),t.next=3,e.$store.dispatch("auth/authenticate")["catch"]((function(e){console.log("Non authentifié!")}));case 3:if(n=t.sent,console.log("Auth :",n),n.user)try{e.grpUser.includes("Application WEB PARKING")&&e.$q.platform.is.mobile?e.$router.replace("/gardien"):e.$router.replace("/")}catch(a){}case 6:case"end":return t.stop()}}),t)})))()}}),mounted:function(){this.showParticules&&particlesJS("particles-js",{particles:{number:{value:80,density:{enable:!0,value_area:800}},color:{value:"#ffffff"},shape:{type:"circle",stroke:{width:0,color:"#000000"},polygon:{nb_sides:5},image:{src:"img/github.svg",width:100,height:100}},opacity:{value:.5,random:!1,anim:{enable:!1,speed:1,opacity_min:.1,sync:!1}},size:{value:3,random:!0,anim:{enable:!1,speed:20,size_min:.1,sync:!1}},line_linked:{enable:!0,distance:150,color:"#ffffff",opacity:.4,width:1},move:{enable:!0,speed:6,direction:"none",random:!1,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:600,rotateY:1200}}},interactivity:{detect_on:"canvas",events:{onhover:{enable:!1,mode:"grab"},onclick:{enable:!1,mode:"push"},resize:!0},modes:{grab:{distance:140,line_linked:{opacity:1}},bubble:{distance:400,size:40,duration:2,opacity:8,speed:3},repulse:{distance:200,duration:.4},push:{particles_nb:4},remove:{particles_nb:2}}},retina_detect:!1})},methods:{onSubmit:function(e,t){var n=this;console.log("Click"),this.loading=!0,this.$store.dispatch("auth/authenticate",{strategy:"ldap",username:e,password:t}).then((function(e){console.log("Result :",e),console.log("Result auth:",n.$store.state.auth),console.log("Result localstorage jwt:",l["a"].getAll()),console.log("Result localstorage jwt:",l["a"].getItem("feathers-jwt")),n.loading=!1,n.grpUser.includes("Application WEB PARKING")&&n.$q.platform.mobile?(console.log("Utilisateur parking"),n.$router.replace("/gardien")):n.$router.replace("/")}))["catch"]((function(e){n.loading=!1,console.log("Erreur fatale :",e),n.error=e,n.alert(n.error)}))},alert:function(e){this.$q.dialog({title:"Erreur d'authentification !!",message:"authentification impossible pour l'instant"}).onOk((function(){})).onCancel((function(){})).onDismiss((function(){}))},onRegister:function(e,t){this.$router.push("/login/register")}}},p=d,f=(n("50ba"),n("2877")),m=n("9989"),h=n("068f"),b=n("f09f"),g=n("a370"),w=n("eb85"),v=n("0378"),y=n("27f9"),q=n("4b7e"),x=n("0d59"),C=n("9c40"),k=n("eebe"),_=n.n(k),j=Object(f["a"])(p,a,i,!1,null,null,null);t["default"]=j.exports;_()(j,"components",{QPage:m["a"],QImg:h["a"],QCard:b["a"],QCardSection:g["a"],QSeparator:w["a"],QForm:v["a"],QInput:y["a"],QCardActions:q["a"],QSpinner:x["a"],QBtn:C["a"]})},"50ba":function(e,t,n){"use strict";n("fe3c")},fe3c:function(e,t,n){}}]);