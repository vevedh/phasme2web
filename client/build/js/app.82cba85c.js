(function(e){function t(t){for(var o,a,s=t[0],c=t[1],l=t[2],u=0,d=[];u<s.length;u++)a=s[u],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&d.push(i[a][0]),i[a]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);f&&f(t);while(d.length)d.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,a=1;a<n.length;a++){var s=n[a];0!==i[s]&&(o=!1)}o&&(r.splice(t--,1),e=c(c.s=n[0]))}return e}var o={},a={3:0},i={3:0},r=[];function s(e){return c.p+"js/"+({1:"chunk-common"}[e]||e)+"."+{1:"4faab013",2:"9ea7385e",4:"8a614ee1",5:"eb91b779",6:"4b0fd729",7:"aa36e823",8:"392d21cf",9:"9d411c0f",10:"480d48e8",11:"51118709"}[e]+".js"}function c(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={1:1,2:1,4:1,5:1,6:1,7:1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var o="css/"+({1:"chunk-common"}[e]||e)+"."+{1:"111ed798",2:"fe64d8ae",4:"881b1833",5:"677aca2a",6:"a357d9d3",7:"785ee199",8:"31d6cfe0",9:"31d6cfe0",10:"31d6cfe0",11:"31d6cfe0"}[e]+".css",i=c.p+o,r=document.getElementsByTagName("link"),s=0;s<r.length;s++){var l=r[s],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===o||u===i))return t()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){l=d[s],u=l.getAttribute("data-href");if(u===o||u===i)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var o=t&&t.target&&t.target.src||i,r=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=o,delete a[e],f.parentNode.removeChild(f),n(r)},f.href=i;var b=document.getElementsByTagName("head")[0];b.appendChild(f)})).then((function(){a[e]=0})));var o=i[e];if(0!==o)if(o)t.push(o[2]);else{var r=new Promise((function(t,n){o=i[e]=[t,n]}));t.push(o[2]=r);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=s(e);var d=new Error;l=function(t){u.onerror=u.onload=null,clearTimeout(f);var n=i[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+o+": "+a+")",d.name="ChunkLoadError",d.type=o,d.request=a,n[1](d)}i[e]=void 0}};var f=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},c.m=e,c.c=o,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)c.d(n,o,function(t){return e[t]}.bind(null,o));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var l=this["webpackJsonp"]=this["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var f=u;r.push([2,0]),n()})({"034f":function(e,t,n){"use strict";n("ed82")},2:function(e,t,n){e.exports=n("2f39")},"2f39":function(e,t,n){"use strict";n.r(t);var o={};n.r(o),n.d(o,"getRole",(function(){return X}));var a={};n.r(a),n.d(a,"setRole",(function(){return Z})),n.d(a,"setSiteAdmin",(function(){return ee}));var i={};n.r(i),n.d(i,"getRole",(function(){return ae})),n.d(i,"getSiteRole",(function(){return ie}));n("5319"),n("35fc"),n("9f29"),n("573e"),n("43b9"),n("7d6e"),n("e54f"),n("4439"),n("4605"),n("f580"),n("5b2b"),n("8753"),n("2967"),n("7e67"),n("d770"),n("dd82"),n("922c"),n("d7fb"),n("a533"),n("c32e"),n("a151"),n("8bc7"),n("e80f"),n("5fec"),n("e42f"),n("57fc"),n("d67f"),n("880e"),n("1c10"),n("9482"),n("e797"),n("4848"),n("53d0"),n("63b1"),n("e9fd"),n("195c"),n("64e9"),n("33c5"),n("4f62"),n("0dbc"),n("7c38"),n("0756"),n("4953"),n("81db"),n("2e52"),n("22485"),n("7797"),n("12a1"),n("ce96"),n("70ca"),n("2318"),n("24bd"),n("8f27"),n("3064"),n("c9a2"),n("8767"),n("4a8e"),n("b828"),n("3c1c"),n("21cb"),n("c00e"),n("e4a8"),n("e4d3"),n("f4d9"),n("fffd"),n("f645"),n("639e"),n("34ee"),n("b794"),n("af24"),n("7c9c"),n("7bb2"),n("64f7"),n("c382"),n("053c"),n("c48f8"),n("f5d1"),n("3cec"),n("c00ee"),n("d450"),n("ca07"),n("14e3"),n("9393"),n("9227"),n("1dba"),n("674a"),n("de26"),n("6721"),n("9cb5"),n("ed9b"),n("fc83"),n("98e5"),n("605a"),n("ba60"),n("df07"),n("7903"),n("e046"),n("58af"),n("7713"),n("0571"),n("3e27"),n("6837"),n("3fc9"),n("0693"),n("bf41"),n("985d"),n("31cd");var r=n("2b0e"),s=n("34fe"),c=n("42d2"),l=n("b05d"),u=n("7f67"),d=n("2a19"),f=n("18d6"),b=n("f508"),m=n("1b3f"),h=n("515f"),g=n("696d"),v=n("b12a"),p=n("436b"),y=n("ff52");r["default"].use(l["a"],{config:{},lang:s["a"],iconSet:c["a"],directives:{ClosePopup:u["a"]},plugins:{Notify:d["a"],LocalStorage:f["a"],Loading:b["a"],LoadingBar:m["a"],Cookies:h["a"],AddressbarColor:g["a"],AppFullscreen:v["a"],Dialog:p["a"],Dark:y["a"]}});var q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"q-app"}},[n("router-view")],1)},w=[],A=n("ed09"),N=Object(A["d"])({name:"App"}),S=N,D=(n("034f"),n("2877")),P=Object(D["a"])(S,q,w,!1,null,null,null),O=P.exports,x=n("2f62"),T=n("4bde"),j=n("5494");class _ extends j["a"]{constructor(e,t){super(e,t)}static instanceDefaults(){return{email:""}}}_.modelName="User";const C="users",M=Object(j["e"])({Model:_,service:j["c"].service(C),servicePath:C,whitelist:["$regex","$options"]}),E=e=>{const{params:t}=e;return console.log("Check Find User ",t),t.query.email&&(console.log("Email :",t.query.email),t.query.email.$regex=new RegExp(t.query.email.$regex,"igm")),e};j["c"].service(C).hooks({before:{all:[],find:[E],get:[],create:[],update:[],patch:[],remove:[]},after:{all:[],find:[],get:[],create:[],update:[],patch:[],remove:[]},error:{all:[],find:[],get:[],create:[],update:[],patch:[],remove:[]}});var L=M,k=function(e,t,n,o){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function r(e){try{c(o.next(e))}catch(t){i(t)}}function s(e){try{c(o["throw"](e))}catch(t){i(t)}}function c(e){e.done?n(e.value):a(e.value).then(r,s)}c((o=o.apply(e,t||[])).next())}))};class $ extends j["a"]{constructor(e,t){super(e,t)}static instanceDefaults(){return{}}}$.modelName="Table";const R="tables",F=Object(j["e"])({Model:$,service:j["c"].service(R),servicePath:R,whitelist:["$regex","$options"],extend({store:e,module:t}){return{state:{table:[],actualites:[{_id:"",description:"test",rubriques:[],titre:"NOS ACTUALITES",type:"actualite"}]},getters:{listActus(e){return e.actualites[0]},getTableQuery(e){return e.table}},mutations:{setAllActus(e,t){console.log("Test setAllActus :",t),e.actualites=t},setTableQuery(e,t){let n=t[0],o=t[1],a=t[2];if(console.log(`Set Params : ${n},${o}`),Array.isArray(e.table)){let t=e.table.filter((e=>e.type==n&&e.table==o));0==t.length?e.table.push({type:n,name:o,datas:a}):e.table.map((e=>(e.type==n&&e.table==o&&(e.datas=a),e)))}}},actions:{getTableQuery(e,t){let n=t[0],o=t[1],a=t[2];console.log(`Params : ${n},${o},${a}`),j["c"].service(R).find({query:{tableDb:n,tableName:o,query:JSON.stringify({query:a})}}).then((t=>{console.log("Datas :",t),console.log("Query :",a);let i=[];i.push(n),i.push(o),i.push(t),console.log("payload :",i),e.commit("setTableQuery",i)}))},getTableById(e,t){return k(this,void 0,void 0,(function*(){let n=t[0],o=t[1],a=t[2],i=yield j["c"].service(R).find({query:{tableDb:o,tableName:a,query:JSON.stringify({query:{_id:n}})}}),r=[];r.push(o),r.push(a),r.push(i),console.log("payload :",r),e.commit("setTableQuery",r)}))},updateTableById(e,t){return k(this,void 0,void 0,(function*(){let n=t[0],o=t[1],a=t[2],i=t[3],r=yield j["c"].service(R).find({query:{tableDb:o,tableName:a,query:JSON.stringify({query:{_id:n}})}}),s=yield j["c"].service(R).update(r._id,i,{query:{tableDb:o,tableName:a}}),c=[];c.push(o),c.push(a),c.push(s),console.log("payload :",c),e.commit("setTableQuery",c)}))},createDataTable(e,t){return k(this,void 0,void 0,(function*(){let n=t[0],o=t[1],a=t[2],i=yield j["c"].service(R).create(a,{query:{tableDb:n,tableName:o}}),r=[];r.push(n),r.push(o),r.push(i),console.log("payload :",r),e.commit("setTableQuery",r)}))},getAllActus(e,t){j["c"].service(R).find({query:{tableDb:"mongodb",tableName:"dbHomeSections",query:JSON.stringify({query:{type:"actualite"}})}}).then((t=>{e.commit("setAllActus",t)}))},updateRubriqueActusById(e,t){return k(this,void 0,void 0,(function*(){let n=t[0],o=t[1],a=yield j["c"].service(R).find({query:{tableDb:"mongodb",tableName:"dbHomeSections",query:JSON.stringify({query:{type:"actualite"}})}});a[0].rubriques[n]=o,yield j["c"].service(R).update(a[0]._id,a[0],{query:{tableDb:"mongodb",tableName:"dbHomeSections"}}),e.commit("setAllActus",a)}))},addRubriqueActus(e,t){return k(this,void 0,void 0,(function*(){let n=t[0],o=yield j["c"].service(R).find({query:{tableDb:"mongodb",tableName:"dbHomeSections",query:JSON.stringify({query:{type:"actualite"}})}});console.log("Actualites :",o),o[0].rubriques.push(n),yield j["c"].service(R).update(o[0]._id,o[0],{query:{tableDb:"mongodb",tableName:"dbHomeSections"}}),e.commit("setAllActus",o)}))},delRubriqueActus(e,t){return k(this,void 0,void 0,(function*(){let n=t[0],o=yield j["c"].service(R).find({query:{tableDb:"mongodb",tableName:"dbHomeSections",query:JSON.stringify({query:{type:"actualite"}})}});console.log("Actualites :",o),o[0].rubriques.splice(n,1),yield j["c"].service(R).update(o[0]._id,o[0],{query:{tableDb:"mongodb",tableName:"dbHomeSections"}}),e.commit("setAllActus",o)}))}}}}});j["c"].service(R).hooks({before:{all:[],find:[],get:[],create:[],update:[],patch:[],remove:[]},after:{all:[],find:[],get:[],create:[],update:[],patch:[],remove:[]},error:{all:[],find:[],get:[],create:[],update:[],patch:[],remove:[]}});var V=F;class J extends j["a"]{constructor(e,t){super(e,t)}static instanceDefaults(){return{}}}J.modelName="ConfInfos";const Q="conf-infos",U=Object(j["e"])({Model:J,service:j["c"].service(Q),servicePath:Q,whitelist:["$regex","$options"]});j["c"].service(Q).hooks({before:{all:[],find:[],get:[],create:[],update:[],patch:[],remove:[]},after:{all:[],find:[],get:[],create:[],update:[],patch:[],remove:[]},error:{all:[],find:[],get:[],create:[],update:[],patch:[],remove:[]}});var B=U;class H extends j["a"]{constructor(e,t){super(e,t)}static instanceDefaults(){return{}}}H.modelName="CheckDbs";const I="checkdbs",G=Object(j["e"])({Model:H,service:j["c"].service(I),servicePath:I,whitelist:["$regex","$options"]});j["c"].service(I).hooks({before:{all:[],find:[],get:[],create:[],update:[],patch:[],remove:[]},after:{all:[],find:[],get:[],create:[],update:[],patch:[],remove:[]},error:{all:[],find:[],get:[],create:[],update:[],patch:[],remove:[]}});var z=G;function K(){return{bases:[],isAdmin:!1,isSiteAdmin:!1}}var W=K;function X(e){return e.isAdmin}var Y=function(e,t,n,o){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function r(e){try{c(o.next(e))}catch(t){i(t)}}function s(e){try{c(o["throw"](e))}catch(t){i(t)}}function c(e){e.done?n(e.value):a(e.value).then(r,s)}c((o=o.apply(e,t||[])).next())}))};function Z(e,t){console.log("Role :",t),e.isAdmin=t}function ee(e,t){return Y(this,void 0,void 0,(function*(){e.isSiteAdmin=t}))}var te=n("bc3a"),ne=n.n(te),oe=function(e,t,n,o){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function r(e){try{c(o.next(e))}catch(t){i(t)}}function s(e){try{c(o["throw"](e))}catch(t){i(t)}}function c(e){e.done?n(e.value):a(e.value).then(r,s)}c((o=o.apply(e,t||[])).next())}))};function ae({commit:e},t){return oe(this,void 0,void 0,(function*(){let n=!1;console.log("User to get role",t);let o=(yield j["c"].service("conf-infos").find()).admGroups;if(console.log("Admins :",o),console.log("Est authentifié :",j["c"].authentication.authenticated),j["c"].authentication.authenticated){const e=yield j["c"].authentication.app.authenticate();console.log("Auth infos :",e);let a=t;console.log("Current user ",a);let i=a.memberOf.map((e=>e.match(new RegExp(/(?<=CN=)(.*?)(?=\,)/,"gm"))[0]));console.log("User groupe :",i),n=i.filter((e=>(Array.isArray(o)?o:["none"]).includes(e))).length>0}console.log("ROLES isAdmin :",n),e("setRole",n)}))}function ie({commit:e}){return oe(this,void 0,void 0,(function*(){const t=(yield ne.a.get("admins.json")).data;if(console.log("Est authentifié :",j["c"].authentication.authenticated),j["c"].authentication.authenticated){const n=yield j["c"].authentication.app.authenticate();console.log("Auth infos :",n.user.sAMAccountName),console.log("Utilisateurs admins :",t);n.user.sAMAccountName;t.includes(n.user.sAMAccountName)?e("setSiteAdmin",!0):e("setSiteAdmin",!1)}}))}var re={namespaced:!0,state:W,getters:o,mutations:a,actions:i};function se(){return{title:"default title",config:{},leftMenu:!1,mailsend:!1,visiteurs:[],utilisateurs:[],status:[],motifs:[],etages:[],contacts:[],chgaccueils:[],savedform:[],getform:[]}}var ce=se,le=function(e,t,n,o){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function r(e){try{c(o.next(e))}catch(t){i(t)}}function s(e){try{c(o["throw"](e))}catch(t){i(t)}}function c(e){e.done?n(e.value):a(e.value).then(r,s)}c((o=o.apply(e,t||[])).next())}))};const ue={setTitle(e,t){e.commit("changeTitle",t)},getConfig(e){return le(this,void 0,void 0,(function*(){let t;console.log("Env :","production"),t=yield j["c"].service("json_regvisiteurs").get("config.json"),console.log("Config :",t),e.commit("setConfig",t)}))},writeConfig(e,t){return le(this,void 0,void 0,(function*(){let n;yield j["c"].service("json_regvisiteurs").create({path:"config.json",data:t}),console.log("Env :","production"),n=yield j["c"].service("json_regvisiteurs").get("config.json"),console.log("Config :",n),e.commit("setConfig",n)}))},toggleLeftDrawer(e){e.commit("changeLeftDrawer")},sendMail(e,t){return le(this,void 0,void 0,(function*(){console.log("FEATHERS :",j["c"]);let n=t.to,o=t.subject,a=t.message;const i={to:n,subject:o,html:`${a}`};let r=yield j["c"].service("mailer").create(i);r?e.commit("setMailSendEmail",!0):e.commit("setMailSendEmail",!1)}))},initDbFromArray(e,t){return le(this,void 0,void 0,(function*(){let e=t.datas,n=t.dbName,o=t.dbTable;Array.isArray(e)&&e.forEach((e=>le(this,void 0,void 0,(function*(){yield j["c"].service("tables").create(e,{query:{tableDb:n,tableName:o}})}))))}))},getAllUsers(e){return le(this,void 0,void 0,(function*(){let t;t=yield j["c"].service("tables").find({query:{tableDb:"cacemdb",tableName:"ad-users",query:JSON.stringify({query:{}})}}),console.log("Liste des utilisateurs :",t.length),e.commit("setAllUtilisateurs",t)}))},getAllVisiteurs(e){return le(this,void 0,void 0,(function*(){const t=yield j["c"].service("tables").find({query:{tableDb:"db_regvisiteurs",tableName:"dbf_accueil",query:JSON.stringify({query:{}})}});console.log("Liste des visiteurs :",t),e.commit("setAllVisiteurs",t)}))},addVisiteur(e,t){return le(this,void 0,void 0,(function*(){const n=yield j["c"].service("tables").create(t,{query:{tableDb:"db_regvisiteurs",tableName:"dbf_accueil"}});console.log("Add visiteur :",n);const o=yield j["c"].service("tables").find({query:{tableDb:"db_regvisiteurs",tableName:"dbf_accueil",query:JSON.stringify({query:{}})}});console.log("Liste des visiteurs :",o),e.commit("setAllVisiteurs",o)}))},saveForm(e,t){return le(this,void 0,void 0,(function*(){const n=yield j["c"].service("tables").find({query:{tableDb:"db_regvisiteurs",tableName:"formulaires",query:JSON.stringify({query:{nom:t.nom}})}});let o;n.length>0?(console.log("Mise a jour du formulaire :",n),o=yield j["c"].service("tables").update(n[0]._id,t,{query:{tableDb:"db_regvisiteurs",tableName:"formulaires"}})):(console.log("Sauvegarde nouveau formulaire :",t),o=yield j["c"].service("tables").create(t,{query:{tableDb:"db_regvisiteurs",tableName:"formulaires"}})),console.log("Formulaire memorisé :",o),e.commit("setSavedForm",o)}))},getForm(e,t){return le(this,void 0,void 0,(function*(){const n=yield j["c"].service("tables").find({query:{tableDb:"db_regvisiteurs",tableName:"formulaires",query:JSON.stringify({query:{nom:t.nom}})}});console.log("Formulaire memorisé :",n),e.commit("setGetForm",n)}))}};var de=ue;const fe={getTitle(e){return e.title},getFormData(e){return e.getform}};var be=fe;const me={changeTitle(e,t){e.title="Change title to "+t},setConfig(e,t){e.config=t},changeLeftDrawer(e,t){e.leftMenu=!e.leftMenu},setLeftDrawer(e,t){e.leftMenu=t},setMailSendEmail(e,t){e.mailsend=t},setAllVisiteurs(e,t){e.visiteurs=t},setAllUtilisateurs(e,t){e.utilisateurs=t},setSavedForm(e,t){e.savedform=t},setGetForm(e,t){e.getform=t}};var he=me;const ge={namespaced:!0,actions:de,getters:be,mutations:he,state:ce};var ve=ge;function pe(){return{layoutNeeded:!0,isLoginPage:!1,mobileMode:!1,menuCollapse:!0,posts:[],database:"",query:"",queryresult:"",lastresult:"",tables:[{dbType:"",dbName:"",datas:""}]}}var ye=pe,qe=function(e,t,n,o){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function r(e){try{c(o.next(e))}catch(t){i(t)}}function s(e){try{c(o["throw"](e))}catch(t){i(t)}}function c(e){e.done?n(e.value):a(e.value).then(r,s)}c((o=o.apply(e,t||[])).next())}))};const we={createTable({commit:e},t){return qe(this,void 0,void 0,(function*(){console.log("Feathers services",j["c"]),console.log("Feathers payload",t);let n=yield j["c"].service("tables").create(t.datas,{query:{tableDb:t.tableDb,tableName:t.tableName}});e("setLastResult",n);let o=yield j["c"].service("tables").find({query:{tableDb:t.tableDb,tableName:t.tableName,query:JSON.stringify({})}}),a={tableDb:t.tableDb,tableName:t.tableName,datas:o};e("setTable",a)}))},queryTable({commit:e},t){return qe(this,void 0,void 0,(function*(){let n=yield j["c"].service("tables").find({query:{tableDb:t.tableDb,tableName:t.tableName,query:JSON.stringify({query:t.query})}});e("setQuery",t.query),e("setQueryResult",n)}))}};var Ae=we;const Ne={getTables(e){return e.tables},getLayoutNeeded(e){return e.layoutNeeded},getIsLoginPage(e){return e.isLoginPage},getMobileMode(e){return e.mobileMode},getMenuCollapse(e){return e.menuCollapse},getPosts(e){return e.posts}};var Se=Ne,De=function(e,t,n,o){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function r(e){try{c(o.next(e))}catch(t){i(t)}}function s(e){try{c(o["throw"](e))}catch(t){i(t)}}function c(e){e.done?n(e.value):a(e.value).then(r,s)}c((o=o.apply(e,t||[])).next())}))};const Pe={setTable(e,t){return De(this,void 0,void 0,(function*(){console.log("Table type:",t.tableDb),console.log("Table Name:",t.tableName),console.log("Table Datas :",t.datas);const n=e.tables.find((e=>e.dbName==t.tableName));console.log("Table existe :",n),n?n.datas=t.datas:(console.log("Ajout de la table"),e.tables.push({dbType:t.tableDb,dbName:t.tableName,datas:t.datas}))}))},initTable(e,t){e.tables=t},setDatabase(e,t){e.database=t},setLastResult(e,t){e.lastresult=t},setQueryResult(e,t){e.queryresult=t},setQuery(e,t){e.query=t},setLayoutNeeded(e,t){e.layoutNeeded=t},setIsLoginPage(e,t){e.isLoginPage=t},setMobileMode(e,t){e.mobileMode=t},setMenuCollapse(e,t){e.menuCollapse=t},setPosts(e,t){e.posts=t}};var Oe=Pe;const xe={namespaced:!0,actions:Ae,getters:Se,mutations:Oe,state:ye};var Te=xe,je=function(e,t,n,o){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function r(e){try{c(o.next(e))}catch(t){i(t)}}function s(e){try{c(o["throw"](e))}catch(t){i(t)}}function c(e){e.done?n(e.value):a(e.value).then(r,s)}c((o=o.apply(e,t||[])).next())}))};r["default"].use(x["b"]),r["default"].use(j["b"]);var _e=Object(T["store"])((function({Vue:e}){return je(this,void 0,void 0,(function*(){e.use(x["b"]);const t=new x["a"]({modules:{vvstore:Te,adinfos:re,admin:ve},plugins:[B,z,L,V,Object(j["d"])({userService:"users"})],strict:!1/*!!process.env.DEBUGGING*/}),n=yield j["c"].service("checkdbs").find({});console.log("Tables :",n);const o=yield j["c"].service("checkdbs").find({query:{database:"database"}});console.log("Base :",o);const a=[].map((e=>({dbType:"mongodb",dbName:e.name,datas:""})));return t.commit("vvstore/initTable",a),t.commit("vvstore/setDatabase",o),console.log("Database :",o),console.log("Store  = ",t),t}))})),Ce=n("8c4f");const Me=[{path:"/",component:()=>Promise.all([n.e(0),n.e(1),n.e(4)]).then(n.bind(null,"e99f")),children:[{path:"",component:()=>Promise.all([n.e(0),n.e(1),n.e(5)]).then(n.bind(null,"3d07")),meta:{requiresAuth:!0,title:"Page d'accueil"}}]},{path:"/nouveau",component:()=>Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"98aa")),children:[{path:"",component:()=>Promise.all([n.e(0),n.e(1),n.e(11)]).then(n.bind(null,"1ac4")),meta:{requiresAuth:!0,title:"Nouveau visiteur"}}]},{path:"/login",component:()=>Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"98aa")),children:[{path:"",component:()=>Promise.all([n.e(0),n.e(7)]).then(n.bind(null,"013f")),meta:{requiresAuth:!0,title:"Nouveau visiteur"}}]},{path:"/formbuilder",component:()=>Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"98aa")),children:[{path:"",component:()=>Promise.all([n.e(0),n.e(1),n.e(10)]).then(n.bind(null,"1d0e")),meta:{requiresAuth:!0,title:"Createur de formulaires"}}]},{path:"/donnees",component:()=>Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"98aa")),children:[{path:"",component:()=>Promise.all([n.e(0),n.e(1),n.e(8)]).then(n.bind(null,"77bc")),meta:{requiresAuth:!0,title:"Données visiteur"}}]},{path:"/flipbook",component:()=>Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"98aa")),children:[{path:"",component:()=>Promise.all([n.e(0),n.e(6)]).then(n.bind(null,"1a60")),meta:{requiresAuth:!0,title:"Document à feuilleter"}}]},{path:"*",component:()=>Promise.all([n.e(0),n.e(9)]).then(n.bind(null,"e51e"))}];var Ee=Me,Le=Object(T["route"])((function({Vue:e}){e.use(Ce["a"]);const t=new Ce["a"]({scrollBehavior:()=>({x:0,y:0}),routes:Ee,mode:"history",base:"/"});return t})),ke=async function(){const e="function"===typeof _e?await _e({Vue:r["default"]}):_e,t="function"===typeof Le?await Le({Vue:r["default"],store:e}):Le;e.$router=t;const n={router:t,store:e,render:e=>e(O),el:"#q-app"};return{app:n,store:e,router:t}},$e=Object(T["boot"])((({Vue:e})=>{e.use(A["c"])})),Re=function(e,t,n,o){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function r(e){try{c(o.next(e))}catch(t){i(t)}}function s(e){try{c(o["throw"](e))}catch(t){i(t)}}function c(e){e.done?n(e.value):a(e.value).then(r,s)}c((o=o.apply(e,t||[])).next())}))},Fe=Object(T["boot"])((({router:e,store:t})=>Re(void 0,void 0,void 0,(function*(){e.beforeEach(((e,n,o)=>Re(void 0,void 0,void 0,(function*(){let n;if(m["a"].start(),console.log("Mode :","production"),n=window.location.origin,console.log("Store :",t.state),e.meta.requiresAuth&&!t.state.auth.user){console.log("Demande une authentification :",e),console.log("Verification sso"),d["a"].create({message:"Vérification SSO.",color:"negative"});let i={data:""};try{t.state.auth.user||(console.log("Verification sso api :",n),i=yield ne.a.get(`${n}/auth/sso`,{withCredentials:!0}),console.log("Presso infos :",i.data),yield t.dispatch("auth/authenticate",{strategy:"sso",sso:i.data}))}catch(a){d["a"].create({message:"Echec d'accès sso !",color:"negative"}),null!=t.state.auth.user?o():o("/login")}try{console.log("Store before sso :",t.state),t.state.auth.user&&console.log("Utilisateur :",t.state.auth.user)}catch(a){d["a"].create({message:"Une identification manuelle est nécessaire !",color:"negative"}),"/login"!==e.path?o("/login"):o()}t.state.auth.user?(d["a"].create({message:"Vous avez été identifié avec succès.",color:"negative"}),yield t.dispatch("adinfos/getRole",t.state.auth.user),yield t.dispatch("adinfos/getSiteRole"),o()):(d["a"].create({message:"Une identification manuelle est nécessaire !",color:"negative"}),"/login"!==e.path?o("/login"):o())}else o()})))),e.afterEach((e=>{m["a"].stop()}))})))),Ve=Object(T["boot"])((({Vue:e})=>{e.prototype.$axios=ne.a})),Je=n("1321"),Qe=n.n(Je);r["default"].component("apexchart",Qe.a);var Ue=n("349e"),Be=n.n(Ue),He=n("e0d6"),Ie=n.n(He);r["default"].use(Be.a),r["default"].use(Ie.a);const Ge="/";async function ze(){const{app:e,store:t,router:n}=await ke();let o=!1;const a=e=>{o=!0;const t=Object(e)===e?n.resolve(e).route.fullPath:e;window.location.href=t},i=window.location.href.replace(window.location.origin,""),s=[$e,j["c"],Fe,Ve,void 0,void 0];for(let l=0;!1===o&&l<s.length;l++)if("function"===typeof s[l])try{await s[l]({app:e,router:n,store:t,Vue:r["default"],ssrContext:null,redirect:a,urlPath:i,publicPath:Ge})}catch(c){return c&&c.url?void(window.location.href=c.url):void console.error("[Quasar] boot error:",c)}!0!==o&&new r["default"](e)}ze()},3:function(e,t){},"31cd":function(e,t,n){},5494:function(e,t,n){"use strict";(function(e){n.d(t,"d",(function(){return p})),n.d(t,"e",(function(){return v})),n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return w}));var o=n("b462"),a=n.n(o),i=n("4059"),r=n.n(i),s=n("8af1"),c=n.n(s),l=n("8055"),u=n.n(l),d=n("6bd9"),f=n("9e62f"),b=n("2b0e");console.log("Web origin :",window.location.origin),console.log("DEV env :",e.env);let m="8080"==window.location.origin.split(":")[2]?"https://localhost:3030":window.location.origin;const h=u()(m,{transports:["websocket"]}),g=a()().configure(r()(h,{timeout:5e4})).configure(c()({storage:window.localStorage})).hooks({before:{all:[Object(d["iff"])((e=>["create","update","patch"].includes(e.method)),Object(d["discard"])("__id","__isTemp"))]}});b["default"].prototype.$feathersClient=g,t["c"]=g;const{makeServicePlugin:v,makeAuthPlugin:p,BaseModel:y,models:q,FeathersVuex:w}=Object(f["a"])(g,{serverAlias:"api",idField:"_id",whitelist:["$regex","$options"]})}).call(this,n("4362"))},ed82:function(e,t,n){}});