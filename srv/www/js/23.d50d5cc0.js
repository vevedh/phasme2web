(this["webpackJsonp"]=this["webpackJsonp"]||[]).push([[23],{d8de:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-page",{staticClass:"flex justify-center items-center q-pa-md full-width"},[i("transition",{attrs:{appear:"","enter-active-class":"animated  fadeIn","leave-active-class":"animated  fadeOut"}},[i("q-card",{ref:"refApps",staticClass:"apps-form",style:e.$q.platform.is.mobile?{width:"90%",height:"75%"}:{width:"75%",height:"75%"},attrs:{"transition-show":"jump-down","transition-hide":"jump-up"}},[i("q-card-section",{staticClass:"q-pa-none",attrs:{round:""}},[i("div",{staticClass:"row items-center q-py-sm text-bold bg-amber-6"},[i("div",{staticClass:"col"},[i("div",{staticClass:"row justify-start q-px-sm"},[e.isAdmin?i("q-btn",{staticClass:"shadow-6",attrs:{glossy:"",icon:"add",color:"white","text-color":"dark",round:"",dense:""},on:{click:function(t){return e.testAddAppLink()}}}):e._e()],1)]),i("div",{staticClass:"col items-center text-center no-wrap"},[i("span",[e._v(" Applications CACEM ")])]),i("div",{staticClass:"col"},[i("div",{staticClass:"row justify-end q-pr-sm"},[i("q-btn",{attrs:{dense:"",icon:"home",label:"Accueil",glossy:"",color:"white","text-color":"dark",to:"/"}})],1)])])]),i("q-card-section",[i("div",{staticClass:"row items-start q-gutter-md full-width full-height"},e._l(e.appLinks,(function(t){return i("q-card",{key:"card_"+t._id,staticClass:"my-card shadow-6",attrs:{bordered:""}},[i("q-card-section",{staticClass:"bg-primary text-white q-py-xs"},[i("div",{staticClass:"text-subtitle1"},[e._v(e._s(t.nom))])]),i("q-separator"),i("q-card-section",{attrs:{align:"center"}},[i("div",{staticClass:"col"},[i("div",{staticClass:"row justify-center"},[i("q-btn",{attrs:{round:"",type:"a",href:t.url,target:"_blank"}},[""==t.img?i("q-avatar",{staticClass:"shadow-8",attrs:{icon:"home",size:"100px"}}):e._e(),""!=t.img?i("q-avatar",{staticClass:"shadow-8",attrs:{icon:"img:"+t.img,size:"100px"}}):e._e()],1)],1)])]),i("q-card-actions",{attrs:{align:"right"}},[e.isAdmin?i("q-btn",{attrs:{dense:"",glossy:"",color:"primary"},on:{click:function(i){return e.editAppLink(t)}}},[e._v("Modifier..")]):e._e()],1)],1)})),1)])],1)],1)],1)},s=[],a=i("c973"),r=i.n(a),o=i("ded3"),l=i.n(o),c=(i("96cf"),i("2f62")),d=i("ed09"),p=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-dialog",{ref:"dialog",on:{hide:e.onDialogHide}},[i("q-card",[i("q-card-section",{staticClass:"row no-wrap justify-center items-center q-py-xs  bg-primary text-white",attrs:{dense:""}},[i("div",{staticClass:"text-h6 full-width"},[e._v(e._s(e.labelAction))]),i("q-space"),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),i("q-card-section",[i("f-vv-form",{ref:"form",attrs:{ffields:e.fields,edit:!1,readOnly:!1,fieldsModel:e.fieldsModel}})],1),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{attrs:{color:"negative",label:"Annuler"},on:{click:e.onCancelClick}}),i("q-btn",{attrs:{color:"primary",label:"Valider"},on:{click:e.onOKClick}})],1)],1)],1)},u=[],f=i("7596"),m=function(e,t,i,n){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function o(e){try{l(n["throw"](e))}catch(t){a(t)}}function l(e){e.done?i(e.value):s(e.value).then(r,o)}l((n=n.apply(e,t||[])).next())}))},h=Object(d["d"])({name:"AddAppLink",components:{FVvForm:f["a"]},data(){return{model:{},formFields:Array||{}}},props:{fields:{type:Array},fieldsModel:{type:Object||null},id:{type:String||null},labelAction:{type:String,required:!1}},mounted(){this.model=Object.assign({},this.fieldsModel)},methods:{show(){this.$refs.dialog.show()},hide(){this.$refs.dialog.hide()},onDialogHide(){this.$emit("hide")},onInput(e){console.log("Model :",e)},onOKClick(){return m(this,void 0,void 0,(function*(){let e=yield this.$refs.form.$refs.myForm.validate();if(e){console.log("Save :",this.$refs.form.model,this.id);let e=Object.assign({},this.$refs.form.model),t=this.id,i=Object.assign({},Object.assign({_id:t},e));this.$emit("ok",{result:i}),this.hide()}else this.$q.notify({message:"Vous devez remplir tous les champs obligatoires",color:"negative"})}))},onCancelClick(){this.hide()}},watch:{model:{handler(e){console.log("Model :",e,this.id)}}}}),g=h,b=i("2877"),w=i("24e8"),v=i("f09f"),q=i("a370"),k=i("2c91"),A=i("9c40"),C=i("4b7e"),y=i("7f67"),_=i("eebe"),x=i.n(_),O=Object(b["a"])(g,p,u,!1,null,null,null),j=O.exports;x()(O,"components",{QDialog:w["a"],QCard:v["a"],QCardSection:q["a"],QSpace:k["a"],QBtn:A["a"],QCardActions:C["a"]}),x()(O,"directives",{ClosePopup:y["a"]});var L=Object(d["d"])({name:"AppsPage",components:{AddAppLink:j},computed:l()(l()({},Object(c["d"])("adinfos",{isAdmin:function(e){return e.isAdmin},isSiteAdmin:function(e){return e.isSiteAdmin},users:function(e){return e.users}})),Object(c["d"])("admin",{appLinks:function(e){return e.applinks}})),methods:l()(l()(l()({},Object(c["b"])("adinfos",["getRole","getAllUsers"])),Object(c["b"])("admin",["getAllAppLinks","addAppLink","updateAppLink"])),{},{flip:function(e){this.showBtnAccueil=e},testAddAppLink:function(){var e=this;return r()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$q.dialog({component:j,parent:e,width:"20%",fields:[{label:"Nom de l'application",field_type:"text",required:!0,cid:"8f03d13b-e739-4097-b75d-4339c71497d7",id:"nom",span:12,show_options:[],field_options:{description:"",span:12,filled:!1,"stack-label":!1}},{label:"Description",field_type:"paragraph",required:!0,cid:"18f3d583-7d84-44ca-b13b-001020dfeb55",id:"desc",span:12,show_options:[],field_options:{description:"",span:12,filled:!1,"stack-label":!1}},{label:"Image",field_type:"file",required:!0,cid:"2f4a20a8-3066-4e97-962e-8b02c08b0e57",id:"img",span:12,show_options:[],field_options:{description:"",span:12,filled:!1,"stack-label":!1}},{label:"URL",field_type:"text",required:!0,cid:"b4effa45-e272-44e7-80f2-ac3b896dde42",id:"url",span:12,show_options:[],field_options:{description:"",span:12,filled:!1,"stack-label":!1}}],fieldsModel:{nom:"",desc:"",img:"",url:""},labelAction:"Ajouter"}).onOk(function(){var t=r()(regeneratorRuntime.mark((function t(i){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("OK :",i.result),t.next=3,e.addAppLink(i.result);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).onCancel((function(){console.log("Cancel")})).onDismiss((function(){console.log("Called on OK or Cancel")}));case 1:case"end":return t.stop()}}),t)})))()},editAppLink:function(e){var t=this;return r()(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:t.$q.dialog({component:j,parent:t,width:"20%",fields:[{id:"nom",type:"text",span:12,label:"Nom de l'application ",required:!1,options:{filled:!0,rules:[function(e){return e&&e.length>0||"Nom obligatoire"}]}},{id:"desc",span:12,type:"textarea",label:"Description ",required:!1,options:{filled:!0}},{id:"img",span:4,type:"file",label:"Fichier image",description:"Image icon",required:!1,options:{}},{id:"url",span:8,type:"text",label:"Lien ",required:!1,options:{filled:!0,rules:[function(e){return e&&e.length>0||"Lien obligatoire"}]}}],fieldsModel:e,id:e._id,labelAction:"Modifier"}).onOk(function(){var e=r()(regeneratorRuntime.mark((function e(i){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("OK :",i.result),e.next=3,t.updateAppLink(i.result);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).onCancel((function(){console.log("Cancel")})).onDismiss((function(){console.log("Called on OK or Cancel")}));case 1:case"end":return i.stop()}}),i)})))()}}),mounted:function(){var e=this;return r()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getAllAppLinks();case 2:console.log("App links :",e.appLinks);case 3:case"end":return t.stop()}}),t)})))()}}),$=L,Q=i("9989"),R=i("eb85"),M=i("cb32"),S=Object(b["a"])($,n,s,!1,null,null,null);t["default"]=S.exports;x()(S,"components",{QPage:Q["a"],QCard:v["a"],QCardSection:q["a"],QBtn:A["a"],QSeparator:R["a"],QAvatar:M["a"],QCardActions:C["a"]})}}]);